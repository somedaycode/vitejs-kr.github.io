import{_ as n,c as s,o as a,a as p}from"./app.e867883c.js";var t="/assets/vite-plugin-inspect.0f355583.png";const m='{"title":"\uD50C\uB7EC\uADF8\uC778 API","description":"","frontmatter":{"title":"\uD50C\uB7EC\uADF8\uC778 API"},"headers":[{"level":2,"title":"\uD50C\uB7EC\uADF8\uC778 \uB9CC\uB4E4\uAE30","slug":"authoring-a-plugin"},{"level":2,"title":"\uD50C\uB7EC\uADF8\uC778 \uC791\uC131 \uADDC\uCE59","slug":"conventions"},{"level":2,"title":"\uD50C\uB7EC\uADF8\uC778 \uC124\uC815","slug":"plugins-config"},{"level":2,"title":"\uAC04\uB2E8\uD55C \uC608\uC81C\uB4E4","slug":"simple-examples"},{"level":3,"title":"\uD30C\uC77C \uD0C0\uC785 \uBCC0\uD658\uD558\uAE30","slug":"transforming-custom-file-types"},{"level":3,"title":"\uAC00\uC0C1 \uBAA8\uB4C8 \uAC00\uC838\uC624\uAE30","slug":"importing-a-virtual-file"},{"level":2,"title":"\uAC00\uC0C1 \uBAA8\uB4C8 \uCEE8\uBCA4\uC158","slug":"virtual-modules-convention"},{"level":2,"title":"\uBC94\uC6A9 \uD6C5","slug":"universal-hooks"},{"level":2,"title":"Vite \uC804\uC6A9 \uD6C5","slug":"vite-specific-hooks"},{"level":3,"title":"config","slug":"config"},{"level":3,"title":"configResolved","slug":"configresolved"},{"level":3,"title":"configureServer","slug":"configureserver"},{"level":3,"title":"transformIndexHtml","slug":"transformindexhtml"},{"level":3,"title":"handleHotUpdate","slug":"handlehotupdate"},{"level":2,"title":"\uD50C\uB7EC\uADF8\uC778 \uC21C\uC11C","slug":"plugin-ordering"},{"level":2,"title":"\uC870\uAC74\uBD80 \uC560\uD50C\uB9AC\uCF00\uC774\uC158","slug":"conditional-application"},{"level":2,"title":"Rollup \uD50C\uB7EC\uADF8\uC778 \uD638\uD658\uC131","slug":"rollup-plugin-compatibility"},{"level":2,"title":"\uACBD\uB85C \uC815\uADDC\uD654","slug":"path-normalization"}],"relativePath":"guide/api-plugin.md","lastUpdated":1644060470672}',e={},o=p('<h1 id="plugin-api" tabindex="-1">\uD50C\uB7EC\uADF8\uC778 API <a class="header-anchor" href="#plugin-api" aria-hidden="true">#</a></h1><p>Vite\uC758 \uD50C\uB7EC\uADF8\uC778\uC740 Rollup\uC758 \uBA4B\uC9C4 \uD50C\uB7EC\uADF8\uC778 \uC778\uD130\uD398\uC774\uC2A4\uC5D0 \uBA87 \uAC00\uC9C0 Vite \uD2B9\uC815 \uC635\uC158\uC744 \uCD94\uAC00\uD55C \uD615\uD0DC\uB85C \uAD6C\uC131\uD558\uC600\uC2B5\uB2C8\uB2E4. \uADF8\uB9AC\uACE0 \uACB0\uACFC\uC801\uC73C\uB85C, Vite\uC758 \uD50C\uB7EC\uADF8\uC778\uC740 \uD55C \uBC88 \uC791\uC131\uB418\uBA74 \uAC1C\uBC1C \uBC0F \uBE4C\uB4DC \uC2DC \uBAA8\uB450 \uC0AC\uC6A9\uC774 \uAC00\uB2A5\uD558\uB2E4\uB294 \uC7A5\uC810\uC774 \uC788\uC8E0.</p><p><strong>\uC544\uB798 \uB0B4\uC6A9\uC740 <a href="https://rollupjs.org/guide/en/#plugin-development" target="_blank" rel="noopener noreferrer">Rollup\uC758 \uD50C\uB7EC\uADF8\uC778 \uBB38\uC11C</a>\uB97C \uC77D\uC5C8\uB2E4\uB294 \uC804\uC81C \uD558\uC5D0 \uC9C4\uD589\uD569\uB2C8\uB2E4.</strong></p><h2 id="authoring-a-plugin" tabindex="-1">\uD50C\uB7EC\uADF8\uC778 \uB9CC\uB4E4\uAE30 <a class="header-anchor" href="#authoring-a-plugin" aria-hidden="true">#</a></h2><p>Vite\uB294 \uD655\uB9BD\uB41C \uD328\uD134\uC744 \uC81C\uACF5\uD558\uAE30 \uC704\uD574 \uB178\uB825\uD558\uACE0 \uC788\uC2B5\uB2C8\uB2E4. \uB530\uB77C\uC11C \uC0C8 \uD50C\uB7EC\uADF8\uC778\uC744 \uB9CC\uB4E4\uAE30 \uC804 <a href="https://vitejs-kr.github.io/guide/features" target="_blank" rel="noopener noreferrer">Vite\uC5D0\uC11C \uC9C0\uC6D0\uD558\uB294 \uAE30\uB2A5\uB4E4</a>, <a href="https://github.com/rollup/awesome" target="_blank" rel="noopener noreferrer">\uD638\uD658\uB418\uB294 Rollup \uD50C\uB7EC\uADF8\uC778</a>, \uADF8\uB9AC\uACE0 <a href="https://github.com/vitejs/awesome-vite#plugins" target="_blank" rel="noopener noreferrer">Vite \uD50C\uB7EC\uADF8\uC778</a>\uC744 \uD655\uC778\uD558\uC5EC \uC0AC\uC6A9 \uAC00\uB2A5\uD55C \uAC83\uC774 \uC788\uB294\uC9C0 \uD655\uC778\uD574\uC8FC\uC138\uC694.</p><p>\uD50C\uB7EC\uADF8\uC778\uC744 \uB9CC\uB4E4 \uB54C\uB294 \uAD73\uC774 \uC0C8\uB85C\uC6B4 \uD328\uD0A4\uC9C0\uB97C \uB9CC\uB4E4\uC9C0 \uC54A\uACE0 <code>vite.config.js</code>\uC5D0 \uC9C1\uC811 \uC791\uC131\uD560 \uC218\uB3C4 \uC788\uC2B5\uB2C8\uB2E4. \uB9CC\uC57D \uC791\uC131\uD55C \uD50C\uB7EC\uADF8\uC778\uC774 \uD504\uB85C\uC81D\uD2B8\uC5D0\uC11C \uC720\uC6A9\uD558\uB2E4\uACE0 \uC0DD\uAC01\uB41C\uB2E4\uBA74, <a href="https://chat.vitejs.dev" target="_blank" rel="noopener noreferrer">Vite\uB97C \uC0AC\uC6A9\uD558\uB294 \uB2E4\uB978 \uC0AC\uB78C\uB4E4\uACFC \uACF5\uC720\uD574\uBCF4\uC138\uC694</a>.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>\uD50C\uB7EC\uADF8\uC778\uC744 \uD559\uC2B5\uD558\uAC70\uB098, \uB514\uBC84\uAE45 \uB610\uB294 \uC0C8\uB86D\uAC8C \uC791\uC131\uD560 \uB54C \uD504\uB85C\uC81D\uD2B8\uC5D0 <a href="https://github.com/antfu/vite-plugin-inspect" target="_blank" rel="noopener noreferrer">vite-plugin-inspect</a>\uB97C \uC124\uCE58\uD558\uB294 \uAC83\uC774 \uC88B\uC2B5\uB2C8\uB2E4. \uC774 \uBAA8\uB4C8\uC740 <code>localhost:3000/__inspect/</code>\uB97C \uD1B5\uD574 Vite \uD50C\uB7EC\uADF8\uC778\uC758 \uC911\uAC04 \uC0C1\uD0DC\uB97C \uAC80\uC0AC\uD560 \uC218 \uC788\uB3C4\uB85D \uB3C4\uC640\uC90D\uB2C8\uB2E4. \uB354 \uC790\uC138\uD55C \uC0AC\uD56D\uC740 <a href="https://github.com/antfu/vite-plugin-inspect" target="_blank" rel="noopener noreferrer">vite-plugin-inspect \uBB38\uC11C</a>\uB97C \uCC38\uACE0\uD574\uC8FC\uC138\uC694. <img src="'+t+`" alt="vite-plugin-inspect"></p></div><h2 id="conventions" tabindex="-1">\uD50C\uB7EC\uADF8\uC778 \uC791\uC131 \uADDC\uCE59 <a class="header-anchor" href="#conventions" aria-hidden="true">#</a></h2><p>\uB9CC\uC57D \uD50C\uB7EC\uADF8\uC778\uC774 Vite\uC5D0\uC11C \uC81C\uACF5\uD558\uB294 \uD6C5\uC744 \uC0AC\uC6A9\uD558\uC9C0 \uC54A\uACE0, \uB610 <a href="#rollup-plugin-compatibility">\uD638\uD658\uB418\uB294 Rollup \uD50C\uB7EC\uADF8\uC778</a>\uC73C\uB85C \uAD6C\uC131\uB420 \uC218 \uC788\uB294 \uACBD\uC6B0\uC5D0\uB294 <a href="https://rollupjs.org/guide/en/#conventions" target="_blank" rel="noopener noreferrer">Rollup \uD50C\uB7EC\uADF8\uC778 \uBA85\uBA85 \uADDC\uCE59</a>\uC744 \uB530\uB974\uB294 \uAC83\uC774 \uC88B\uC2B5\uB2C8\uB2E4.</p><ul><li>Rollup \uD50C\uB7EC\uADF8\uC778\uC740 <code>rollup-plugin-</code> \uC811\uB450\uC0AC\uAC00 \uC788\uB294 \uBA85\uD655\uD55C \uC774\uB984\uC744 \uAC16\uC2B5\uB2C8\uB2E4.</li><li>package.json \uD30C\uC77C\uC758 <code>keywords</code> \uD56D\uBAA9\uC5D0\uB294 <code>rollup-plugin</code> \uBC0F <code>vite-plugin</code>\uC744 \uD3EC\uD568\uC2DC\uD0A4\uB3C4\uB85D \uD569\uB2C8\uB2E4.</li></ul><p>\uC704 \uADDC\uCE59\uC744 \uD1B5\uD574 \uC791\uC131\uB41C \uD50C\uB7EC\uADF8\uC778\uC774 \uC21C\uC218\uD558\uAC8C Rollup\uC774\uB098 <a href="https://github.com/preactjs/wmr" target="_blank" rel="noopener noreferrer">WMR</a> \uAE30\uBC18\uC758 \uD504\uB85C\uC81D\uD2B8\uC5D0\uC11C\uB3C4 \uC0AC\uC6A9\uB420 \uC218 \uC788\uB3C4\uB85D \uB3C4\uC640\uC90D\uB2C8\uB2E4.</p><p>\uD50C\uB7EC\uADF8\uC778\uC774 Vite \uC804\uC6A9\uC73C\uB85C \uC791\uC131\uB41C \uACBD\uC6B0\uC5D0\uB294 \uC544\uB798 \uADDC\uCE59\uC744 \uB530\uB77C\uC8FC\uC138\uC694.</p><ul><li>Vite \uD50C\uB7EC\uADF8\uC778\uC740 <code>vite-plugin-</code> \uC811\uB450\uC0AC\uAC00 \uC788\uB294 \uBA85\uD655\uD55C \uC774\uB984\uC744 \uAC16\uC2B5\uB2C8\uB2E4.</li><li>package.json \uD30C\uC77C\uC758 <code>keywords</code> \uD56D\uBAA9\uC5D0\uB294 <code>vite-plugin</code>\uC744 \uD3EC\uD568\uC2DC\uD0A4\uB3C4\uB85D \uD569\uB2C8\uB2E4.</li><li>\uD50C\uB7EC\uADF8\uC778 \uBB38\uC11C\uC5D0 Vite \uD50C\uB7EC\uADF8\uC778\uC73C\uB85C \uAD6C\uC131\uD55C \uC774\uC720\uB97C \uC124\uBA85\uD558\uB294 \uC139\uC158\uC744 \uCD94\uAC00\uD569\uB2C8\uB2E4. (\uAC00\uB839 &#39;Vite \uC804\uC6A9 \uD50C\uB7EC\uADF8\uC778 \uD6C5 \uC0AC\uC6A9&#39;\uACFC \uAC19\uC774 \uB9D0\uC774\uC8E0.)</li></ul><p>\uD2B9\uC815 \uD504\uB808\uC784\uC6CC\uD06C\uC5D0\uC11C\uB9CC \uB3D9\uC791\uD558\uB294 Vite \uD50C\uB7EC\uADF8\uC778\uC740 \uD504\uB808\uC784\uC6CC\uD06C\uC758 \uC774\uB984\uC774 \uC811\uB450\uC0AC\uC758 \uC77C\uBD80\uB85C \uD3EC\uD568\uB418\uB3C4\uB85D \uD569\uB2C8\uB2E4.</p><ul><li><code>vite-plugin-vue-</code>\uB294 Vue\uB9CC\uC744 \uC9C0\uC6D0\uD558\uB294 Vite \uD50C\uB7EC\uADF8\uC778\uC744 \uC758\uBBF8\uD569\uB2C8\uB2E4.</li><li><code>vite-plugin-react-</code>\uB294 React\uB9CC\uC744 \uC9C0\uC6D0\uD558\uB294 Vite \uD50C\uB7EC\uADF8\uC778\uC744 \uC758\uBBF8\uD569\uB2C8\uB2E4.</li><li><code>vite-plugin-svelte-</code>\uB294 Svelte\uB9CC\uC744 \uC9C0\uC6D0\uD558\uB294 Vite \uD50C\uB7EC\uADF8\uC778\uC744 \uC758\uBBF8\uD569\uB2C8\uB2E4.</li></ul><p><a href="#virtual-modules-convention">\uAC00\uC0C1 \uBAA8\uB4C8 \uCEE8\uBCA4\uC158</a>\uB610\uD55C \uCC38\uACE0\uAC00 \uAC00\uB2A5\uD569\uB2C8\uB2E4.</p><h2 id="plugins-config" tabindex="-1">\uD50C\uB7EC\uADF8\uC778 \uC124\uC815 <a class="header-anchor" href="#plugins-config" aria-hidden="true">#</a></h2><p>\uD504\uB85C\uC81D\uD2B8\uC758 <code>devDependencies</code>\uC5D0 \uD50C\uB7EC\uADF8\uC778\uC744 \uCD94\uAC00\uD55C \uB4A4, Vite \uC124\uC815 \uD30C\uC77C\uC758 <code>plugins</code> \uBC30\uC5F4 \uC635\uC158\uC744 \uC0AC\uC6A9\uD574 \uD50C\uB7EC\uADF8\uC778\uC744 \uAD6C\uC131\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.</p><div class="language-js"><pre><code><span class="token comment">// vite.config.js</span>
<span class="token keyword">import</span> vitePlugin <span class="token keyword">from</span> <span class="token string">&#39;vite-plugin-feature&#39;</span>
<span class="token keyword">import</span> rollupPlugin <span class="token keyword">from</span> <span class="token string">&#39;rollup-plugin-feature&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">vitePlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">rollupPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>\uB2E4\uB978 \uD50C\uB7EC\uADF8\uC778\uC744 \uC27D\uAC8C \uD65C\uC131\uD654\uD558\uAC70\uB098 \uBE44\uD65C\uC131\uD654\uD558\uB294 \uB370 \uC0AC\uC6A9\uB420 \uC218 \uC788\uB294 \uC798\uBABB\uB41C \uD50C\uB7EC\uADF8\uC778\uC740 \uBB34\uC2DC\uB429\uB2C8\uB2E4.</p><p><code>plugins</code> \uD56D\uBAA9\uC740 \uC5EC\uB7EC \uD50C\uB7EC\uADF8\uC778\uC744 \uD558\uB098\uC758 \uC694\uC18C\uB85C \uD3EC\uD568\uD560 \uC218\uB3C4 \uC788\uC2B5\uB2C8\uB2E4. \uC774\uB294 \uD2B9\uC815 \uD504\uB808\uC784\uC6CC\uD06C\uB97C \uD0C0\uAE43\uC73C\uB85C \uC5EC\uB7EC \uD50C\uB7EC\uADF8\uC778\uC744 \uC0AC\uC6A9\uD558\uB294 \uACBD\uC6B0\uC640 \uAC19\uC774 \uBCF5\uC7A1\uD55C \uAE30\uB2A5\uC744 \uAD6C\uD604\uD558\uB294 \uB370 \uC720\uC6A9\uD569\uB2C8\uB2E4. \uC774 \uB54C \uD50C\uB7EC\uADF8\uC778 \uBC30\uC5F4\uC740 \uC790\uB3D9\uC73C\uB85C \uBCD1\uD569\uB429\uB2C8\uB2E4.</p><div class="language-js"><pre><code><span class="token comment">// framework-plugin</span>
<span class="token keyword">import</span> frameworkRefresh <span class="token keyword">from</span> <span class="token string">&#39;vite-plugin-framework-refresh&#39;</span>
<span class="token keyword">import</span> frameworkDevtools <span class="token keyword">from</span> <span class="token string">&#39;vite-plugin-framework-devtools&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">framework</span><span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token function">frameworkRefresh</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">frameworkDevTools</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js"><pre><code><span class="token comment">// vite.config.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vite&#39;</span>
<span class="token keyword">import</span> framework <span class="token keyword">from</span> <span class="token string">&#39;vite-plugin-framework&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">framework</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="simple-examples" tabindex="-1">\uAC04\uB2E8\uD55C \uC608\uC81C\uB4E4 <a class="header-anchor" href="#simple-examples" aria-hidden="true">#</a></h2><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Vite \uB610\uB294 Rollup \uD50C\uB7EC\uADF8\uC778\uC744 \uAD6C\uD604\uD560 \uB54C\uB294 \uC2E4\uC81C \uD50C\uB7EC\uADF8\uC778 \uAC1D\uCCB4\uB97C \uBC18\uD658\uD558\uB294 \uD329\uD1A0\uB9AC \uD568\uC218\uB85C \uC791\uC131\uD558\uB294 \uAC83\uC774 \uC77C\uBC18\uC801\uC778 \uAD00\uB840\uC785\uB2C8\uB2E4. \uB610\uD55C \uC774\uB807\uAC8C \uAD6C\uC131\uD560 \uACBD\uC6B0 \uD50C\uB7EC\uADF8\uC778\uC744 \uC0AC\uC6A9\uD558\uB294 \uC0AC\uC6A9\uC790\uAC00 \uD50C\uB7EC\uADF8\uC778\uC758 \uC138\uBD80\uC801\uC778 \uB3D9\uC791\uC744 \uC815\uC758\uD560 \uC218 \uC788\uB294 \uC635\uC158\uC744 \uD5C8\uC6A9\uD560 \uC218 \uC788\uAC8C \uB9CC\uB4E4\uC5B4 \uC904 \uC218\uB3C4 \uC788\uC2B5\uB2C8\uB2E4.</p></div><h3 id="transforming-custom-file-types" tabindex="-1">\uD30C\uC77C \uD0C0\uC785 \uBCC0\uD658\uD558\uAE30 <a class="header-anchor" href="#transforming-custom-file-types" aria-hidden="true">#</a></h3><div class="language-js"><pre><code><span class="token keyword">const</span> fileRegex <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\.(my-file-ext)$</span><span class="token regex-delimiter">/</span></span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">myPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;transform-file&#39;</span><span class="token punctuation">,</span>

    <span class="token function">transform</span><span class="token punctuation">(</span><span class="token parameter">src<span class="token punctuation">,</span> id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>fileRegex<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token function">compileFileToJS</span><span class="token punctuation">(</span>src<span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token literal-property property">map</span><span class="token operator">:</span> <span class="token keyword">null</span> <span class="token comment">// \uAC00\uB2A5\uD558\uB2E4\uBA74 \uC18C\uC2A4 \uB9F5\uC744 \uC81C\uACF5</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="importing-a-virtual-file" tabindex="-1">\uAC00\uC0C1 \uBAA8\uB4C8 \uAC00\uC838\uC624\uAE30 <a class="header-anchor" href="#importing-a-virtual-file" aria-hidden="true">#</a></h3><p>\uC608\uC81C\uB294 <a href="#virtual-modules-convention">\uB2E4\uC74C \uC139\uC158</a>\uC744 \uCC38\uACE0\uD574\uC8FC\uC138\uC694.</p><h2 id="virtual-modules-convention" tabindex="-1">\uAC00\uC0C1 \uBAA8\uB4C8 \uCEE8\uBCA4\uC158 <a class="header-anchor" href="#virtual-modules-convention" aria-hidden="true">#</a></h2><p>\uAC00\uC0C1 \uBAA8\uB4C8\uC740 ESM\uC758 \uC77C\uBC18\uC801\uC778 <code>import</code> \uAD6C\uBB38\uC744 \uC0AC\uC6A9\uD574 \uC18C\uC2A4 \uD30C\uC77C\uC5D0 \uBE4C\uB4DC \uC2DC\uC758 \uC815\uBCF4\uB97C \uC804\uB2EC\uD560 \uC218 \uC788\uB294 \uC720\uC6A9\uD55C \uAE30\uBC95\uC785\uB2C8\uB2E4.</p><div class="language-js"><pre><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">myPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> virtualModuleId <span class="token operator">=</span> <span class="token string">&#39;@my-virtual-module&#39;</span>
  <span class="token keyword">const</span> resolvedVirtualModuleId <span class="token operator">=</span> <span class="token string">&#39;\\0&#39;</span> <span class="token operator">+</span> virtualModuleId

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;my-plugin&#39;</span><span class="token punctuation">,</span> <span class="token comment">// \uD544\uC218 \uD56D\uBAA9\uC774\uBA70, \uACBD\uACE0\uB098 \uC624\uB958\uB97C \uB098\uD0C0\uB0BC \uB54C \uC0AC\uC6A9\uB429\uB2C8\uB2E4.</span>
    <span class="token function">resolveId</span><span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>id <span class="token operator">===</span> virtualModuleId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> resolvedVirtualModuleId
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">load</span><span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>id <span class="token operator">===</span> resolvedVirtualModuleId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">export const msg = &quot;from virtual module&quot;</span><span class="token template-punctuation string">\`</span></span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>JavaScript\uC5D0\uC11C\uB294 \uB2E4\uC74C\uACFC \uAC19\uC774 \uBAA8\uB4C8\uC744 \uAC00\uC838\uC62C \uC218 \uC788\uC2B5\uB2C8\uB2E4:</p><div class="language-js"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> msg <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@my-virtual-module&#39;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
</code></pre></div><p><a href="https://rollupjs.org/guide/en/#a-simple-example" target="_blank" rel="noopener noreferrer">\uAC00\uC0C1 \uBAA8\uB4C8</a>\uC740 Vite\uC640 Rollup\uC5D0\uC11C <code>virtual:</code> \uC811\uB450\uC0AC\uB97C \uBD99\uC5EC \uD45C\uD604 \uBC0F \uC0AC\uC6A9\uD569\uB2C8\uB2E4. \uB610\uD55C, \uAC00\uB2A5\uD55C \uD50C\uB7EC\uADF8\uC778\uC758 \uC774\uB984\uC744 \uB124\uC784\uC2A4\uD398\uC774\uC2A4\uB85C \uC0AC\uC6A9\uD558\uC5EC \uB2E4\uB978 \uD50C\uB7EC\uADF8\uC778\uACFC\uC758 \uCDA9\uB3CC\uC744 \uBC29\uC9C0\uD574\uC57C \uD569\uB2C8\uB2E4. \uAC00\uB839 <code>vite-plugin-posts</code> \uB77C\uB294 \uC774\uB984\uC744 \uAC00\uC9C4 \uD50C\uB7EC\uADF8\uC778\uC774 \uC788\uACE0, \uC774 \uD50C\uB7EC\uADF8\uC778\uC744 \uC0AC\uC6A9\uD558\uB294 \uC0AC\uC6A9\uC790\uB294 \uAC00\uC0C1 \uBAA8\uB4C8\uC744 \uD3EC\uD568(Import)\uD574\uC57C \uD55C\uB2E4\uACE0 \uAC00\uC815\uD558\uACA0\uC2B5\uB2C8\uB2E4. \uC774 \uB54C \uAC00\uC0C1 \uBAA8\uB4C8\uC758 \uC774\uB984\uC740 <code>virtual:posts</code> \uB610\uB294 <code>virtual:posts/helpers</code>\uC640 \uAC19\uC774 \uD50C\uB7EC\uADF8\uC778 \uC774\uB984\uC778 <code>posts</code>\uB97C \uC0AC\uC6A9\uD558\uB294 \uAC83\uC774 \uC801\uC808\uD569\uB2C8\uB2E4. \uADF8\uB9AC\uACE0 \uC774\uB984 \uADDC\uCE59\uC5D0 \uB300\uD574 \uB0B4\uBD80\uC801\uC73C\uB85C \uBCF4\uC790\uBA74, \uAC00\uC0C1 \uBAA8\uB4C8\uC744 \uC0AC\uC6A9\uD558\uB294 \uD50C\uB7EC\uADF8\uC778\uC740 Rollup\uC758 \uADDC\uCE59\uACFC \uAC19\uC774 \uBAA8\uB4C8\uC758 ID\uB97C \uD655\uC778\uD558\uB294 \uACFC\uC815\uC5D0\uC11C ID \uC55E\uC5D0 <code>\\0</code>\uC744 \uBD99\uC5EC\uC918\uC57C \uD569\uB2C8\uB2E4. \uC774\uB294 \uB2E4\uB978 \uD50C\uB7EC\uADF8\uC778\uC774 \uB178\uB4DC\uB97C \uD655\uC778\uD558\uB294 \uC791\uC5C5(Node Resolution) \uB4F1\uACFC \uAC19\uC774 \uAC00\uC0C1 \uBAA8\uB4C8\uC758 ID\uB97C \uCC98\uB9AC\uD558\uB294 \uAC83\uC744 \uBC29\uC9C0\uD558\uACE0, \uB610 \uC18C\uC2A4 \uB9F5\uACFC \uAC19\uC740 \uD575\uC2EC \uAE30\uB2A5\uC5D0\uC11C\uB294 \uAC00\uC0C1 \uBAA8\uB4C8\uACFC \uC77C\uBC18 \uBAA8\uB4C8\uC744 \uAD6C\uBCC4\uD558\uAE30 \uC704\uD574 \uC0AC\uC6A9\uD558\uAE30 \uB54C\uBB38\uC785\uB2C8\uB2E4. \uB2E4\uB9CC <code>\\0</code>\uC740 <code>import</code> \uC2DC \uC0AC\uC6A9\uB418\uB294 URL\uC5D0\uC11C \uD5C8\uC6A9\uB418\uB294 \uBB38\uC790\uAC00 \uC544\uB2C8\uAE30\uC5D0, <code>import</code> \uBD84\uC11D \uC911\uC5D0\uB294 \uC774 \uBB38\uC790\uC5F4\uC744 \uB300\uCCB4\uD574\uC918\uC57C \uD569\uB2C8\uB2E4. \uBE0C\uB77C\uC6B0\uC800\uC5D0\uC11C\uB294 <code>\\0{id}</code> \uB77C\uB294 ID\uAC00 <code>/@id/__x00__{id}</code>\uB85C \uC778\uCF54\uB529\uB418\uBA70, \uC774 ID\uB294 \uD50C\uB7EC\uADF8\uC778 \uD30C\uC774\uD504\uB77C\uC778\uC744 \uC9C4\uD589\uD558\uAE30 \uC804 \uB2E4\uC2DC \uB514\uCF54\uB529\uB418\uAE30\uC5D0 \uD50C\uB7EC\uADF8\uC778 \uD6C5 \uB0B4\uBD80\uC5D0\uC11C\uB294 \uC774\uB97C \uBCFC \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.</p><p>\uB2E8\uC77C \uD30C\uC77C \uCEF4\uD3EC\uB10C\uD2B8(Single File Component, .vue \uB098 .svelte \uD655\uC7A5\uC790\uAC00 \uBD99\uC740)\uC640 \uAC19\uC774 \uC2E4\uC81C \uD30C\uC77C\uC744 \uAE30\uBC18\uC73C\uB85C \uB9CC\uB4E4\uC5B4\uC9C4 \uBAA8\uB4C8\uC758 \uACBD\uC6B0\uC5D0\uB294 \uC704 \uADDC\uCE59\uC744 \uB530\uB97C \uD544\uC694\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4. \uD2B9\uD788 SFC\uB294 \uC77C\uBC18\uC801\uC73C\uB85C \uD558\uC704 \uBAA8\uB4C8\uB4E4\uC744 \uC0DD\uC131\uD558\uB294 \uBC29\uC2DD\uC73C\uB85C \uCC98\uB9AC\uB418\uB098, \uC774\uB4E4\uC758 \uCF54\uB4DC\uB294 \uD30C\uC77C \uC2DC\uC2A4\uD15C\uC5D0 \uB2E4\uC2DC \uB9E4\uD551\uB420 \uC218 \uC788\uC2B5\uB2C8\uB2E4. \uC774 \uD558\uC704 \uBAA8\uB4C8\uC5D0 <code>\\0</code>\uC744 \uC0AC\uC6A9\uD558\uAC8C \uB418\uBA74 \uC18C\uC2A4 \uB9F5\uC774 \uC815\uC0C1\uC801\uC73C\uB85C \uB3D9\uC791\uD558\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.</p><h2 id="universal-hooks" tabindex="-1">\uBC94\uC6A9 \uD6C5 <a class="header-anchor" href="#universal-hooks" aria-hidden="true">#</a></h2><p>\uAC1C\uBC1C \uC2DC, Vite \uAC1C\uBC1C \uC11C\uBC84\uB294 Rollup\uACFC \uB3D9\uC77C\uD55C \uBC29\uC2DD\uC73C\uB85C <a href="https://rollupjs.org/guide/en/#build-hooks" target="_blank" rel="noopener noreferrer">Rollup \uBE4C\uB4DC \uD6C5</a>\uC744 \uD638\uCD9C\uD558\uB294 \uD50C\uB7EC\uADF8\uC778 \uCEE8\uD14C\uC774\uB108\uB97C \uC0DD\uC131\uD569\uB2C8\uB2E4.</p><p>\uC544\uB798\uC758 \uD6C5\uC740 \uC11C\uBC84 \uC2DC\uC791 \uC2DC \uD638\uCD9C\uB429\uB2C8\uB2E4:</p><ul><li><a href="https://rollupjs.org/guide/en/#options" target="_blank" rel="noopener noreferrer"><code>options</code></a></li><li><a href="https://rollupjs.org/guide/en/#buildstart" target="_blank" rel="noopener noreferrer"><code>buildStart</code></a></li></ul><p>\uC544\uB798\uC758 \uD6C5\uC740 \uBAA8\uB4C8\uC744 \uC694\uCCAD\uD560 \uB54C\uB9C8\uB2E4 \uD638\uCD9C\uB429\uB2C8\uB2E4:</p><ul><li><a href="https://rollupjs.org/guide/en/#resolveid" target="_blank" rel="noopener noreferrer"><code>resolveId</code></a></li><li><a href="https://rollupjs.org/guide/en/#load" target="_blank" rel="noopener noreferrer"><code>load</code></a></li><li><a href="https://rollupjs.org/guide/en/#transform" target="_blank" rel="noopener noreferrer"><code>transform</code></a></li></ul><p>\uC544\uB798\uC758 \uD6C5\uC740 \uC11C\uBC84\uAC00 \uC885\uB8CC\uB420 \uB54C \uD638\uCD9C\uB429\uB2C8\uB2E4:</p><ul><li><a href="https://rollupjs.org/guide/en/#buildend" target="_blank" rel="noopener noreferrer"><code>buildEnd</code></a></li><li><a href="https://rollupjs.org/guide/en/#closebundle" target="_blank" rel="noopener noreferrer"><code>closeBundle</code></a></li></ul><p>\uCC38\uACE0\uB85C Vite\uB294 \uB354 \uD6A8\uC728\uC801\uC778 \uB3D9\uC791\uC744 \uC704\uD574 \uC804\uCCB4 \uC18C\uC2A4\uC5D0 \uB300\uD55C AST \uAD6C\uBB38 \uBD84\uC11D\uC744 \uC9C4\uD589\uD558\uC9C0 \uC54A\uAE30\uC5D0, <a href="https://rollupjs.org/guide/en/#moduleparsed" target="_blank" rel="noopener noreferrer"><code>moduleParsed</code></a> \uD6C5\uC740 <strong>\uAC1C\uBC1C \uACFC\uC815\uC5D0\uC11C \uD638\uCD9C\uB418\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4</strong>.</p><p><a href="https://rollupjs.org/guide/en/#output-generation-hooks" target="_blank" rel="noopener noreferrer">Output Generation Hooks</a> \uB610\uD55C <code>closeBundle</code>\uC744 \uC81C\uC678\uD558\uACE0 <strong>\uAC1C\uBC1C \uACFC\uC815\uC5D0\uC11C\uB294 \uD638\uCD9C\uB418\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4</strong>. Vite\uC758 \uAC1C\uBC1C \uC11C\uBC84\uAC00 <code>bundle.generate()</code>\uB97C \uD638\uCD9C\uD558\uC9C0 \uC54A\uACE0 <code>rollup.rollup()</code>\uB9CC\uC744 \uD638\uCD9C\uD55C\uB2E4\uB294 \uAC83\uC73C\uB85C \uC0DD\uAC01\uD558\uBA74 \uB429\uB2C8\uB2E4.</p><h2 id="vite-specific-hooks" tabindex="-1">Vite \uC804\uC6A9 \uD6C5 <a class="header-anchor" href="#vite-specific-hooks" aria-hidden="true">#</a></h2><p>Vite\uC758 \uD50C\uB7EC\uADF8\uC778\uC740 Vite \uC804\uC6A9 \uD6C5\uC744 \uC0AC\uC6A9\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4. \uBB3C\uB860 \uC774\uB7EC\uD55C \uD6C5\uC740 Rollup\uC5D0\uC11C \uBB34\uC2DC\uB429\uB2C8\uB2E4.</p><h3 id="config" tabindex="-1"><code>config</code> <a class="header-anchor" href="#config" aria-hidden="true">#</a></h3><ul><li><p><strong>\uD0C0\uC785:</strong> <code>(config: UserConfig, env: { mode: string, command: string }) =&gt; UserConfig | null | void</code></p></li><li><p><strong>\uC885\uB958:</strong> <code>async</code>, <code>sequential</code></p><p>\uD6C5\uC744 \uC774\uC6A9\uD574 Vite\uC758 \uC124\uC815\uC744 \uC2E4\uC81C \uC0AC\uC6A9\uD558\uAE30 \uC804 \uBCC0\uACBD\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4. <code>config</code> \uD6C5\uC73C\uB85C \uC124\uC815 \uD30C\uC77C \uB610\uB294 CLI \uC635\uC158\uC73C\uB85C \uC804\uB2EC\uBC1B\uC740 \uB85C\uC6B0 \uB808\uBCA8 \uC0AC\uC6A9\uC790 \uC124\uC815 \uAC12\uACFC, \uD604\uC7AC \uC0AC\uC6A9 \uC911\uC778 <code>mode</code> \uBC0F <code>command</code>\uAC00 \uC778\uC790\uB97C \uD1B5\uD574 \uC804\uB2EC\uB429\uB2C8\uB2E4. \uD6C5\uC740 \uAC1D\uCCB4\uB97C \uBC18\uD658\uD560 \uC218 \uC788\uC73C\uBA70, \uC774 \uB54C\uC758 \uAC1D\uCCB4\uB294 \uAE30\uC874 \uC124\uC815\uC5D0 \uB300\uD574 \uAE4A\uC740 \uBCD1\uD569(Deeply merge)\uC774 \uB429\uB2C8\uB2E4. \uB610\uB294 \uC778\uC790\uB85C \uC804\uB2EC\uBC1B\uC740 \uC124\uC815 \uAC1D\uCCB4\uB97C \uC9C1\uC811 \uC218\uC815\uD560 \uC218\uB3C4 \uC788\uC2B5\uB2C8\uB2E4. \uB2E4\uB9CC \uC774 \uBC29\uBC95\uC740 \uAC1D\uCCB4 \uBC18\uD658\uC744 \uC774\uC6A9\uD55C \uBC29\uBC95\uC73C\uB85C\uB294 \uC6D0\uD558\uB294 \uACB0\uACFC\uB97C \uC5BB\uC744 \uC218 \uC5C6\uC744 \uB54C\uB9CC \uC0AC\uC6A9\uD558\uC138\uC694.</p><p><strong>\uC608\uC81C:</strong></p><div class="language-js"><pre><code><span class="token comment">// \uC124\uC815 \uAC12 \uC77C\uBD80\uB97C \uBC18\uD658 (\uAD8C\uACE0)</span>
<span class="token keyword">const</span> <span class="token function-variable function">partialConfigPlugin</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;return-partial&#39;</span><span class="token punctuation">,</span>
  <span class="token function-variable function">config</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">alias</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token string">&#39;bar&#39;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// \uC804\uB2EC\uBC1B\uC740 \uC124\uC815 \uAC1D\uCCB4\uB97C \uC9C1\uC811 \uC218\uC815 (\uC704 \uBC29\uBC95\uC73C\uB85C \uBD88\uAC00\uB2A5\uD560 \uB54C \uC0AC\uC6A9)</span>
<span class="token keyword">const</span> <span class="token function-variable function">mutateConfigPlugin</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;mutate-config&#39;</span><span class="token punctuation">,</span>
  <span class="token function">config</span><span class="token punctuation">(</span><span class="token parameter">config<span class="token punctuation">,</span> <span class="token punctuation">{</span> command <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>command <span class="token operator">===</span> <span class="token string">&#39;build&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      config<span class="token punctuation">.</span>root <span class="token operator">=</span> __dirname
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><div class="warning custom-block"><p class="custom-block-title">\uCC38\uACE0</p><p><code>config</code> \uD6C5 \uC548\uC5D0\uC11C \uB2E4\uB978 \uD50C\uB7EC\uADF8\uC778\uC744 \uC0AC\uC6A9\uD558\uC9C0 \uB9C8\uC138\uC694. \uD50C\uB7EC\uADF8\uC778 \uC790\uCCB4\uB294 \uC774 \uD6C5\uC774 \uC2E4\uD589\uB418\uAE30 \uC804\uC5D0 \uBAA8\uB450 \uD655\uC815(Resolve)\uB418\uBA70, \uB530\uB77C\uC11C \uC544\uBB34\uB7F0 \uD6A8\uACFC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.</p></div></li></ul><h3 id="configresolved" tabindex="-1"><code>configResolved</code> <a class="header-anchor" href="#configresolved" aria-hidden="true">#</a></h3><ul><li><p><strong>\uD0C0\uC785:</strong> <code>(config: ResolvedConfig) =&gt; void | Promise&lt;void&gt;</code></p></li><li><p><strong>\uC885\uB958:</strong> <code>async</code>, <code>parallel</code></p><p>Vite \uC124\uC815 \uAC12\uC774 \uD655\uC815\uB41C \uD6C4 \uD638\uCD9C\uB418\uB294 \uD6C5\uC785\uB2C8\uB2E4. \uC774 \uD6C5\uC744 \uC0AC\uC6A9\uD558\uC5EC \uCD5C\uC885\uC801\uC73C\uB85C \uD655\uC815\uB41C \uC124\uC815 \uAC12\uC744 \uC77D\uAC70\uB098 \uC800\uC7A5\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4. \uD2B9\uD788 \uD50C\uB7EC\uADF8\uC778\uC774 \uC2E4\uD589 \uC911\uC778 \uBA85\uB839\uC5D0 \uB530\uB77C \uB2E4\uB978 \uC791\uC5C5\uC744 \uC218\uD589\uD574\uC57C \uD558\uB294 \uACBD\uC6B0 \uC720\uC6A9\uD569\uB2C8\uB2E4.</p><p><strong>\uC608\uC81C:</strong></p><div class="language-js"><pre><code><span class="token keyword">const</span> <span class="token function-variable function">examplePlugin</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> config

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;read-config&#39;</span><span class="token punctuation">,</span>

    <span class="token function">configResolved</span><span class="token punctuation">(</span><span class="token parameter">resolvedConfig</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// \uD655\uC815\uB41C \uC124\uC815 \uAC12\uC744 \uC800\uC7A5</span>
      config <span class="token operator">=</span> resolvedConfig
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// \uB2E4\uB978 \uD6C5\uC5D0\uC11C \uC800\uC7A5\uB41C \uC124\uC815 \uAC12\uC744 \uC774\uC6A9</span>
    <span class="token function">transform</span><span class="token punctuation">(</span><span class="token parameter">code<span class="token punctuation">,</span> id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>config<span class="token punctuation">.</span>command <span class="token operator">===</span> <span class="token string">&#39;serve&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// dev: \uAC1C\uBC1C \uC11C\uBC84\uC5D0\uC11C\uC758 \uD50C\uB7EC\uADF8\uC778 \uD589\uB3D9 \uC815\uC758</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// build: Rollup \uC2DC \uD50C\uB7EC\uADF8\uC778 \uD589\uB3D9 \uC815\uC758</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>\uCC38\uACE0\uB85C <code>command</code> \uAC12\uC740 \uAC1C\uBC1C \uC11C\uBC84\uC5D0\uC11C <code>serve</code> \uC785\uB2C8\uB2E4(cli\uC5D0\uC11C <code>vite</code>, <code>vite dev</code> \uBC0F <code>vite serve</code> \uBAA8\uB450 \uBCC4\uCE6D\uC785\uB2C8\uB2E4).</p></li></ul><h3 id="configureserver" tabindex="-1"><code>configureServer</code> <a class="header-anchor" href="#configureserver" aria-hidden="true">#</a></h3><ul><li><p><strong>\uD0C0\uC785:</strong> <code>(server: ViteDevServer) =&gt; (() =&gt; void) | void | Promise&lt;(() =&gt; void) | void&gt;</code></p></li><li><p><strong>\uC885\uB958:</strong> <code>async</code>, <code>sequential</code></p></li><li><p><strong>\uCC38\uACE0:</strong> <a href="./api-javascript.html#vitedevserver">ViteDevServer</a></p><p>\uAC1C\uBC1C \uC11C\uBC84\uB97C \uAD6C\uC131\uD558\uAE30 \uC704\uD55C \uD6C5\uC785\uB2C8\uB2E4. \uC77C\uBC18\uC801\uC73C\uB85C \uCEE4\uC2A4\uD140 \uBBF8\uB4E4\uC6E8\uC5B4\uB97C \uB0B4\uBD80\uC758 <a href="https://github.com/senchalabs/connect" target="_blank" rel="noopener noreferrer">connect</a> \uC571\uC5D0 \uCD94\uAC00\uD558\uAE30 \uC704\uD574 \uC0AC\uC6A9\uD569\uB2C8\uB2E4:</p><div class="language-js"><pre><code><span class="token keyword">const</span> <span class="token function-variable function">myPlugin</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;configure-server&#39;</span><span class="token punctuation">,</span>
  <span class="token function">configureServer</span><span class="token punctuation">(</span><span class="token parameter">server</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    server<span class="token punctuation">.</span>middlewares<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// \uC774 \uACF3\uC5D0\uC11C \uC6D0\uD558\uB294 \uBC29\uC2DD\uC73C\uB85C \uC694\uCCAD\uC744 \uD578\uB4E4\uB9C1 \uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>\uB0B4\uBD80 \uBBF8\uB4E4\uC6E8\uC5B4 \uC124\uCE58 \uC774\uD6C4\uC5D0 \uD638\uCD9C\uB418\uB294 \uCEE4\uC2A4\uD140 \uBBF8\uB4E4\uC6E8\uC5B4 \uAD6C\uC131\uD558\uAE30</strong></p><p><code>configureServer</code> \uD6C5\uC740 \uB0B4\uBD80\uC758 \uBBF8\uB4E4\uC6E8\uC5B4\uAC00 \uC124\uCE58\uB418\uAE30 \uC804 \uD638\uCD9C\uB429\uB2C8\uB2E4. \uB530\uB77C\uC11C \uC704\uC640 \uAC19\uC740 \uBC29\uC2DD\uC758 \uCEE4\uC2A4\uD140 \uBBF8\uB4E4\uC6E8\uC5B4\uB294 \uB0B4\uBD80\uC758 \uBBF8\uB4E4\uC6E8\uC5B4\uBCF4\uB2E4 \uBA3C\uC800 \uC2E4\uD589\uB429\uB2C8\uB2E4. \uB9CC\uC57D \uB0B4\uBD80\uC758 \uBBF8\uB4E4\uC6E8\uC5B4\uAC00 \uC124\uCE58\uB41C <strong>\uC774\uD6C4\uC5D0</strong> \uCEE4\uC2A4\uD140 \uBBF8\uB4E4\uC6E8\uC5B4\uB97C \uD638\uCD9C\uD558\uACE0\uC790 \uD55C\uB2E4\uBA74, <code>configureServer</code>\uC758 \uBC18\uD658 \uAC12\uC73C\uB85C \uD568\uC218\uB97C \uBC18\uD658\uD574\uC8FC\uC138\uC694:</p><div class="language-js"><pre><code><span class="token keyword">const</span> <span class="token function-variable function">myPlugin</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;configure-server&#39;</span><span class="token punctuation">,</span>
  <span class="token function">configureServer</span><span class="token punctuation">(</span><span class="token parameter">server</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \uB0B4\uBD80 \uBBF8\uB4E4\uC6E8\uC5B4\uAC00 \uC124\uCE58\uB41C \uD6C4 \uC2E4\uD589\uB420 \uD6C5\uC744 \uBC18\uD658\uD569\uB2C8\uB2E4</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      server<span class="token punctuation">.</span>middlewares<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// \uC774 \uACF3\uC5D0\uC11C \uC6D0\uD558\uB294 \uBC29\uC2DD\uC73C\uB85C \uC694\uCCAD\uC744 \uD578\uB4E4\uB9C1 \uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>\uC11C\uBC84 \uC778\uC2A4\uD134\uC2A4 \uC800\uC7A5\uD558\uAE30</strong></p><p>\uD50C\uB7EC\uADF8\uC778 \uD6C5\uC5D0\uC11C \uAC1C\uBC1C \uC11C\uBC84 \uC778\uC2A4\uD134\uC2A4\uAC00 \uD544\uC694\uD55C \uACBD\uC6B0\uB3C4 \uC788\uC2B5\uB2C8\uB2E4. \uAC00\uB839 \uC6F9 \uC18C\uCF13 \uC11C\uBC84\uB098, \uD30C\uC77C \uC2DC\uC2A4\uD15C \uAC10\uC2DC\uC790, \uB610\uB294 \uBAA8\uB4C8 \uB514\uD39C\uB358\uC2DC \uADF8\uB798\uD504\uC5D0 \uC811\uADFC\uD574\uC57C \uD558\uB294 \uACBD\uC6B0\uC640 \uAC19\uC774 \uB9D0\uC774\uC8E0. <code>configureServer</code> \uD6C5\uC740 \uB2E4\uB978 \uD6C5\uC5D0\uC11C \uC11C\uBC84 \uC778\uC2A4\uD134\uC2A4\uC5D0 \uC811\uADFC\uD560 \uC218 \uC788\uB3C4\uB85D \uB3C4\uC640\uC904 \uC218 \uC788\uC2B5\uB2C8\uB2E4:</p><div class="language-js"><pre><code><span class="token keyword">const</span> <span class="token function-variable function">myPlugin</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> server
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;configure-server&#39;</span><span class="token punctuation">,</span>
    <span class="token function">configureServer</span><span class="token punctuation">(</span><span class="token parameter">_server</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      server <span class="token operator">=</span> _server
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">transform</span><span class="token punctuation">(</span><span class="token parameter">code<span class="token punctuation">,</span> id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>server<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// \uC11C\uBC84 \uC778\uC2A4\uD134\uC2A4 \uC0AC\uC6A9...</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>\uCC38\uACE0\uB85C <code>configureServer</code>\uB294 \uD504\uB85C\uB355\uC158 \uBC84\uC804\uC73C\uB85C \uBE4C\uB4DC\uD560 \uB54C \uD638\uCD9C\uB418\uC9C0 \uC54A\uC73C\uBBC0\uB85C \uC704 \uC608\uC2DC\uC640 \uAC19\uC774 \uD6C5\uC774 \uC874\uC7AC\uD558\uC9C0 \uC54A\uB294 \uACBD\uC6B0\uB97C \uBD84\uAE30\uD574\uC918\uC57C \uD569\uB2C8\uB2E4.</p></li></ul><h3 id="transformindexhtml" tabindex="-1"><code>transformIndexHtml</code> <a class="header-anchor" href="#transformindexhtml" aria-hidden="true">#</a></h3><ul><li><p><strong>\uD0C0\uC785:</strong> <code>IndexHtmlTransformHook | { enforce?: &#39;pre&#39; | &#39;post&#39;, transform: IndexHtmlTransformHook }</code></p></li><li><p><strong>\uC885\uB958:</strong> <code>async</code>, <code>sequential</code></p><p><code>index.html</code> \uD30C\uC77C\uB9CC\uC744 \uBCC0\uD658\uD558\uAE30 \uC704\uD55C \uD6C5\uC785\uB2C8\uB2E4. \uD6C5\uC758 \uC778\uC790\uB85C\uB294 HTML \uBB38\uC790\uC5F4\uACFC \uCEE8\uD14D\uC2A4\uD2B8\uB97C \uC804\uB2EC\uBC1B\uC2B5\uB2C8\uB2E4. \uAC1C\uBC1C \uC11C\uBC84\uC758 \uACBD\uC6B0 \uCEE8\uD14D\uC2A4\uD2B8\uC5D0 <a href="./api-javascript.html#vitedevserver"><code>ViteDevServer</code></a> \uC778\uC2A4\uD134\uC2A4\uB97C \uD568\uAED8 \uC804\uB2EC\uD558\uBA70, \uBE4C\uB4DC \uC2DC\uC5D0\uB294 Rollup\uB41C \uBC88\uB4E4\uC744 \uC804\uB2EC\uD569\uB2C8\uB2E4.</p><p>\uD6C5\uC740 \uBE44\uB3D9\uAE30\uC801\uC73C\uB85C \uB3D9\uC791\uD560 \uC218 \uC788\uC73C\uBA70 \uB2E4\uC74C \uC911 \uD558\uB098\uB97C \uBC18\uD658\uD569\uB2C8\uB2E4:</p><ul><li>\uBCC0\uD658\uB41C HTML \uBB38\uC790\uC5F4</li><li>\uAE30\uC874 HTML\uC5D0 \uCD94\uAC00\uD560 \uD0DC\uADF8 \uC124\uBA85\uC790 \uAC1D\uCCB4(<code>{ tag, attrs, children }</code>) \uBC30\uC5F4. \uAC01 \uD0DC\uADF8\uB294 \uAE30\uBCF8\uC801\uC73C\uB85C <code>&lt;head&gt;</code> \uC55E\uC5D0 \uCD94\uAC00\uB418\uC9C0\uB9CC, \uC774 \uC704\uCE58\uB97C \uC9C0\uC815\uD560 \uC218\uB3C4 \uC788\uC2B5\uB2C8\uB2E4.</li><li><code>{ html, tags }</code> \uB458 \uB2E4 \uD3EC\uD568\uD558\uB294 \uAC1D\uCCB4</li></ul><p><strong>\uC608\uC81C:</strong></p><div class="language-js"><pre><code><span class="token keyword">const</span> <span class="token function-variable function">htmlPlugin</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;html-transform&#39;</span><span class="token punctuation">,</span>
    <span class="token function">transformIndexHtml</span><span class="token punctuation">(</span><span class="token parameter">html</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> html<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>
        <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;title&gt;(.*?)&lt;\\/title&gt;</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">&lt;title&gt;Title replaced!&lt;/title&gt;</span><span class="token template-punctuation string">\`</span></span>
      <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>\uD6C5 \uC2DC\uADF8\uB2C8\uCC98:</strong></p><div class="language-ts"><pre><code><span class="token keyword">type</span> <span class="token class-name">IndexHtmlTransformHook</span> <span class="token operator">=</span> <span class="token punctuation">(</span>
  html<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  ctx<span class="token operator">:</span> <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token builtin">string</span>
    filename<span class="token operator">:</span> <span class="token builtin">string</span>
    server<span class="token operator">?</span><span class="token operator">:</span> ViteDevServer
    bundle<span class="token operator">?</span><span class="token operator">:</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;rollup&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>OutputBundle
    chunk<span class="token operator">?</span><span class="token operator">:</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;rollup&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>OutputChunk
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  <span class="token operator">|</span> IndexHtmlTransformResult
  <span class="token operator">|</span> <span class="token keyword">void</span>
  <span class="token operator">|</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>IndexHtmlTransformResult <span class="token operator">|</span> <span class="token keyword">void</span><span class="token operator">&gt;</span>

<span class="token keyword">type</span> <span class="token class-name">IndexHtmlTransformResult</span> <span class="token operator">=</span>
  <span class="token operator">|</span> <span class="token builtin">string</span>
  <span class="token operator">|</span> HtmlTagDescriptor<span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token operator">|</span> <span class="token punctuation">{</span>
      html<span class="token operator">:</span> <span class="token builtin">string</span>
      tags<span class="token operator">:</span> HtmlTagDescriptor<span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">HtmlTagDescriptor</span> <span class="token punctuation">{</span>
  tag<span class="token operator">:</span> <span class="token builtin">string</span>
  attrs<span class="token operator">?</span><span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">boolean</span><span class="token operator">&gt;</span>
  children<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> HtmlTagDescriptor<span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token comment">/**
   * \uAE30\uBCF8\uAC12: &#39;head-prepend&#39;
   */</span>
  injectTo<span class="token operator">?</span><span class="token operator">:</span> <span class="token string">&#39;head&#39;</span> <span class="token operator">|</span> <span class="token string">&#39;body&#39;</span> <span class="token operator">|</span> <span class="token string">&#39;head-prepend&#39;</span> <span class="token operator">|</span> <span class="token string">&#39;body-prepend&#39;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul><h3 id="handlehotupdate" tabindex="-1"><code>handleHotUpdate</code> <a class="header-anchor" href="#handlehotupdate" aria-hidden="true">#</a></h3><ul><li><p><strong>\uD0C0\uC785:</strong> <code>(ctx: HmrContext) =&gt; Array&lt;ModuleNode&gt; | void | Promise&lt;Array&lt;ModuleNode&gt; | void&gt;</code></p><p>\uC0AC\uC6A9\uC790\uAC00 \uC9C0\uC815\uD55C \uBC29\uC2DD\uB300\uB85C HMR \uC5C5\uB370\uC774\uD2B8\uB97C \uC218\uD589\uD569\uB2C8\uB2E4. \uC774 \uD6C5\uC740 \uC544\uB798\uC640 \uAC19\uC740 \uCEE8\uD14D\uC2A4\uD2B8 \uAC1D\uCCB4\uB97C \uC804\uB2EC\uBC1B\uC2B5\uB2C8\uB2E4:</p><div class="language-ts"><pre><code><span class="token keyword">interface</span> <span class="token class-name">HmrContext</span> <span class="token punctuation">{</span>
  file<span class="token operator">:</span> <span class="token builtin">string</span>
  timestamp<span class="token operator">:</span> <span class="token builtin">number</span>
  modules<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span>ModuleNode<span class="token operator">&gt;</span>
  <span class="token function-variable function">read</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span>
  server<span class="token operator">:</span> ViteDevServer
<span class="token punctuation">}</span>
</code></pre></div><ul><li><p><code>modules</code>\uB294 \uBCC0\uACBD\uB41C \uD30C\uC77C\uC758 \uC601\uD5A5\uC744 \uBC1B\uB294 \uBAA8\uB4C8\uC758 \uBC30\uC5F4\uC785\uB2C8\uB2E4. Vue SFC\uC640 \uAC19\uC774 \uB2E8\uC77C \uD30C\uC77C\uC774 \uC5EC\uB7EC \uBAA8\uB4C8\uC5D0 \uB9E4\uD551\uB420 \uC218 \uC788\uAE30 \uB54C\uBB38\uC5D0 \uBC30\uC5F4 \uD615\uD0DC\uB85C \uC81C\uACF5\uB429\uB2C8\uB2E4.</p></li><li><p><code>read</code>\uB294 \uD30C\uC77C\uC744 \uC77D\uC5B4 \uADF8 \uB0B4\uC6A9\uC744 \uBC18\uD658\uD558\uB294 \uBE44\uB3D9\uAE30 \uD568\uC218\uC785\uB2C8\uB2E4. \uC77C\uBD80 \uC2DC\uC2A4\uD15C\uC5D0\uC11C \uD56B \uB9AC\uB85C\uB529 \uC2DC \uD30C\uC77C \uBCC0\uACBD \uCF5C\uBC31\uC774 \uB108\uBB34 \uC774\uB974\uAC8C \uD638\uCD9C\uB418\uC5B4 <code>fs.readFile</code>\uB85C \uBE48 \uCF58\uD150\uCE20\uAC00 \uBC18\uD658\uB420 \uC218 \uC788\uAE30\uC5D0*, \uC774 \uD568\uC218\uB97C \uD1B5\uD574 \uC815\uC0C1\uC801\uC73C\uB85C \uD30C\uC77C\uC744 \uC77D\uC744 \uC218 \uC788\uB3C4\uB85D \uC81C\uACF5\uD558\uACE0 \uC788\uC2B5\uB2C8\uB2E4. (* \uB354 \uC790\uC138\uD55C \uB0B4\uC6A9\uC740 <a href="https://github.com/vitejs/vite/blob/5a111cedf31f579e3b8c8af5c4442d2e0cd5aa12/packages/vite/src/node/server/hmr.ts#L443" target="_blank" rel="noopener noreferrer">hmr.ts</a> \uD30C\uC77C\uC744 \uCC38\uACE0\uD574\uC8FC\uC138\uC694)</p></li></ul><p>\uC774 \uD6C5\uC740 \uB2E4\uC74C\uACFC \uAC19\uC740 \uB3D9\uC791\uC744 \uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4:</p><ul><li><p>\uC601\uD5A5\uC744 \uBC1B\uB294 \uBAA8\uB4C8 \uBAA9\uB85D\uC744 \uD544\uD130\uB9C1\uD558\uACE0 \uBC94\uC704\uB97C \uC881\uD600 \uB354 \uC815\uD655\uD558\uAC8C HMR\uC774 \uB3D9\uC791\uD558\uB3C4\uB85D \uAD6C\uC131\uD569\uB2C8\uB2E4.</p></li><li><p>\uC0AC\uC6A9\uC790\uAC00 \uC9C1\uC811 HMR \uCC98\uB9AC\uB97C \uC218\uD589\uD558\uB3C4\uB85D \uBE48 \uBC30\uC5F4\uC744 \uBC18\uD658\uD558\uACE0 \uCEE4\uC2A4\uD140 \uC774\uBCA4\uD2B8\uB97C \uD638\uCD9C\uD569\uB2C8\uB2E4:</p><div class="language-js"><pre><code><span class="token function">handleHotUpdate</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> server <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  server<span class="token punctuation">.</span>ws<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;custom&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">event</span><span class="token operator">:</span> <span class="token string">&#39;special-update&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>\uC704\uC758 \uCEE4\uC2A4\uD140 \uC774\uBCA4\uD2B8\uB294 <a href="./api-hmr.html">HMR API</a>\uB97C \uC0AC\uC6A9\uD558\uC5EC \uD578\uB4E4\uB7EC\uB97C \uB4F1\uB85D\uD574\uC57C \uD569\uB2C8\uB2E4(\uC774\uB294 \uB3D9\uC77C\uD55C \uD50C\uB7EC\uADF8\uC778\uC758 <code>transform</code> \uD6C5\uC5D0 \uC8FC\uC785\uB420 \uC218 \uC788\uC2B5\uB2C8\uB2E4):</p><div class="language-js"><pre><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>hot<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;special-update&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// \uCEE4\uC2A4\uD140 \uC5C5\uB370\uC774\uD2B8 \uC218\uD589</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul></li></ul><h2 id="plugin-ordering" tabindex="-1">\uD50C\uB7EC\uADF8\uC778 \uC21C\uC11C <a class="header-anchor" href="#plugin-ordering" aria-hidden="true">#</a></h2><p>Vite \uD50C\uB7EC\uADF8\uC778\uC740 Webpack \uB85C\uB354\uC640 \uC720\uC0AC\uD55C <code>enforce</code> \uD504\uB85C\uD37C\uD2F0\uB97C \uCD94\uAC00\uC801\uC73C\uB85C \uC9C0\uC815\uD558\uC5EC \uD50C\uB7EC\uADF8\uC778 \uC560\uD50C\uB9AC\uCF00\uC774\uC158\uC758 \uC21C\uC11C\uB97C \uC870\uC815\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4. <code>enforce</code> \uAC12\uC740 <code>&quot;pre&quot;</code> \uB610\uB294 <code>&quot;post&quot;</code>\uB85C \uC9C0\uC815\uD560 \uC218 \uC788\uC73C\uBA70, \uC774\uB97C \uD1B5\uD574 \uC9C0\uC815\uB418\uB294 \uD50C\uB7EC\uADF8\uC778 \uC21C\uC11C\uB294 \uB2E4\uC74C\uACFC \uAC19\uC2B5\uB2C8\uB2E4:</p><ul><li>\uBCC4\uCE6D</li><li><code>enforce: &#39;pre&#39;</code>\uB85C \uC9C0\uC815\uB41C \uD50C\uB7EC\uADF8\uC778</li><li>Vite \uCF54\uC5B4 \uD50C\uB7EC\uADF8\uC778</li><li>enforce \uAC12\uC774 \uC874\uC7AC\uD558\uC9C0 \uC54A\uB294 \uD50C\uB7EC\uADF8\uC778</li><li>Vite \uBE4C\uB4DC \uD50C\uB7EC\uADF8\uC778</li><li><code>enforce: &#39;post&#39;</code>\uB85C \uC9C0\uC815\uB41C \uD50C\uB7EC\uADF8\uC778</li><li>\uBE4C\uB4DC \uD6C4 \uC2E4\uD589\uB418\uB294 Vite\uC758 \uD50C\uB7EC\uADF8\uC778 (minify, manifest, reporting)</li></ul><h2 id="conditional-application" tabindex="-1">\uC870\uAC74\uBD80 \uC560\uD50C\uB9AC\uCF00\uC774\uC158 <a class="header-anchor" href="#conditional-application" aria-hidden="true">#</a></h2><p>\uAE30\uBCF8\uC801\uC73C\uB85C \uD50C\uB7EC\uADF8\uC778\uC740 \uAC1C\uBC1C \uC11C\uBC84 \uBC0F \uBE4C\uB4DC \uC2DC \uBAA8\uB450 \uD638\uCD9C\uB429\uB2C8\uB2E4. \uB9CC\uC57D \uD50C\uB7EC\uADF8\uC778\uC774 \uAC1C\uBC1C \uC870\uAC74\uBD80\uB85C \uD638\uCD9C\uB418\uC5B4\uC57C \uD558\uB294 \uACBD\uC6B0, <code>apply</code> \uD504\uB85C\uD37C\uD2F0\uB97C \uC0AC\uC6A9\uD558\uC5EC <code>&#39;build&#39;</code> \uB610\uB294 <code>&#39;serve&#39;</code> \uC911\uC5D0\uB9CC \uD50C\uB7EC\uADF8\uC778\uC774 \uD638\uCD9C\uB418\uB3C4\uB85D \uAD6C\uC131\uD574\uC8FC\uC138\uC694:</p><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">myPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;build-only&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">apply</span><span class="token operator">:</span> <span class="token string">&#39;build&#39;</span> <span class="token comment">// \uB610\uB294 &#39;serve&#39;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>\uBCF4\uB2E4 \uC815\uD655\uD55C \uC81C\uC5B4\uB97C \uC704\uD574 \uD568\uC218\uB97C \uC0AC\uC6A9\uD560 \uC218\uB3C4 \uC788\uC2B5\uB2C8\uB2E4:</p><div class="language-js"><pre><code><span class="token function">apply</span><span class="token punctuation">(</span><span class="token parameter">config<span class="token punctuation">,</span> <span class="token punctuation">{</span> command <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// \uBE4C\uB4DC \uC2DC \uC801\uC6A9\uB418\uC9C0\uB9CC SSR\uC5D0\uB294 \uC801\uC6A9\uB418\uC9C0 \uC54A\uB294 \uD50C\uB7EC\uADF8\uC778</span>
  <span class="token keyword">return</span> command <span class="token operator">===</span> <span class="token string">&#39;build&#39;</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>config<span class="token punctuation">.</span>build<span class="token punctuation">.</span>ssr
<span class="token punctuation">}</span>
</code></pre></div><h2 id="rollup-plugin-compatibility" tabindex="-1">Rollup \uD50C\uB7EC\uADF8\uC778 \uD638\uD658\uC131 <a class="header-anchor" href="#rollup-plugin-compatibility" aria-hidden="true">#</a></h2><p>A fair number of Rollup plugins will work directly as a Vite plugin (e.g. <code>@rollup/plugin-alias</code> or <code>@rollup/plugin-json</code>), but not all of them, since some plugin hooks do not make sense in an unbundled dev server context.</p><p><code>@rollup/plugin-alias</code> \uB610\uB294 <code>@rollup/plugin-json</code>\uACFC \uAC19\uC774 \uC0C1\uB2F9\uD55C \uC218\uC758 Rollup \uD50C\uB7EC\uADF8\uC778\uC774 Vite \uD50C\uB7EC\uADF8\uC778\uC73C\uB85C\uB3C4 \uC0AC\uC6A9\uB420 \uC218 \uC788\uC73C\uB098, \uC77C\uBD80 Rollup \uD50C\uB7EC\uADF8\uC778 \uD6C5\uC758 \uACBD\uC6B0 \uBC88\uB4E4\uB418\uC9C0 \uC54A\uC740 \uAC1C\uBC1C \uC11C\uBC84\uC5D0\uC11C\uB294 \uC758\uBBF8\uAC00 \uC5C6\uAE30\uC5D0 \uC804\uBD80 Vite \uD50C\uB7EC\uADF8\uC778\uC73C\uB85C \uC0AC\uC6A9\uD560 \uC218 \uC788\uC9C0\uB294 \uC54A\uC2B5\uB2C8\uB2E4.</p><p>\uC77C\uBC18\uC801\uC73C\uB85C, Rollup \uD50C\uB7EC\uADF8\uC778\uC774 \uB2E4\uC74C \uAE30\uC900\uC5D0 \uBD80\uD569\uD55C\uB2E4\uBA74 Vite \uD50C\uB7EC\uADF8\uC778\uC73C\uB85C\uB3C4 \uC0AC\uC6A9\uC774 \uAC00\uB2A5\uD569\uB2C8\uB2E4:</p><ul><li><a href="https://rollupjs.org/guide/en/#moduleparsed" target="_blank" rel="noopener noreferrer"><code>moduleParsed</code></a> \uD6C5\uC744 \uC0AC\uC6A9\uD558\uC9C0 \uC54A\uC74C</li><li>\uBC88\uB4E4 \uB2E8\uACC4\uC758 \uD6C5\uACFC \uBC88\uB4E4\uB9C1 \uC774\uD6C4 \uCD9C\uB825 \uB2E8\uACC4\uC758 \uD6C5 \uC0AC\uC774\uC5D0 \uAC15\uB825\uD55C \uACB0\uD569\uC774 \uC5C6\uC74C</li></ul><p>\uB9CC\uC57D Rollup \uD50C\uB7EC\uADF8\uC778\uC774 \uBE4C\uB4DC \uB2E8\uACC4\uC5D0\uC11C\uB9CC \uC758\uBBF8\uAC00 \uC788\uB294 \uACBD\uC6B0\uB77C\uBA74, <code>build.rollupOptions.plugins</code> \uC635\uC158\uC5D0 \uD574\uB2F9 \uD50C\uB7EC\uADF8\uC778\uC744 \uC0AC\uC6A9\uD558\uB3C4\uB85D \uC9C0\uC815\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.</p><p>\uBB3C\uB860 Vite \uC804\uC6A9 \uD504\uB85C\uD37C\uD2F0\uB85C \uAE30\uC874 Rollup \uD50C\uB7EC\uADF8\uC778\uC744 \uBCF4\uAC15\uD560 \uC218\uB3C4 \uC788\uC2B5\uB2C8\uB2E4:</p><div class="language-js"><pre><code><span class="token comment">// vite.config.js</span>
<span class="token keyword">import</span> example <span class="token keyword">from</span> <span class="token string">&#39;rollup-plugin-example&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vite&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token operator">...</span><span class="token function">example</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token literal-property property">enforce</span><span class="token operator">:</span> <span class="token string">&#39;post&#39;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">apply</span><span class="token operator">:</span> <span class="token string">&#39;build&#39;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>\uD638\uD658\uB418\uB294 \uACF5\uC2DD Rollup \uD50C\uB7EC\uADF8\uC778 \uBAA9\uB85D \uBC0F \uC0AC\uC6A9 \uBC29\uBC95\uC740 <a href="https://vite-rollup-plugins.patak.dev" target="_blank" rel="noopener noreferrer">Vite Rollup Plugins</a>\uB97C \uD655\uC778\uD574\uC8FC\uC138\uC694.</p><h2 id="path-normalization" tabindex="-1">\uACBD\uB85C \uC815\uADDC\uD654 <a class="header-anchor" href="#path-normalization" aria-hidden="true">#</a></h2><p>Vite\uB294 Windows\uC5D0\uC11C\uB3C4 POSIX \uAD6C\uBD84 \uAE30\uD638( / )\uB97C \uC0AC\uC6A9\uD560 \uC218 \uC788\uB3C4\uB85D \uD30C\uC77C\uC758 ID\uB97C \uD655\uC778\uD560 \uB54C \uACBD\uB85C\uB97C \uAC19\uC774 \uC815\uADDC\uD654\uD569\uB2C8\uB2E4. \uBC18\uBA74 Rollup\uC740 \uAE30\uBCF8\uC801\uC73C\uB85C \uD30C\uC77C\uC758 \uACBD\uB85C\uB97C \uADF8\uB300\uB85C \uC720\uC9C0\uD558\uAE30\uC5D0, Windows\uC5D0\uC11C \uD30C\uC77C\uC758 ID\uB294 win32 \uAD6C\uBD84 \uAE30\uD638( \\ )\uB97C \uD3EC\uD568\uD558\uACE0 \uC788\uC2B5\uB2C8\uB2E4. \uB530\uB77C\uC11C Rollup \uD50C\uB7EC\uADF8\uC778\uC740 \uC774 \uAD6C\uBD84 \uAE30\uD638\uB97C POSIX\uB85C \uBCC0\uD658\uD558\uB294 <code>@rollup/pluginutils</code>\uC758 <a href="https://github.com/rollup/plugins/tree/master/packages/pluginutils#normalizepath" target="_blank" rel="noopener noreferrer"><code>normalizePath</code> \uC720\uD2F8\uB9AC\uD2F0 \uD568\uC218</a>\uB97C \uC0AC\uC6A9\uD569\uB2C8\uB2E4. \uC774 \uB355\uBD84\uC5D0 Rollup \uD50C\uB7EC\uADF8\uC778\uC774 Vite\uC5D0\uC11C \uC0AC\uC6A9\uB420 \uB54C\uB3C4 \uD30C\uC77C\uC758 ID\uC5D0 \uB300\uD55C <code>include</code> \uBC0F <code>exclude</code> \uD328\uD134 \uBC0F \uC774\uC640 \uC720\uC0AC\uD55C \uACBD\uB85C \uAD00\uB828 \uC791\uC5C5\uC774 \uC62C\uBC14\uB974\uAC8C \uB3D9\uC791\uD560 \uC218 \uC788\uAC8C \uB429\uB2C8\uB2E4.</p><p>\uB530\uB77C\uC11C \uB9CC\uC57D \uC0C8\uB85C\uC774 Vite \uD50C\uB7EC\uADF8\uC778\uC744 \uC791\uC131\uD558\uB294 \uACBD\uC6B0, \uD30C\uC77C\uC758 ID\uC640 \uC2E4\uC81C \uACBD\uB85C\uB97C \uBE44\uAD50\uD560 \uB54C \uBA3C\uC800 POSIX \uAD6C\uBD84 \uAE30\uD638\uB97C \uC0AC\uC6A9\uD558\uB3C4\uB85D \uACBD\uB85C\uB97C \uC815\uADDC\uD654\uD574\uC918\uC57C \uD569\uB2C8\uB2E4. \uC774\uB294 <code>vite</code> \uBAA8\uB4C8\uC758 <code>normalizePath</code> \uC720\uD2F8\uB9AC\uD2F0 \uD568\uC218\uB97C \uC774\uC6A9\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.</p><div class="language-js"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> normalizePath <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vite&#39;</span>

<span class="token function">normalizePath</span><span class="token punctuation">(</span><span class="token string">&#39;foo\\\\bar&#39;</span><span class="token punctuation">)</span> <span class="token comment">// &#39;foo/bar&#39;</span>
<span class="token function">normalizePath</span><span class="token punctuation">(</span><span class="token string">&#39;foo/bar&#39;</span><span class="token punctuation">)</span> <span class="token comment">// &#39;foo/bar&#39;</span>
</code></pre></div>`,79),c=[o];function l(r,i,u,k,d,g){return a(),s("div",null,c)}var h=n(e,[["render",l]]);export{m as __pageData,h as default};
