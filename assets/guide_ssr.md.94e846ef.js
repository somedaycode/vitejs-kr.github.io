import{_ as n,c as s,o as a,d as e}from"./app.4812af81.js";const m='{"title":"\uC11C\uBC84 \uCE21 \uB80C\uB354\uB9C1 (SSR)","description":"","frontmatter":{"title":"\uC11C\uBC84 \uCE21 \uB80C\uB354\uB9C1 (SSR)"},"headers":[{"level":2,"title":"\uC608\uC81C \uD504\uB85C\uC81D\uD2B8","slug":"example-projects"},{"level":2,"title":"\uD504\uB85C\uC81D\uD2B8 \uAD6C\uC870","slug":"source-structure"},{"level":2,"title":"\uC870\uAC74\uBD80 \uB17C\uB9AC","slug":"conditional-logic"},{"level":2,"title":"\uAC1C\uBC1C \uC11C\uBC84 \uAD6C\uC131\uD558\uAE30","slug":"setting-up-the-dev-server"},{"level":2,"title":"\uD504\uB85C\uB355\uC158\uC744 \uC704\uD574 \uBE4C\uB4DC\uD558\uAE30","slug":"building-for-production"},{"level":2,"title":"\uC0AC\uC804 \uB85C\uB4DC\uB420 \uC9C0\uC2DC\uBB38 \uC0DD\uC131\uD558\uAE30","slug":"generating-preload-directives"},{"level":2,"title":"\uC0AC\uC804 \uB80C\uB354\uB9C1 / SSG","slug":"pre-rendering-ssg"},{"level":2,"title":"SSR \uC678\uBD80\uD654","slug":"ssr-externals"},{"level":2,"title":"SSR \uC804\uC6A9 \uD50C\uB7EC\uADF8\uC778 \uB85C\uC9C1","slug":"ssr-specific-plugin-logic"},{"level":2,"title":"SSR \uD0C0\uAC9F","slug":"ssr-target"},{"level":2,"title":"SSR \uBC88\uB4E4","slug":"ssr-bundle"}],"relativePath":"guide/ssr.md","lastUpdated":1641481896199}',t={},p=e(`<h1 id="server-side-rendering" tabindex="-1">\uC11C\uBC84 \uCE21 \uB80C\uB354\uB9C1 (SSR) <a class="header-anchor" href="#server-side-rendering" aria-hidden="true">#</a></h1><div class="warning custom-block"><p class="custom-block-title">\uC2E4\uD5D8\uC801\uC778 \uAE30\uB2A5</p><p>SSR\uC740 \uD604\uC7AC \uC2E4\uD5D8\uC801\uC778 \uAE30\uB2A5\uC774\uBA70 \uBC84\uADF8\uAC00 \uC788\uAC70\uB098 \uC9C0\uC6D0\uD558\uC9C0 \uC54A\uB294 \uC0AC\uB840\uAC00 \uBC1C\uC0DD\uB420 \uC218 \uC788\uC2B5\uB2C8\uB2E4. \uC790\uC2E0\uC758 \uCC45\uC784 \uC544\uB798 \uC9C4\uD589\uD558\uC2DC\uAE30 \uBC14\uB78D\uB2C8\uB2E4.</p></div><div class="tip custom-block"><p class="custom-block-title">Note</p><p>SSR\uC740 \uB3D9\uC77C\uD55C \uC804\uCCB4 \uC0AC\uC774\uD2B8\uB97C Node.js\uC5D0\uC11C \uB3D9\uC791\uC2DC\uD0A4\uACE0, \uC774\uB97C HTML\uB85C \uC0AC\uC804 \uB80C\uB354\uB9C1 \uD55C \uD6C4, \uB9C8\uC9C0\uB9C9\uC73C\uB85C \uC774\uB97C \uD074\uB77C\uC774\uC5B8\uD2B8\uC758 \uD504\uB7F0\uD2B8\uC5D4\uB4DC \uD504\uB808\uC784\uC6CC\uD06C(\uAC00\uB839 React, Preact, Vue \uBC0F Svelte\uC640 \uAC19\uC740)\uC5D0\uC11C \uAC00\uC838\uC624\uB3C4\uB85D \uD558\uB294 \uAE30\uB2A5\uC785\uB2C8\uB2E4. \uB9CC\uC57D \uAE30\uC874\uC5D0 \uC0AC\uC6A9\uD558\uACE0 \uC788\uC5C8\uB358 \uC11C\uBC84 \uC0AC\uC774\uB4DC \uD504\uB808\uC784\uC6CC\uD06C\uC640\uC758 \uC5F0\uB3D9\uC744 \uC6D0\uD55C\uB2E4\uBA74 <a href="./backend-integration.html">\uBC31\uC5D4\uB4DC \uD504\uB808\uC784\uC6CC\uD06C\uC640 \uD568\uAED8 \uC0AC\uC6A9\uD558\uAE30</a>\uB97C \uCC38\uACE0\uD558\uC2DC\uAE30 \uBC14\uB78D\uB2C8\uB2E4.</p><p>\uB610\uD55C, \uC544\uB798\uC758 \uAC00\uC774\uB4DC\uB294 \uC120\uD0DD\uD55C \uD504\uB808\uC784\uC6CC\uD06C\uC5D0\uC11C SSR\uC744 \uC801\uC6A9\uD574 \uBCF4\uC558\uB2E4\uACE0 \uAC00\uC815\uD558\uBA70, Vite\uC5D0\uC11C\uB294 \uC774\uB97C \uC5B4\uB5BB\uAC8C \uC801\uC6A9\uD560 \uC218 \uC788\uB294\uC9C0\uC5D0 \uB300\uD55C \uC138\uBD80 \uC815\uBCF4\uC5D0\uB9CC \uCD08\uC810\uC744 \uB9DE\uCD94\uC5C8\uC2B5\uB2C8\uB2E4.</p></div><div class="warning custom-block"><p class="custom-block-title">Low-level API</p><p>\uC774 \uB0B4\uC6A9\uC740 \uB77C\uC774\uBE0C\uB7EC\uB9AC \uBC0F \uD504\uB808\uC784\uC6CC\uD06C \uAC1C\uBC1C\uC790\uB4E4\uC744 \uC704\uD55C \uC800\uC218\uC900 API \uC785\uB2C8\uB2E4. \uB9CC\uC57D \uC77C\uBC18\uC801\uC778 \uC560\uD50C\uB9AC\uCF00\uC774\uC158\uC744 \uB9CC\uB4DC\uB294 \uAC83\uC774 \uBAA9\uC801\uC774\uB77C\uBA74, \uBA3C\uC800 <a href="https://github.com/vitejs/awesome-vite#ssr" target="_blank" rel="noopener noreferrer">Awesome Vite SSR</a>\uC5D0\uC11C SSR \uD50C\uB7EC\uADF8\uC778\uACFC \uAD00\uB828 \uD234\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694. Vite\uC758 \uC800\uC218\uC900\uC758 \uB124\uC774\uD2F0\uBE0C API \uAE30\uBC18\uC73C\uB85C \uB9CE\uC740 \uC218\uC758 \uD504\uB85C\uC81D\uD2B8\uB4E4\uC774 \uC131\uACF5\uC801\uC73C\uB85C \uAD6C\uCD95\uB418\uC5B4 \uC788\uC2B5\uB2C8\uB2E4.</p></div><div class="tip custom-block"><p class="custom-block-title">Help</p><p>\uB9CC\uC57D \uC9C8\uBB38\uD558\uACE0\uC790 \uD55C\uB2E4\uBA74, <a href="https://discord.gg/PkbxgzPhJv" target="_blank" rel="noopener noreferrer">Vite Discord\uC758 #ssr \uCC44\uB110</a>\uC744 \uBC29\uBB38\uD574\uC8FC\uC138\uC694.</p></div><h2 id="example-projects" tabindex="-1">\uC608\uC81C \uD504\uB85C\uC81D\uD2B8 <a class="header-anchor" href="#example-projects" aria-hidden="true">#</a></h2><p>Vite\uB294 \uC11C\uBC84 \uCE21 \uB80C\uB354\uB9C1(SSR, Server-side Rendering)\uC744 \uAE30\uBCF8\uC801\uC73C\uB85C \uC9C0\uC6D0\uD569\uB2C8\uB2E4. Vite \uD50C\uB808\uC774\uADF8\uB77C\uC6B4\uB4DC\uC5D0\uC11C\uB294 SSR \uC124\uC815\uC5D0 \uB300\uD55C Vue 3 \uBC0F React \uC608\uC81C\uB97C \uC81C\uACF5\uD558\uACE0 \uC788\uC73C\uBA70, \uC774\uB97C \uCC38\uACE0\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.</p><ul><li><a href="https://github.com/vitejs/vite/tree/main/packages/playground/ssr-vue" target="_blank" rel="noopener noreferrer">Vue 3</a></li><li><a href="https://github.com/vitejs/vite/tree/main/packages/playground/ssr-react" target="_blank" rel="noopener noreferrer">React</a></li></ul><h2 id="source-structure" tabindex="-1">\uD504\uB85C\uC81D\uD2B8 \uAD6C\uC870 <a class="header-anchor" href="#source-structure" aria-hidden="true">#</a></h2><p>\uC77C\uBC18\uC801\uC73C\uB85C SSR \uC560\uD50C\uB9AC\uCF00\uC774\uC158\uC758 \uD504\uB85C\uC81D\uD2B8 \uAD6C\uC870\uB294 \uB2E4\uC74C\uACFC \uAC19\uC2B5\uB2C8\uB2E4:</p><div class="language-"><pre><code>- index.html
- server.js # main application server
- src/
  - main.js          # \uD658\uACBD\uC5D0 \uAD6C\uC560\uBC1B\uC9C0 \uC54A\uB294(Env-agnostic) \uBC94\uC6A9 \uC571 \uCF54\uB4DC\uB85C \uB0B4\uBCF4\uB0B4\uB294(Export) \uC2A4\uD06C\uB9BD\uD2B8
  - entry-client.js  # \uC571\uC744 DOM \uC5D8\uB9AC\uBA3C\uD2B8\uC5D0 \uB9C8\uC6B4\uD2B8\uD558\uB294 \uC2A4\uD06C\uB9BD\uD2B8
  - entry-server.js  # \uD504\uB808\uC784\uC6CC\uD06C\uC758 SSR API\uB97C \uC0AC\uC6A9\uD574 \uC571\uC744 \uB80C\uB354\uB9C1\uD558\uB294 \uC2A4\uD06C\uB9BD\uD2B8
</code></pre></div><p><code>index.html</code>\uC740 <code>entry-client.js</code>\uB97C \uBC18\uB4DC\uC2DC \uCC38\uC870\uD574\uC57C \uD558\uBA70, \uC11C\uBC84\uC5D0\uC11C \uB80C\uB354\uB9C1\uB41C \uD398\uC774\uC9C0\uB97C \uC0BD\uC785\uD574\uC57C \uD558\uB294 \uC790\uB9AC \uD45C\uC2DC\uC790(Placeholder)\uB97C \uD3EC\uD568\uD574\uC57C \uD569\uB2C8\uB2E4:</p><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!--ssr-outlet--&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>module<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/src/entry-client.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>\uC815\uD655\uD558\uAC8C \uBC14\uAFC0 \uC218 \uC788\uB2E4\uACE0 \uD310\uB2E8\uB41C\uB2E4\uBA74, <code>&lt;!--ssr-outlet--&gt;</code> \uB300\uC2E0 \uC6D0\uD558\uB294 \uC790\uB9AC \uD45C\uC2DC\uC790\uB97C \uC0AC\uC6A9\uD560 \uC218\uB3C4 \uC788\uC2B5\uB2C8\uB2E4.</p><h2 id="conditional-logic" tabindex="-1">\uC870\uAC74\uBD80 \uB17C\uB9AC <a class="header-anchor" href="#conditional-logic" aria-hidden="true">#</a></h2><p>\uB9CC\uC57D SSR \uB610\uB294 CSR(\uD074\uB77C\uC774\uC5B8\uD2B8 \uCE21 \uB80C\uB354\uB9C1, Client-side Rendering) \uC5EC\uBD80\uC5D0 \uB530\uB77C \uB2E4\uB978 \uCF54\uB4DC\uB97C \uC2E4\uD589\uD558\uACE0\uC790 \uD558\uB294 \uACBD\uC6B0, \uC544\uB798\uC640 \uAC19\uC774 \uC870\uAC74\uBD80 \uB17C\uB9AC \uCF54\uB4DC\uB97C \uC0AC\uC6A9\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4:</p><div class="language-js"><pre><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">SSR</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ... SSR \uC5D0\uC11C\uB9CC \uC791\uB3D9\uD558\uB294 \uCF54\uB4DC</span>
<span class="token punctuation">}</span>
</code></pre></div><p>\uC774\uB7EC\uD55C \uCF54\uB4DC\uB294 \uBE4C\uB4DC \uC911\uC5D0 \uC815\uC801\uC73C\uB85C \uB300\uCCB4\uB418\uAE30\uC5D0, \uC0AC\uC6A9\uD558\uC9C0 \uC54A\uB294 \uBD84\uAE30\uBB38\uC5D0 \uB300\uD574\uC11C\uB294 \uD2B8\uB9AC-\uC250\uC774\uD0B9*\uC744 \uC801\uC6A9\uD569\uB2C8\uB2E4. (* \uD2B8\uB9AC-\uC250\uC774\uD0B9: Tree-shaking, \uC0AC\uC6A9\uD558\uC9C0 \uC54A\uB294 \uCF54\uB4DC\uB97C \uC81C\uAC70\uD558\uB294 \uAE30\uBC95 / <a href="https://webpack.js.org/guides/tree-shaking/" target="_blank" rel="noopener noreferrer">\uCC38\uACE0</a>)</p><h2 id="setting-up-the-dev-server" tabindex="-1">\uAC1C\uBC1C \uC11C\uBC84 \uAD6C\uC131\uD558\uAE30 <a class="header-anchor" href="#setting-up-the-dev-server" aria-hidden="true">#</a></h2><p>SSR \uC571\uC744 \uBE4C\uB4DC\uD560 \uB54C, \uBA54\uC778 \uC11C\uBC84\uB97C \uC644\uC804\uD788 \uC81C\uC5B4\uD558\uACE0 Vite\uB97C \uD504\uB85C\uB355\uC158 \uD658\uACBD\uC5D0\uC11C \uBD84\uB9AC\uD558\uACE0\uC790 \uD55C\uB2E4\uBA74 \uC5B4\uB5BB\uAC8C \uD574\uC57C \uD560\uAE4C\uC694? \uAC00\uC7A5 \uC88B\uC740 \uBC29\uBC95\uC740, Vite\uB97C \uBBF8\uB4E4\uC6E8\uC5B4 \uBAA8\uB4DC\uB85C \uC0AC\uC6A9\uD558\uB294 \uAC83\uC785\uB2C8\uB2E4. \uAC00\uB839 <a href="https://expressjs.com/" target="_blank" rel="noopener noreferrer">Express</a>\uB97C \uC608\uB85C \uB4E4\uC790\uBA74:</p><p><strong>server.js</strong></p><div class="language-js"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted">\xA0</div><div class="highlighted">\xA0</div><div class="highlighted">\xA0</div><br><br><br><br><br><br><br><br><br></div><pre><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;fs&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;express&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> createServer<span class="token operator">:</span> createViteServer <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;vite&#39;</span><span class="token punctuation">)</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token comment">// \uBBF8\uB4E4\uC6E8\uC5B4 \uBAA8\uB4DC\uB85C Vite \uC11C\uBC84\uB97C \uC0DD\uC131\uD569\uB2C8\uB2E4.</span>
  <span class="token comment">// \uC774\uB294 Vite\uC758 \uC790\uCCB4\uC801\uC778 HTML \uC81C\uACF5 \uB85C\uC9C1\uC744 \uBE44\uD65C\uC131\uD654\uD558\uACE0, \uC0C1\uC704 \uC11C\uBC84\uAC00 \uC81C\uC5B4\uD558\uB3C4\uB85D \uD569\uB2C8\uB2E4.</span>
  <span class="token comment">//</span>
  <span class="token comment">// \uBBF8\uB4E4\uC6E8\uC5B4 \uBAA8\uB4DC\uC5D0\uC11C Vite\uC758 \uC790\uCCB4\uC801\uC778 HTML \uC81C\uACF5 \uB85C\uC9C1\uC744 \uC0AC\uC6A9\uD558\uACE0\uC790 \uD55C\uB2E4\uBA74,</span>
  <span class="token comment">// \`middlewareMode\`(https://vitejs-kr.github.io/config/#server-middlewaremode)\uB97C \`&#39;html&#39;\`\uB85C \uC124\uC815\uD558\uC138\uC694.</span>
  <span class="token keyword">const</span> vite <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">createViteServer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    server<span class="token operator">:</span> <span class="token punctuation">{</span> middlewareMode<span class="token operator">:</span> <span class="token string">&#39;ssr&#39;</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token comment">// Vite\uB97C \uBBF8\uB4E4\uC6E8\uC5B4\uB85C \uC0AC\uC6A9\uD569\uB2C8\uB2E4.</span>
  app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>vite<span class="token punctuation">.</span>middlewares<span class="token punctuation">)</span>

  app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">&#39;*&#39;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// index.html \uD30C\uC77C\uC744 \uC81C\uACF5\uD569\uB2C8\uB2E4 - \uC544\uB798\uC5D0\uC11C \uC774\uB97C \uB2E4\uB8F0 \uC608\uC815\uC785\uB2C8\uB2E4.</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>\uC5EC\uAE30\uC11C\uC758 <code>vite</code>\uB294 <a href="./api-javascript.html#vitedevserver">ViteDevServer</a>\uC758 \uC778\uC2A4\uD134\uC2A4\uC785\uB2C8\uB2E4. <code>vite.middlewares</code>\uB294 <a href="https://github.com/senchalabs/connect" target="_blank" rel="noopener noreferrer">Connect</a> \uC778\uC2A4\uD134\uC2A4\uC774\uBA70, <code>Connect</code>\uB294 \uBBF8\uB4E4\uC6E8\uC5B4\uB85C \uC54C\uB824\uC9C4 \uD50C\uB7EC\uADF8\uC778\uC744 \uC0AC\uC6A9\uD558\uB294 Node.js\uC6A9 HTTP \uC11C\uBC84 \uD504\uB808\uC784\uC6CC\uD06C\uC785\uB2C8\uB2E4.</p><p>\uB2E4\uC74C \uB2E8\uACC4\uB294 \uC11C\uBC84\uC5D0\uC11C \uB80C\uB354\uB9C1\uB41C HTML\uC744 \uC81C\uACF5\uD558\uAE30 \uC704\uD574 <code>*</code> \uD578\uB4E4\uB7EC\uB97C \uAD6C\uD604\uD558\uB294 \uAC83\uC785\uB2C8\uB2E4:</p><div class="language-js"><pre><code>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">&#39;*&#39;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> url <span class="token operator">=</span> req<span class="token punctuation">.</span>originalUrl

  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1. index.html \uD30C\uC77C\uC744 \uC77D\uC5B4\uB4E4\uC785\uB2C8\uB2E4.</span>
    <span class="token keyword">let</span> template <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>
      path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;index.html&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token string">&#39;utf-8&#39;</span>
    <span class="token punctuation">)</span>

    <span class="token comment">// 2. Vite\uC758 HTML \uBCC0\uD658 \uC791\uC5C5\uC744 \uD1B5\uD574 Vite HMR \uD074\uB77C\uC774\uC5B8\uD2B8\uB97C \uC8FC\uC785\uD558\uACE0,</span>
    <span class="token comment">//    Vite \uD50C\uB7EC\uADF8\uC778\uC758 HTML \uBCC0\uD658\uB3C4 \uC801\uC6A9\uD569\uB2C8\uB2E4.</span>
    <span class="token comment">//    (\uC608\uC2DC: @vitejs/plugin-react\uC758 Global Preambles)</span>
    template <span class="token operator">=</span> <span class="token keyword">await</span> vite<span class="token punctuation">.</span><span class="token function">transformIndexHtml</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> template<span class="token punctuation">)</span>

    <span class="token comment">// 3. \uC11C\uBC84\uC758 \uC9C4\uC785\uC810(Entry)\uC744 \uB85C\uB4DC\uD569\uB2C8\uB2E4.</span>
    <span class="token comment">//    vite.ssrLoadModule\uC740 Node.js\uC5D0\uC11C \uC0AC\uC6A9\uD560 \uC218 \uC788\uB3C4\uB85D ESM \uC18C\uC2A4 \uCF54\uB4DC\uB97C \uC790\uB3D9\uC73C\uB85C \uBCC0\uD658\uD569\uB2C8\uB2E4.</span>
    <span class="token comment">//    \uCD94\uAC00\uC801\uC778 \uBC88\uB4E4\uB9C1\uC774 \uD544\uC694\uD558\uC9C0 \uC54A\uC73C\uBA70, HMR\uACFC \uC720\uC0AC\uD55C \uB3D9\uC791\uC744 \uC218\uD589\uD569\uB2C8\uB2E4.</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> render <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> vite<span class="token punctuation">.</span><span class="token function">ssrLoadModule</span><span class="token punctuation">(</span><span class="token string">&#39;/src/entry-server.js&#39;</span><span class="token punctuation">)</span>

    <span class="token comment">// 4. \uC571\uC758 HTML\uC744 \uB80C\uB354\uB9C1\uD569\uB2C8\uB2E4.</span>
    <span class="token comment">//    \uC774\uB294 entry-server.js\uC5D0\uC11C \uB0B4\uBCF4\uB0B8(Export) \`render\` \uD568\uC218\uAC00</span>
    <span class="token comment">//    ReactDOMServer.renderToString()\uACFC \uAC19\uC740 \uC801\uC808\uD55C \uD504\uB808\uC784\uC6CC\uD06C\uC758 SSR API\uB97C \uD638\uCD9C\uD55C\uB2E4\uACE0 \uAC00\uC815\uD569\uB2C8\uB2E4.</span>
    <span class="token keyword">const</span> appHtml <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">render</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>

    <span class="token comment">// 5. \uB80C\uB354\uB9C1\uB41C HTML\uC744 \uD15C\uD50C\uB9BF\uC5D0 \uC8FC\uC785\uD569\uB2C8\uB2E4.</span>
    <span class="token keyword">const</span> html <span class="token operator">=</span> template<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">&lt;!--ssr-outlet--&gt;</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span> appHtml<span class="token punctuation">)</span>

    <span class="token comment">// 6. \uB80C\uB354\uB9C1\uB41C HTML\uC744 \uC751\uB2F5\uC73C\uB85C \uC804\uC1A1\uD569\uB2C8\uB2E4.</span>
    res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&#39;Content-Type&#39;</span><span class="token operator">:</span> <span class="token string">&#39;text/html&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \uB9CC\uC57D \uC624\uB958\uAC00 \uBC1C\uC0DD\uB41C\uB2E4\uBA74, Vite\uB294 \uC2A4\uD0DD\uD2B8\uB808\uC774\uC2A4(Stacktrace)\uB97C \uC218\uC815\uD558\uC5EC</span>
    <span class="token comment">// \uC624\uB958\uAC00 \uC2E4\uC81C \uCF54\uB4DC\uC5D0 \uB9E4\uD551\uB418\uB3C4\uB85D \uC7AC\uAD6C\uC131\uD569\uB2C8\uB2E4.</span>
    vite<span class="token punctuation">.</span><span class="token function">ssrFixStacktrace</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
    res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><code>package.json</code>\uC758 <code>dev</code> \uC2A4\uD06C\uB9BD\uD2B8\uB3C4 \uC11C\uBC84 \uC2A4\uD06C\uB9BD\uD2B8\uB97C \uC0AC\uC6A9\uD558\uB3C4\uB85D \uBCC0\uACBD\uD574\uC90D\uB2C8\uB2E4:</p><div class="language-diff"><pre><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &quot;scripts&quot;: {
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">   &quot;dev&quot;: &quot;vite&quot;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   &quot;dev&quot;: &quot;node server&quot;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> }
</span></span></code></pre></div><h2 id="building-for-production" tabindex="-1">\uD504\uB85C\uB355\uC158\uC744 \uC704\uD574 \uBE4C\uB4DC\uD558\uAE30 <a class="header-anchor" href="#building-for-production" aria-hidden="true">#</a></h2><p>SSR \uD504\uB85C\uC81D\uD2B8\uB97C \uD504\uB85C\uB355\uC158\uC73C\uB85C \uC81C\uACF5\uD558\uAE30 \uC704\uD574\uC11C\uB294 \uB2E4\uC74C\uC774 \uD544\uC694\uD569\uB2C8\uB2E4:</p><ol><li>\uD074\uB77C\uC774\uC5B8\uD2B8 \uBE4C\uB4DC\uB97C \uC815\uC0C1\uC801\uC73C\uB85C \uC0DD\uC131\uD569\uB2C8\uB2E4.</li><li>Vite\uC758 <code>ssrLoadModule</code>\uC744 \uAC70\uCE60 \uD544\uC694\uAC00 \uC5C6\uB3C4\uB85D <code>require()</code> \uD568\uC218\uB97C \uD1B5\uD574 \uC9C1\uC811 \uB85C\uB4DC\uD560 \uC218 \uC788\uB294 SSR \uBE4C\uB4DC\uB97C \uC0DD\uC131\uD569\uB2C8\uB2E4.</li></ol><p>\uC774\uB97C \uC704\uD55C <code>package.json</code>\uC758 \uC2A4\uD06C\uB9BD\uD2B8\uB294 \uB2E4\uC74C\uACFC \uAC19\uC2B5\uB2C8\uB2E4:</p><div class="language-json"><pre><code><span class="token punctuation">{</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node server&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;build:client&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vite build --outDir dist/client&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;build:server&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vite build --outDir dist/server --ssr src/entry-server.js &quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>--ssr</code> \uD50C\uB798\uADF8\uB294 SSR \uBE4C\uB4DC\uC784\uC744 \uC758\uBBF8\uD558\uBA70, SSR\uC758 \uC9C4\uC785\uC810(Entry)\uC774 \uB420 \uC2A4\uD06C\uB9BD\uD2B8\uB97C \uBA85\uC2DC\uD574\uC918\uC57C \uD569\uB2C8\uB2E4.</p><p>\uADF8 \uB2E4\uC74C, <code>server.js</code>\uC5D0\uC11C <code>process.<wbr>env.NODE_ENV</code> \uAC12\uC744 \uD655\uC778\uD558\uC5EC \uC77C\uBD80 \uD504\uB85C\uB355\uC158\uC5D0 \uB300\uD55C \uD2B9\uC815 \uB85C\uC9C1\uC744 \uCD94\uAC00\uD574\uC918\uC57C \uD569\uB2C8\uB2E4:</p><ul><li><p>\uD504\uB85C\uC81D\uD2B8 \uB8E8\uD2B8\uC758 <code>index.html</code> \uD30C\uC77C\uC774 \uC544\uB2CC, <code>dist/client/index.html</code>\uB97C \uD15C\uD50C\uB9BF\uC73C\uB85C \uC0AC\uC6A9\uD558\uB3C4\uB85D \uD569\uB2C8\uB2E4. \uC774 \uD30C\uC77C\uC5D0 \uD074\uB77C\uC774\uC5B8\uD2B8 \uBE4C\uB4DC\uC5D0 \uB300\uD55C \uC62C\uBC14\uB978 \uCC38\uC870\uAC00 \uD3EC\uD568\uB418\uC5B4 \uC788\uAE30 \uB54C\uBB38\uC785\uB2C8\uB2E4.</p></li><li><p><code>await vite.ssrLoadModule(&#39;/src/entry-server.js&#39;)</code> \uB300\uC2E0, <code>require(&#39;./dist/server/entry-server.js&#39;)</code>\uB97C \uC0AC\uC6A9\uD558\uC5EC \uC2A4\uD06C\uB9BD\uD2B8\uB97C \uB85C\uB4DC\uD558\uB3C4\uB85D \uD569\uB2C8\uB2E4. (\uC774 \uD30C\uC77C\uC740 SSR \uBE4C\uB4DC \uACB0\uACFC\uBB3C \uC785\uB2C8\uB2E4.)</p></li><li><p><code>vite</code> \uAC1C\uBC1C \uC11C\uBC84\uC758 \uC0DD\uC131\uACFC \uBAA8\uB4E0 \uC0AC\uC6A9\uC740 \uAC1C\uBC1C \uC804\uC6A9\uC73C\uB85C \uAD6C\uBD84\uB41C \uC870\uAC74\uBB38 \uC544\uB798\uB85C \uC774\uB3D9\uD55C \uB2E4\uC74C, <code>dist/client</code>\uB97C \uD1B5\uD574 \uD30C\uC77C\uC744 \uC81C\uACF5\uD560 \uC218 \uC788\uB3C4\uB85D \uBBF8\uB4E4\uC6E8\uC5B4\uB97C \uCD94\uAC00\uD574\uC90D\uB2C8\uB2E4.</p></li></ul><p>\uC774 <a href="https://github.com/vitejs/vite/tree/main/packages/playground/ssr-vue" target="_blank" rel="noopener noreferrer">Vue</a> \uBC0F <a href="https://github.com/vitejs/vite/tree/main/packages/playground/ssr-react" target="_blank" rel="noopener noreferrer">React</a> \uB370\uBAA8\uB97C \uCC38\uC870\uD574 \uC790\uC138\uD55C \uD504\uB85C\uC81D\uD2B8 \uAD6C\uC131\uC744 \uD655\uC778\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.</p><h2 id="generating-preload-directives" tabindex="-1">\uC0AC\uC804 \uB85C\uB4DC\uB420 \uC9C0\uC2DC\uBB38 \uC0DD\uC131\uD558\uAE30 <a class="header-anchor" href="#generating-preload-directives" aria-hidden="true">#</a></h2><p><code>vite build</code>\uB294 \uBE4C\uB4DC \uC2DC <code>ssr-manifest.json</code> \uD30C\uC77C\uC744 \uC0DD\uC131\uD558\uB3C4\uB85D \uD558\uB294 <code>--ssrManifest</code> \uD50C\uB798\uADF8\uB97C \uC9C0\uC6D0\uD569\uB2C8\uB2E4.</p><div class="language-diff"><pre><code><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> &quot;build:client&quot;: &quot;vite build --outDir dist/client&quot;,
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> &quot;build:client&quot;: &quot;vite build --outDir dist/client --ssrManifest&quot;,
</span></span></code></pre></div><p>\uC704\uC640 \uAC19\uC774 \uAD6C\uC131\uB41C \uC2A4\uD06C\uB9BD\uD2B8\uB294 \uD074\uB77C\uC774\uC5B8\uD2B8 \uBE4C\uB4DC \uC2DC <code>dist/client/ssr-manifest.json</code>\uC744 \uC0DD\uC131\uD569\uB2C8\uB2E4. \uCC38\uACE0\uB85C SSR \uB9E4\uB2C8\uD398\uC2A4\uD2B8 \uD30C\uC77C\uC740 \uBAA8\uB4C8 ID\uB97C \uD074\uB77C\uC774\uC5B8\uD2B8 \uD30C\uC77C\uC5D0 \uB300\uD574 \uB9E4\uD551\uD558\uACE0\uC790 \uD558\uAE30 \uB54C\uBB38\uC5D0, \uD074\uB77C\uC774\uC5B8\uD2B8 \uBE4C\uB4DC\uC5D0\uC11C \uC0DD\uC131\uB429\uB2C8\uB2E4. \uC774 \uB9E4\uB2C8\uD398\uC2A4\uD2B8 \uD30C\uC77C\uC5D0\uB294 \uBAA8\uB4C8 ID\uC640 \uAD00\uB828\uB41C \uCCAD\uD06C \uD30C\uC77C\uC774\uB098 \uC5D0\uC14B \uD30C\uC77C\uC5D0 \uB300\uD55C \uB9E4\uD551\uC774 \uD3EC\uD568\uB418\uC5B4 \uC788\uC2B5\uB2C8\uB2E4.</p><p>\uB9E4\uB2C8\uD398\uC2A4\uD2B8 \uD30C\uC77C\uC744 \uD65C\uC6A9\uD558\uACE0\uC790 \uD55C\uB2E4\uBA74, \uD504\uB808\uC784\uC6CC\uD06C\uB294 \uC11C\uBC84 \uB80C\uB354\uB9C1 \uD638\uCD9C\uC5D0\uC11C \uC0AC\uC6A9\uB41C \uCEF4\uD3EC\uB10C\uD2B8\uC758 \uBAA8\uB4C8 ID\uB97C \uC218\uC9D1\uD558\uB294 \uBC29\uBC95\uC744 \uC81C\uACF5\uD574\uC57C \uD569\uB2C8\uB2E4.</p><p><code>@vitejs/plugin-vue</code>\uB294 \uC774\uB97C \uC774\uBBF8 \uC9C0\uC6D0\uD558\uACE0 \uC788\uC73C\uBA70, \uC0AC\uC6A9\uB41C \uCEF4\uD3EC\uB10C\uD2B8\uC758 \uBAA8\uB4C8 ID\uB97C \uC5F0\uACB0\uB41C Vue SSR \uCEE8\uD14D\uC2A4\uD2B8\uC5D0 \uC790\uB3D9\uC73C\uB85C \uB4F1\uB85D\uD558\uB3C4\uB85D \uD569\uB2C8\uB2E4:</p><div class="language-js"><pre><code><span class="token comment">// src/entry-server.js</span>
<span class="token keyword">const</span> ctx <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">const</span> html <span class="token operator">=</span> <span class="token keyword">await</span> vueServerRenderer<span class="token punctuation">.</span><span class="token function">renderToString</span><span class="token punctuation">(</span>app<span class="token punctuation">,</span> ctx<span class="token punctuation">)</span>
<span class="token comment">// ctx.modules\uB294 \uC774\uC81C \uB80C\uB354\uB9C1 \uC911\uC5D0 \uC0AC\uC6A9\uB41C \uBAA8\uB4C8 ID\uC758 \uC9D1\uD569(Set)\uC785\uB2C8\uB2E4.</span>
</code></pre></div><p><code>server.js</code>\uC758 \uD504\uB85C\uB355\uC158 \uBD84\uAE30\uBB38\uC5D0\uC11C\uB294 \uB9E4\uB2C8\uD398\uC2A4\uD2B8 \uD30C\uC77C\uC744 \uC77D\uACE0, <code>src/entry-server.js</code>\uC5D0\uC11C \uB0B4\uBCF4\uB0B8(Export) <code>render</code> \uD568\uC218\uC5D0 \uC804\uB2EC\uD574\uC57C \uD569\uB2C8\uB2E4. \uC774\uB294 \uBE44\uB3D9\uAE30 \uB77C\uC6B0\uD305\uC5D0\uC11C \uC0AC\uC6A9\uB418\uB294 \uD30C\uC77C\uC5D0 \uB300\uD55C \uC0AC\uC804 \uB85C\uB4DC \uC9C0\uC2DC\uBB38(Directives)\uC744 \uB80C\uB354\uB9C1\uD558\uAE30\uC5D0 \uCDA9\uBD84\uD55C \uC815\uBCF4\uB97C \uC81C\uACF5\uD569\uB2C8\uB2E4. \uC804\uCCB4 \uC608\uC81C\uB294 <a href="https://github.com/vitejs/vite/blob/main/packages/playground/ssr-vue/src/entry-server.js" target="_blank" rel="noopener noreferrer">\uB370\uBAA8 \uC18C\uC2A4 \uCF54\uB4DC</a>\uB97C \uCC38\uACE0\uD574\uC8FC\uC138\uC694.</p><h2 id="pre-rendering-ssg" tabindex="-1">\uC0AC\uC804 \uB80C\uB354\uB9C1 / SSG <a class="header-anchor" href="#pre-rendering-ssg" aria-hidden="true">#</a></h2><p>\uB9CC\uC57D \uC5B4\uB5A4 \uB77C\uC6B0\uD2B8\uC5D0 \uD544\uC694\uD55C \uACBD\uB85C\uC640 \uB370\uC774\uD130\uB97C \uBBF8\uB9AC \uC54C\uACE0 \uC788\uB294 \uACBD\uC6B0, \uD504\uB85C\uB355\uC158 SSR\uACFC \uB3D9\uC77C\uD55C \uB85C\uC9C1\uC744 \uC0AC\uC6A9\uD558\uC5EC \uC774\uB97C \uC815\uC801 HTML \uD30C\uC77C\uB85C \uBBF8\uB9AC \uB80C\uB354\uB9C1\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4. \uC774\uB294 SSG(\uC815\uC801 \uC0AC\uC774\uD2B8 \uC0DD\uC131, Static-Site Generation)\uC758 \uD55C \uD615\uD0DC\uB85C \uC0DD\uAC01\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4. \uB3D9\uC791\uD558\uB294 \uC608\uC81C\uB294 <a href="https://github.com/vitejs/vite/blob/main/packages/playground/ssr-vue/prerender.js" target="_blank" rel="noopener noreferrer">\uC0AC\uC804 \uB80C\uB354\uB9C1 \uB370\uBAA8 \uC2A4\uD06C\uB9BD\uD2B8</a>\uB97C \uCC38\uACE0\uD574\uC8FC\uC138\uC694.</p><h2 id="ssr-externals" tabindex="-1">SSR \uC678\uBD80\uD654 <a class="header-anchor" href="#ssr-externals" aria-hidden="true">#</a></h2><p>\uB300\uB2E4\uC218\uC758 \uB514\uD39C\uB358\uC2DC\uB294 ESM\uACFC CommonJS \uD30C\uC77C\uC744 \uBAA8\uB450 \uC81C\uACF5\uD569\uB2C8\uB2E4. \uB2E4\uB9CC, SSR\uC744 \uC2E4\uD589\uD560 \uB54C\uB294 CommonJS \uBE4C\uB4DC\uB97C \uC81C\uACF5\uD558\uB294 \uB514\uD39C\uB358\uC2DC\uB97C Vite\uC758 SSR \uBCC0\uD658/\uBAA8\uB4C8 \uC2DC\uC2A4\uD15C\uC5D0\uC11C &quot;\uC678\uBD80\uD654(Externalized)&quot;\uD558\uC5EC \uAC1C\uBC1C\uACFC \uBE4C\uB4DC \uC18D\uB3C4\uB97C \uB192\uC77C \uC218 \uC788\uC2B5\uB2C8\uB2E4. \uC608\uB97C \uB4E4\uC5B4, \uBBF8\uB9AC \uBC88\uB4E4\uB9C1 \uB41C ESM \uBC84\uC804\uC758 React\uB97C \uAC00\uC838\uC628 \uB2E4\uC74C Node.js\uC640 \uD638\uD658\uB418\uB3C4\uB85D \uC774\uB97C \uB2E4\uC2DC \uBCC0\uD658\uD558\uB294 \uB300\uC2E0\uC5D0, \uB2E8\uC21C\uD788 <code>require(&#39;react&#39;)</code>\uB97C \uC0AC\uC6A9\uD558\uB3C4\uB85D \uD558\uB294 \uAC83\uC774 \uB354 \uD6A8\uC728\uC801\uC774\uB77C\uB294 \uC758\uBBF8\uC785\uB2C8\uB2E4. \uB610\uD55C \uC774\uB294 SSR \uBC88\uB4E4\uB9C1 \uC2DC\uC5D0\uB3C4 \uB354 \uBE60\uB974\uAC8C \uBE4C\uB4DC\uD560 \uC218 \uC788\uB3C4\uB85D \uD569\uB2C8\uB2E4.</p><p>Vite\uB294 \uC544\uB798\uC640 \uAC19\uC740 \uD734\uB9AC\uC2A4\uD2F1\uC744 \uAE30\uBC18\uC73C\uB85C \uC790\uB3D9\uD654\uB294 SSR \uC678\uBD80\uD654\uB97C \uC218\uD589\uD569\uB2C8\uB2E4:</p><ul><li><p>\uB9CC\uC57D \uB514\uD39C\uB358\uC2DC\uAC00 ESM\uC744 \uD1B5\uD574 \uAC00\uC838\uC640\uC9C0\uB294 \uACBD\uB85C\uC640 Node\uB97C \uD1B5\uD574 \uAC00\uC838\uC640\uC9C0\uB294 \uACBD\uB85C\uAC00 \uC11C\uB85C \uB2E4\uB978 \uACBD\uC6B0, Node\uC758 \uACBD\uB85C\uB294 \uC678\uBD80\uD654\uD560 \uC218 \uC788\uB294 CommonJS \uBE4C\uB4DC\uC77C \uC218 \uC788\uC2B5\uB2C8\uB2E4. \uC608\uB97C \uB4E4\uC5B4, <code>vue</code>\uB294 ESM \uBC0F CommonJS \uBE4C\uB4DC\uB97C \uBAA8\uB450 \uC81C\uACF5\uD558\uAE30\uC5D0 \uC790\uB3D9\uC73C\uB85C \uC678\uBD80\uD654\uB429\uB2C8\uB2E4.</p></li><li><p>\uADF8\uB807\uC9C0 \uC54A\uC740 \uACBD\uC6B0, Vite\uB294 \uD328\uD0A4\uC9C0\uC758 \uC9C4\uC785\uC810\uC5D0 \uC720\uD6A8\uD55C ESM \uAD6C\uBB38\uC774 \uD3EC\uD568\uB418\uC5B4 \uC788\uB294\uC9C0 \uD655\uC778\uD569\uB2C8\uB2E4. \uD3EC\uD568\uB418\uC5B4 \uC788\uC9C0 \uC54A\uB2E4\uBA74 \uD328\uD0A4\uC9C0\uB294 CommonJS\uC77C \uAC00\uB2A5\uC131\uC774 \uC788\uC73C\uBA70 \uC678\uBD80\uD654\uB429\uB2C8\uB2E4. \uC608\uB97C \uB4E4\uC5B4, <code>react-dom</code>\uC740 CommonJS \uD615\uC2DD\uC758 \uB2E8\uC77C \uD56D\uBAA9\uB9CC\uC744 \uC81C\uACF5\uD558\uAE30\uC5D0 \uC790\uB3D9\uC73C\uB85C \uC678\uBD80\uD654\uB429\uB2C8\uB2E4.</p></li></ul><p>\uC774 \uD734\uB9AC\uC2A4\uD2F1\uC774 \uC624\uB958\uB97C \uC77C\uC73C\uD0A4\uBA74, <code>ssr.external</code>\uC640 <code>ssr.noExternal</code> \uC124\uC815\uC744 \uC9C1\uC811 \uC774\uC6A9\uD574 SSR \uC678\uBD80\uD654\uB97C \uC9C1\uC811 \uC218\uD589\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.</p><p>\uD5A5\uD6C4 \uC774\uB7EC\uD55C \uD734\uB9AC\uC2A4\uD2F1\uC740 \uD504\uB85C\uC81D\uD2B8\uC5D0 <code>type: &quot;module&quot;</code>\uC774 \uD65C\uC131\uD654\uB418\uC5B4 \uC788\uB294\uC9C0 \uC5EC\uBD80\uB97C \uAC10\uC9C0\uD558\uB3C4\uB85D \uAC1C\uC120\uB420 \uAC83\uC774\uBA70, Vite\uB294 SSR \uACFC\uC815 \uC911 \uB3D9\uC801\uC778 <code>import()</code>\uB97C \uD1B5\uD574 \uB178\uB4DC\uC640 \uD638\uD658\uB418\uB294 ESM \uBE4C\uB4DC\uB97C \uC81C\uACF5\uD558\uB294 \uB514\uD39C\uB358\uC2DC\uB97C \uC678\uBD80\uD654\uD558\uB3C4\uB85D \uD560 \uAC83\uC785\uB2C8\uB2E4.</p><div class="warning custom-block"><p class="custom-block-title">\uBCC4\uCE6D\uC744 \uC774\uC6A9\uD558\uB294 \uACBD\uC6B0</p><p>\uB9CC\uC57D \uC5B4\uB5A4 \uD558\uB098\uC758 \uD328\uD0A4\uC9C0\uB97C \uB2E4\uB978 \uD328\uD0A4\uC9C0\uB97C \uB9AC\uB2E4\uC774\uB809\uD2B8\uD558\uB294 \uBCC4\uCE6D\uC744 \uC0AC\uC6A9\uD558\uB294 \uACBD\uC6B0, \uC678\uBD80\uD654\uB41C SSR \uB514\uD39C\uB358\uC2DC\uC5D0\uC11C\uB3C4 \uC0AC\uC6A9\uD560 \uC218 \uC788\uB3C4\uB85D <code>node_modules</code> \uD328\uD0A4\uC9C0\uC5D0 \uBCC4\uCE6D\uC744 \uC9C0\uC815\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4. <a href="https://classic.yarnpkg.com/en/docs/cli/add/#toc-yarn-add-alias" target="_blank" rel="noopener noreferrer">Yarn</a>\uACFC <a href="https://pnpm.js.org/en/aliases" target="_blank" rel="noopener noreferrer">pnpm</a> \uBAA8\uB450 <code>npm:</code> \uC811\uB450\uC0AC\uB97C \uC0AC\uC6A9\uD558\uC5EC \uBCC4\uCE6D\uC744 \uC9C0\uC815\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.</p></div><h2 id="ssr-specific-plugin-logic" tabindex="-1">SSR \uC804\uC6A9 \uD50C\uB7EC\uADF8\uC778 \uB85C\uC9C1 <a class="header-anchor" href="#ssr-specific-plugin-logic" aria-hidden="true">#</a></h2><p>Vue \uB610\uB294 Svelte\uC640 \uAC19\uC740 \uC77C\uBD80 \uD504\uB808\uC784\uC6CC\uD06C\uB294 \uD074\uB77C\uC774\uC5B8\uD2B8 \uB610\uB294 SSR\uC5D0 \uB530\uB77C \uCEF4\uD3EC\uB10C\uD2B8\uB97C \uB2E4\uB978 \uD615\uC2DD\uC73C\uB85C \uCEF4\uD30C\uC77C\uD569\uB2C8\uB2E4. \uC774 \uC870\uAC74\uBD80 \uBCC0\uD658\uC744 \uC9C0\uC6D0\uD558\uAE30 \uC704\uD574, Vite\uB294 <code>options</code> \uAC1D\uCCB4\uC5D0 \uC874\uC7AC\uD558\uB294 <code>ssr</code> \uC774\uB77C\uB294 \uCD94\uAC00\uC801\uC778 \uC778\uC218\uB97C \uC544\uB798\uC758 \uD50C\uB7EC\uADF8\uC778 \uD6C5(Hook)\uC5D0 \uC804\uB2EC\uD569\uB2C8\uB2E4:</p><ul><li><code>resolveId</code></li><li><code>load</code></li><li><code>transform</code></li></ul><p><strong>Example:</strong></p><div class="language-js"><pre><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">mySSRPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&#39;my-ssr&#39;</span><span class="token punctuation">,</span>
    <span class="token function">transform</span><span class="token punctuation">(</span><span class="token parameter">code<span class="token punctuation">,</span> id<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token operator">?.</span>ssr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// SSR\uC778 \uACBD\uC6B0\uC5D0\uB9CC \uC218\uD589\uB420 \uBCC0\uD658 \uC791\uC5C5 \uAD00\uB828 \uCF54\uB4DC\uB4E4...</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>load</code>\uC640 <code>transform</code> \uBA54\uC11C\uB4DC\uC758 \uC635\uC158 \uAC1D\uCCB4\uB294 \uC5B4\uB514\uAE4C\uC9C0\uB098 \uC120\uD0DD \uC0AC\uD56D\uC77C \uBFD0\uC785\uB2C8\uB2E4. \uD604\uC7AC Rollup\uC5D0\uC11C \uC774 \uAC1D\uCCB4\uB97C \uC0AC\uC6A9\uD558\uC9C0\uB294 \uC54A\uC73C\uB098, \uD5A5\uD6C4 \uBA54\uD0C0\uB370\uC774\uD130\uB85C \uC774\uB97C \uD655\uC7A5\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.</p><div class="tip custom-block"><p class="custom-block-title">\uCC38\uACE0 \uC0AC\uD56D</p><p>Vite 2.7 \uC774\uC804\uC5D0\uB294 <code>options</code> \uAC1D\uCCB4\uB97C \uC0AC\uC6A9\uD558\uB294 \uB300\uC2E0 <code>ssr</code> \uB9E4\uAC1C\uBCC0\uC218\uB97C \uC774\uC6A9\uD588\uC2B5\uB2C8\uB2E4. \uB530\uB77C\uC11C \uC774\uC640 \uAD00\uB828\uB41C \uBAA8\uB4E0 \uD504\uB808\uC784\uC6CC\uD06C\uC640 \uD50C\uB7EC\uADF8\uC778\uC774 \uC5C5\uB370\uC774\uD2B8 \uB420 \uAC83\uC774\uC9C0\uB9CC, \uAC04\uD639 \uC774\uC804 API\uB97C \uC774\uC6A9\uD558\uB294 \uACBD\uC6B0\uB97C \uB9C8\uC8FC\uD560 \uC218\uB3C4 \uC788\uC2B5\uB2C8\uB2E4.</p></div><h2 id="ssr-target" tabindex="-1">SSR \uD0C0\uAC9F <a class="header-anchor" href="#ssr-target" aria-hidden="true">#</a></h2><p>\uAE30\uBCF8\uC801\uC73C\uB85C SSR \uBE4C\uB4DC \uD0C0\uAC9F\uC740 Node \uD658\uACBD\uC774\uC9C0\uB9CC, \uC6F9 \uC6CC\uCEE4\uB97C \uD1B5\uD574 \uC11C\uBC84\uB97C \uC2E4\uD589\uD560 \uC218\uB3C4 \uC788\uC2B5\uB2C8\uB2E4. \uD328\uD0A4\uC9C0\uB4E4\uC758 \uC9C4\uC785\uC810(Entry)\uC740 \uD50C\uB7AB\uD3FC \uBCC4 \uB2E4\uB985\uB2C8\uB2E4. <code>ssr.target</code>\uB97C <code>&#39;webworker&#39;</code>\uB85C \uC124\uC815\uD558\uBA74 Web Worker\uB97C \uD1B5\uD574 \uC11C\uBC84\uB97C \uC2E4\uD589\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.</p><h2 id="ssr-bundle" tabindex="-1">SSR \uBC88\uB4E4 <a class="header-anchor" href="#ssr-bundle" aria-hidden="true">#</a></h2><p>\uD2B9\uC815 <code>webworker</code>\uC640 \uAC19\uC740 \uB7F0\uD0C0\uC784\uC5D0\uC11C, \uD558\uB098\uC758 JavaScript \uD30C\uC77C\uB85C SSR \uBE4C\uB4DC\uB97C \uBC88\uB4E4\uB9C1\uD558\uACE0\uC790 \uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4. \uC774\uB294 <code>ssr.noExternal</code>\uC744 <code>true</code>\uB85C \uC124\uC815\uD574 \uAC00\uB2A5\uD558\uBA70, \uC544\uB798\uC758 \uB450 \uAC00\uC9C0 \uB3D9\uC791\uC744 \uC218\uD589\uD569\uB2C8\uB2E4.</p><ul><li>\uBAA8\uB4E0 \uB514\uD39C\uB358\uC2DC\uB97C <code>noExternal</code>\uB85C \uCC98\uB9AC\uD569\uB2C8\uB2E4.</li><li>Node.js \uB0B4\uC7A5(Built-ins) \uAE30\uB2A5\uC744 \uAC00\uC838\uC624\uBA74 \uC624\uB958\uAC00 \uBC1C\uC0DD\uB429\uB2C8\uB2E4.</li></ul>`,65),o=[p];function c(r,l,i,u,d,k){return a(),s("div",null,o)}var v=n(t,[["render",c]]);export{m as __pageData,v as default};
