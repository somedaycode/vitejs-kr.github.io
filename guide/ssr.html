<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>서버 측 렌더링 (SSR) | Vite</title>
    <meta name="description" content="차세대 프런트엔드 개발 툴">
    <link rel="stylesheet" href="/assets/style.bcefc497.css">
    <link rel="modulepreload" href="/assets/chunks/ui-custom.b8a06251.js">
    <link rel="modulepreload" href="/assets/chunks/AlgoliaSearchBox.18c3cfc1.js">
    <link rel="modulepreload" href="/assets/app.18df0fee.js">
    <link rel="modulepreload" href="/assets/guide_ssr.md.b679b2b5.lean.js">
    
    <link rel="icon" type="image/svg+xml" href="/logo.svg">
  <script src="https://www.googletagmanager.com/gtag/js?id=G-V8ZS1G7X21"></script>
  <script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-V8ZS1G7X21");</script>
  <meta name="twitter:title" content="서버 측 렌더링 (SSR) | Vite">
  <meta property="og:title" content="서버 측 렌더링 (SSR) | Vite">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-40587210><div class="sidebar-button" data-v-40587210><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/" aria-label="Vite, back to home" data-v-40587210 data-v-016a8bd8><img class="logo" src="/logo.svg" alt="Logo" data-v-016a8bd8> Vite</a><div class="flex-grow" data-v-40587210></div><div class="nav" data-v-40587210><nav class="nav-links" data-v-40587210 data-v-35b91e7e><!--[--><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item active" href="/guide/" data-v-49fe041d>가이드 <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/config/" data-v-49fe041d>설정 <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/plugins/" data-v-49fe041d>플러그인 <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-dropdown-link" data-v-35b91e7e data-v-18d75f62><button class="button" data-v-18d75f62><span class="button-text" data-v-18d75f62>관련 링크</span><span class="right button-arrow" data-v-18d75f62></span></button><ul class="dialog" data-v-18d75f62><!--[--><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item isExternal" href="https://twitter.com/vite_js" target="_blank" rel="noopener noreferrer" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>트위터</span><span class="icon" data-v-07381bdb><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-07381bdb><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item isExternal" href="https://chat.vitejs.dev" target="_blank" rel="noopener noreferrer" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>디스코드</span><span class="icon" data-v-07381bdb><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-07381bdb><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item isExternal" href="https://github.com/vitejs/awesome-vite" target="_blank" rel="noopener noreferrer" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>Awesome Vite</span><span class="icon" data-v-07381bdb><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-07381bdb><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item isExternal" href="https://dev.to/t/vite" target="_blank" rel="noopener noreferrer" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>개발 커뮤니티</span><span class="icon" data-v-07381bdb><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-07381bdb><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item isExternal" href="https://vite-rollup-plugins.patak.dev/" target="_blank" rel="noopener noreferrer" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>호환 가능한 Rollup 플러그인</span><span class="icon" data-v-07381bdb><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-07381bdb><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item isExternal" href="https://github.com/vitejs/vite/blob/main/packages/vite/CHANGELOG.md" target="_blank" rel="noopener noreferrer" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>변경 사항</span><span class="icon" data-v-07381bdb><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-07381bdb><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-35b91e7e><div class="nav-dropdown-link" data-v-35b91e7e data-v-18d75f62><button class="button" data-v-18d75f62><span class="button-text" data-v-18d75f62>Languages</span><span class="right button-arrow" data-v-18d75f62></span></button><ul class="dialog" data-v-18d75f62><!--[--><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item isExternal" href="https://vitejs.dev" target="_blank" rel="noopener noreferrer" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>English</span><span class="icon" data-v-07381bdb><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-07381bdb><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item isExternal" href="https://cn.vitejs.dev" target="_blank" rel="noopener noreferrer" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>简体中文</span><span class="icon" data-v-07381bdb><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-07381bdb><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item isExternal" href="https://ja.vitejs.dev" target="_blank" rel="noopener noreferrer" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>日本語</span><span class="icon" data-v-07381bdb><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-07381bdb><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><!--]--></ul></div></div><!--]--><!----><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item isExternal" href="https://github.com/vitejs-kr/vitejs-kr.github.io" target="_blank" rel="noopener noreferrer" data-v-49fe041d>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-49fe041d><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav></div><!--[--><!--[--><div class="algolia-search-box" id="docsearch"></div><!--]--><!--]--></header><aside class="sidebar" data-v-17c48e2f><nav class="nav-links nav" data-v-17c48e2f data-v-35b91e7e><!--[--><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item active" href="/guide/" data-v-49fe041d>가이드 <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/config/" data-v-49fe041d>설정 <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/plugins/" data-v-49fe041d>플러그인 <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-dropdown-link" data-v-35b91e7e data-v-18d75f62><button class="button" data-v-18d75f62><span class="button-text" data-v-18d75f62>관련 링크</span><span class="right button-arrow" data-v-18d75f62></span></button><ul class="dialog" data-v-18d75f62><!--[--><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item isExternal" href="https://twitter.com/vite_js" target="_blank" rel="noopener noreferrer" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>트위터</span><span class="icon" data-v-07381bdb><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-07381bdb><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item isExternal" href="https://chat.vitejs.dev" target="_blank" rel="noopener noreferrer" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>디스코드</span><span class="icon" data-v-07381bdb><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-07381bdb><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item isExternal" href="https://github.com/vitejs/awesome-vite" target="_blank" rel="noopener noreferrer" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>Awesome Vite</span><span class="icon" data-v-07381bdb><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-07381bdb><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item isExternal" href="https://dev.to/t/vite" target="_blank" rel="noopener noreferrer" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>개발 커뮤니티</span><span class="icon" data-v-07381bdb><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-07381bdb><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item isExternal" href="https://vite-rollup-plugins.patak.dev/" target="_blank" rel="noopener noreferrer" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>호환 가능한 Rollup 플러그인</span><span class="icon" data-v-07381bdb><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-07381bdb><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item isExternal" href="https://github.com/vitejs/vite/blob/main/packages/vite/CHANGELOG.md" target="_blank" rel="noopener noreferrer" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>변경 사항</span><span class="icon" data-v-07381bdb><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-07381bdb><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-35b91e7e><div class="nav-dropdown-link" data-v-35b91e7e data-v-18d75f62><button class="button" data-v-18d75f62><span class="button-text" data-v-18d75f62>Languages</span><span class="right button-arrow" data-v-18d75f62></span></button><ul class="dialog" data-v-18d75f62><!--[--><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item isExternal" href="https://vitejs.dev" target="_blank" rel="noopener noreferrer" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>English</span><span class="icon" data-v-07381bdb><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-07381bdb><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item isExternal" href="https://cn.vitejs.dev" target="_blank" rel="noopener noreferrer" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>简体中文</span><span class="icon" data-v-07381bdb><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-07381bdb><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item isExternal" href="https://ja.vitejs.dev" target="_blank" rel="noopener noreferrer" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>日本語</span><span class="icon" data-v-07381bdb><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-07381bdb><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><!--]--></ul></div></div><!--]--><!----><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item isExternal" href="https://github.com/vitejs-kr/vitejs-kr.github.io" target="_blank" rel="noopener noreferrer" data-v-49fe041d>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-49fe041d><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav><!--[--><!--]--><ul class="sidebar-links" data-v-17c48e2f><!--[--><li class="sidebar-link"><p class="sidebar-link-item">가이드</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/guide/why">Vite를 사용해야 하는 이유</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/guide/">시작하기</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/guide/features">지원하는 기능들</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/guide/using-plugins">플러그인 사용하기</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/guide/dep-pre-bundling">사전 번들링 된 디펜던시</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/guide/assets">에셋 가져오기</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/guide/build">프로덕션 버전으로 빌드하기</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/guide/static-deploy">정적 웹 페이지로 배포하기</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/guide/env-and-mode">Vite의 환경 변수와 모드</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item active" href="/guide/ssr">서버 측 렌더링 (SSR)</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#example-projects">예제 프로젝트</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#source-structure">프로젝트 구조</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#conditional-logic">조건부 논리</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#setting-up-the-dev-server">개발 서버 구성하기</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#building-for-production">프로덕션 빌드</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#generating-preload-directives">사전 로드될 지시문 생성하기</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#pre-rendering-ssg">사전 렌더링 / SSG</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#ssr-externals">SSR 외부화</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#ssr-specific-plugin-logic">SSR 전용 플러그인 로직</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#ssr-target">SSR 타겟</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#ssr-bundle">SSR 번들</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/guide/backend-integration">백엔드 프레임워크와 함께 사용하기</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/guide/comparisons">다른 빌드 도구와의 차이점</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/guide/migration">v1에서 마이그레이션하기</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">API</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/guide/api-plugin">플러그인 API</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/guide/api-hmr">HMR API</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/guide/api-javascript">JavaScript API</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/config/">Vite 설정 레퍼런스</a><!----></li></ul></li><!--]--></ul><!--[--><!--[--><div class="sponsors sidebar"><div><a class="sponsors-aside-text" href="https://github.com/sponsors/yyx990803" target="_blank">Sponsors</a><div ref_key="container" class="sponsor-container platinum aside" data-v-48f41d64><!----></div><div ref_key="container" class="sponsor-container gold aside" data-v-48f41d64><!----></div></div></div><!--]--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-8fcebc32><div class="container" data-v-8fcebc32><!--[--><!--[--><div id="ads-container"><div class="carbon-ads" ref_key="el" data-v-71eb9365></div></div><!--]--><!--[--><!--]--><!--]--><div style="position:relative;" class="content" data-v-8fcebc32><div><h1 id="server-side-rendering" tabindex="-1">서버 측 렌더링 (SSR) <a class="header-anchor" href="#server-side-rendering" aria-hidden="true">#</a></h1><div class="warning custom-block"><p class="custom-block-title">실험적 기능</p><p>SSR은 현재 실험적인 기능이며 버그가 있거나 지원하지 않는 사례가 발생될 수 있습니다. 자신의 책임 아래 진행하시기 바랍니다.</p></div><div class="tip custom-block"><p class="custom-block-title">참고</p><p>SSR은 동일한 전체 사이트를 Node.js에서 동작시키고, 이를 HTML로 사전 렌더링 한 후, 마지막으로 이를 클라이언트의 프런트엔드 프레임워크(가령 React, Preact, Vue 및 Svelte와 같은)에서 가져오도록 하는 기능입니다. 만약 기존에 사용하고 있었던 서버 사이드 프레임워크와의 연동을 원한다면 <a href="./backend-integration.html">백엔드 프레임워크와 함께 사용하기</a>를 참고하시기 바랍니다.</p><p>또한, 아래의 가이드는 선택한 프레임워크에서 SSR을 적용해 보았다고 가정하며, Vite에서는 이를 어떻게 적용할 수 있는지에 대한 세부 정보에만 초점을 맞추었습니다.</p></div><div class="warning custom-block"><p class="custom-block-title">저수준 API</p><p>이 내용은 라이브러리 및 프레임워크 개발자들을 위한 저수준 API 입니다. 만약 일반적인 애플리케이션을 만드는 것이 목적이라면, 먼저 <a href="https://github.com/vitejs/awesome-vite#ssr" target="_blank" rel="noopener noreferrer">Awesome Vite SSR</a>에서 SSR 플러그인과 관련 툴을 확인해주세요. Vite의 저수준의 네이티브 API 기반으로 많은 수의 프로젝트들이 성공적으로 구축되어 있습니다.</p></div><div class="tip custom-block"><p class="custom-block-title">Help</p><p>만약 질문하고자 한다면, <a href="https://discord.gg/PkbxgzPhJv" target="_blank" rel="noopener noreferrer">Vite Discord의 #ssr 채널</a>을 방문해주세요.</p></div><h2 id="example-projects" tabindex="-1">예제 프로젝트 <a class="header-anchor" href="#example-projects" aria-hidden="true">#</a></h2><p>Vite는 서버 측 렌더링(SSR, Server-side Rendering)을 기본적으로 지원합니다. Vite 플레이그라운드에서는 SSR 설정에 대한 Vue 3 및 React 예제를 제공하고 있으며, 이를 참고할 수 있습니다.</p><ul><li><a href="https://github.com/vitejs/vite/tree/main/packages/playground/ssr-vue" target="_blank" rel="noopener noreferrer">Vue 3</a></li><li><a href="https://github.com/vitejs/vite/tree/main/packages/playground/ssr-react" target="_blank" rel="noopener noreferrer">React</a></li></ul><h2 id="source-structure" tabindex="-1">프로젝트 구조 <a class="header-anchor" href="#source-structure" aria-hidden="true">#</a></h2><p>일반적으로 SSR 애플리케이션의 프로젝트 구조는 다음과 같습니다:</p><div class="language-"><pre><code>- index.html
- server.js # main application server
- src/
  - main.js          # 환경에 구애받지 않는(Env-agnostic) 범용 앱 코드로 내보내는(Export) 스크립트
  - entry-client.js  # 앱을 DOM 엘리먼트에 마운트하는 스크립트
  - entry-server.js  # 프레임워크의 SSR API를 사용해 앱을 렌더링하는 스크립트
</code></pre></div><p><code>index.html</code>은 <code>entry-client.js</code>를 반드시 참조해야 하며, 서버에서 렌더링된 페이지를 삽입해야 하는 자리 표시자(Placeholder)를 포함해야 합니다:</p><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!--ssr-outlet--&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>module<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/src/entry-client.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>정확하게 바꿀 수 있다고 판단된다면, <code>&lt;!--ssr-outlet--&gt;</code> 대신 원하는 자리 표시자를 사용할 수도 있습니다.</p><h2 id="conditional-logic" tabindex="-1">조건부 논리 <a class="header-anchor" href="#conditional-logic" aria-hidden="true">#</a></h2><p>만약 SSR 또는 CSR(클라이언트 측 렌더링, Client-side Rendering) 여부에 따라 다른 코드를 실행하고자 하는 경우, 아래와 같이 조건부 논리 코드를 사용할 수 있습니다:</p><div class="language-js"><pre><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">SSR</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ... SSR 에서만 작동하는 코드</span>
<span class="token punctuation">}</span>
</code></pre></div><p>이러한 코드는 빌드 중에 정적으로 대체되기에, 사용하지 않는 분기문에 대해서는 트리-쉐이킹*을 적용합니다. (* 트리 셰이킹: Tree-shaking, 사용하지 않는 코드를 제거하는 기법 / <a href="https://webpack.js.org/guides/tree-shaking/" target="_blank" rel="noopener noreferrer">참고</a>)</p><h2 id="setting-up-the-dev-server" tabindex="-1">개발 서버 구성하기 <a class="header-anchor" href="#setting-up-the-dev-server" aria-hidden="true">#</a></h2><p>SSR 앱을 빌드할 때, 메인 서버를 완전히 제어하고 Vite를 프로덕션 환경에서 분리하고자 한다면 어떻게 해야 할까요? 가장 좋은 방법은, Vite를 미들웨어 모드로 사용하는 것입니다. 가령 <a href="https://expressjs.com/" target="_blank" rel="noopener noreferrer">Express</a>를 예로 들자면:</p><p><strong>server.js</strong></p><div class="language-js"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br></div><pre><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;fs&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;express&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token literal-property property">createServer</span><span class="token operator">:</span> createViteServer <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;vite&#39;</span><span class="token punctuation">)</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token comment">// 미들웨어 모드로 Vite 서버를 생성합니다.</span>
  <span class="token comment">// 이는 Vite의 자체적인 HTML 제공 로직을 비활성화하고, 상위 서버가 제어하도록 합니다.</span>
  <span class="token comment">//</span>
  <span class="token comment">// 미들웨어 모드에서 Vite의 자체적인 HTML 제공 로직을 사용하고자 한다면,</span>
  <span class="token comment">// `middlewareMode`(https://vitejs-kr.github.io/config/#server-middlewaremode)를 `&#39;html&#39;`로 설정하세요.</span>
  <span class="token keyword">const</span> vite <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">createViteServer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">server</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">middlewareMode</span><span class="token operator">:</span> <span class="token string">&#39;ssr&#39;</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token comment">// Vite를 미들웨어로 사용합니다.</span>
  app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>vite<span class="token punctuation">.</span>middlewares<span class="token punctuation">)</span>

  app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">&#39;*&#39;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// index.html 파일을 제공합니다 - 아래에서 이를 다룰 예정입니다.</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>여기서의 <code>vite</code>는 <a href="./api-javascript.html#vitedevserver">ViteDevServer</a>의 인스턴스입니다. <code>vite.middlewares</code>는 <a href="https://github.com/senchalabs/connect" target="_blank" rel="noopener noreferrer">Connect</a> 인스턴스이며, <code>Connect</code>는 미들웨어로 알려진 플러그인을 사용하는 Node.js용 HTTP 서버 프레임워크입니다.</p><p>다음 단계는 서버에서 렌더링된 HTML을 제공하기 위해 <code>*</code> 핸들러를 구현하는 것입니다:</p><div class="language-js"><pre><code>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">&#39;*&#39;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> url <span class="token operator">=</span> req<span class="token punctuation">.</span>originalUrl

  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1. index.html 파일을 읽어들입니다.</span>
    <span class="token keyword">let</span> template <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>
      path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;index.html&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token string">&#39;utf-8&#39;</span>
    <span class="token punctuation">)</span>

    <span class="token comment">// 2. Vite의 HTML 변환 작업을 통해 Vite HMR 클라이언트를 주입하고,</span>
    <span class="token comment">//    Vite 플러그인의 HTML 변환도 적용합니다.</span>
    <span class="token comment">//    (예시: @vitejs/plugin-react의 Global Preambles)</span>
    template <span class="token operator">=</span> <span class="token keyword">await</span> vite<span class="token punctuation">.</span><span class="token function">transformIndexHtml</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> template<span class="token punctuation">)</span>

    <span class="token comment">// 3. 서버의 진입점(Entry)을 로드합니다.</span>
    <span class="token comment">//    vite.ssrLoadModule은 Node.js에서 사용할 수 있도록 ESM 소스 코드를 자동으로 변환합니다.</span>
    <span class="token comment">//    추가적인 번들링이 필요하지 않으며, HMR과 유사한 동작을 수행합니다.</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> render <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> vite<span class="token punctuation">.</span><span class="token function">ssrLoadModule</span><span class="token punctuation">(</span><span class="token string">&#39;/src/entry-server.js&#39;</span><span class="token punctuation">)</span>

    <span class="token comment">// 4. 앱의 HTML을 렌더링합니다.</span>
    <span class="token comment">//    이는 entry-server.js에서 내보낸(Export) `render` 함수가</span>
    <span class="token comment">//    ReactDOMServer.renderToString()과 같은 적절한 프레임워크의 SSR API를 호출한다고 가정합니다.</span>
    <span class="token keyword">const</span> appHtml <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">render</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>

    <span class="token comment">// 5. 렌더링된 HTML을 템플릿에 주입합니다.</span>
    <span class="token keyword">const</span> html <span class="token operator">=</span> template<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;!--ssr-outlet--&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> appHtml<span class="token punctuation">)</span>

    <span class="token comment">// 6. 렌더링된 HTML을 응답으로 전송합니다.</span>
    res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string-property property">&#39;Content-Type&#39;</span><span class="token operator">:</span> <span class="token string">&#39;text/html&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 만약 오류가 발생된다면, Vite는 스택트레이스(Stacktrace)를 수정하여</span>
    <span class="token comment">// 오류가 실제 코드에 매핑되도록 재구성합니다.</span>
    vite<span class="token punctuation">.</span><span class="token function">ssrFixStacktrace</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
    <span class="token function">next</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><code>package.json</code>의 <code>dev</code> 스크립트도 서버 스크립트를 사용하도록 변경해줍니다:</p><div class="language-diff"><pre><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &quot;scripts&quot;: {
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">   &quot;dev&quot;: &quot;vite&quot;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   &quot;dev&quot;: &quot;node server&quot;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> }
</span></span></code></pre></div><h2 id="building-for-production" tabindex="-1">프로덕션 빌드 <a class="header-anchor" href="#building-for-production" aria-hidden="true">#</a></h2><p>SSR 프로젝트를 프로덕션으로 제공하기 위해서는 다음이 필요합니다:</p><ol><li>클라이언트 빌드를 정상적으로 생성합니다.</li><li>Vite의 <code>ssrLoadModule</code>을 거칠 필요가 없도록 <code>require()</code> 함수를 통해 직접 로드할 수 있는 SSR 빌드를 생성합니다.</li></ol><p>이를 위한 <code>package.json</code>의 스크립트는 다음과 같습니다:</p><div class="language-json"><pre><code><span class="token punctuation">{</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node server&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;build:client&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vite build --outDir dist/client&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;build:server&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vite build --outDir dist/server --ssr src/entry-server.js &quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>--ssr</code> 플래그는 SSR 빌드임을 의미하며, SSR의 진입점(Entry)이 될 스크립트를 명시해줘야 합니다.</p><p>그 다음, <code>server.js</code>에서 <code>process.<wbr>env.NODE_ENV</code> 값을 확인하여 일부 프로덕션에 대한 특정 로직을 추가해줘야 합니다:</p><ul><li><p>프로젝트 루트의 <code>index.html</code> 파일이 아닌, <code>dist/client/index.html</code>를 템플릿으로 사용하도록 합니다. 이 파일에 클라이언트 빌드에 대한 올바른 참조가 포함되어 있기 때문입니다.</p></li><li><p><code>await vite.ssrLoadModule(&#39;/src/entry-server.js&#39;)</code> 대신, <code>require(&#39;./dist/server/entry-server.js&#39;)</code>를 사용하여 스크립트를 로드하도록 합니다. (이 파일은 SSR 빌드 결과물 입니다.)</p></li><li><p><code>vite</code> 개발 서버의 생성과 모든 사용은 개발 전용으로 구분된 조건문 아래로 이동한 다음, <code>dist/client</code>를 통해 파일을 제공할 수 있도록 미들웨어를 추가해줍니다.</p></li></ul><p>이 <a href="https://github.com/vitejs/vite/tree/main/packages/playground/ssr-vue" target="_blank" rel="noopener noreferrer">Vue</a> 및 <a href="https://github.com/vitejs/vite/tree/main/packages/playground/ssr-react" target="_blank" rel="noopener noreferrer">React</a> 데모를 참조해 자세한 프로젝트 구성을 확인할 수 있습니다.</p><h2 id="generating-preload-directives" tabindex="-1">사전 로드될 지시문 생성하기 <a class="header-anchor" href="#generating-preload-directives" aria-hidden="true">#</a></h2><p><code>vite build</code>는 빌드 시 <code>ssr-manifest.json</code> 파일을 생성하도록 하는 <code>--ssrManifest</code> 플래그를 지원합니다.</p><div class="language-diff"><pre><code><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> &quot;build:client&quot;: &quot;vite build --outDir dist/client&quot;,
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> &quot;build:client&quot;: &quot;vite build --outDir dist/client --ssrManifest&quot;,
</span></span></code></pre></div><p>위와 같이 구성된 스크립트는 클라이언트 빌드 시 <code>dist/client/ssr-manifest.json</code>을 생성합니다. 참고로 SSR 매니페스트 파일은 모듈 ID를 클라이언트 파일에 대해 매핑하고자 하기 때문에, 클라이언트 빌드에서 생성됩니다. 이 매니페스트 파일에는 모듈 ID와 관련된 청크 파일이나 에셋 파일에 대한 매핑이 포함되어 있습니다.</p><p>매니페스트 파일을 활용하고자 한다면, 프레임워크는 서버 렌더링 호출에서 사용된 컴포넌트의 모듈 ID를 수집하는 방법을 제공해야 합니다.</p><p><code>@vitejs/plugin-vue</code>는 이를 이미 지원하고 있으며, 사용된 컴포넌트의 모듈 ID를 연결된 Vue SSR 컨텍스트에 자동으로 등록하도록 합니다:</p><div class="language-js"><pre><code><span class="token comment">// src/entry-server.js</span>
<span class="token keyword">const</span> ctx <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">const</span> html <span class="token operator">=</span> <span class="token keyword">await</span> vueServerRenderer<span class="token punctuation">.</span><span class="token function">renderToString</span><span class="token punctuation">(</span>app<span class="token punctuation">,</span> ctx<span class="token punctuation">)</span>
<span class="token comment">// ctx.modules는 이제 렌더링 중에 사용된 모듈 ID의 집합(Set)입니다.</span>
</code></pre></div><p><code>server.js</code>의 프로덕션 분기문에서는 매니페스트 파일을 읽고, <code>src/entry-server.js</code>에서 내보낸(Export) <code>render</code> 함수에 전달해야 합니다. 이는 비동기 라우팅에서 사용되는 파일에 대한 사전 로드 지시문(Directives)을 렌더링하기에 충분한 정보를 제공합니다. 전체 예제는 <a href="https://github.com/vitejs/vite/blob/main/packages/playground/ssr-vue/src/entry-server.js" target="_blank" rel="noopener noreferrer">데모 소스 코드</a>를 참고해주세요.</p><h2 id="pre-rendering-ssg" tabindex="-1">사전 렌더링 / SSG <a class="header-anchor" href="#pre-rendering-ssg" aria-hidden="true">#</a></h2><p>만약 어떤 라우트에 필요한 경로와 데이터를 미리 알고 있는 경우, 프로덕션 SSR과 동일한 로직을 사용하여 이를 정적 HTML 파일로 미리 렌더링할 수 있습니다. 이는 SSG(정적 사이트 생성, Static-Site Generation)의 한 형태로 생각할 수 있습니다. 동작하는 예제는 <a href="https://github.com/vitejs/vite/blob/main/packages/playground/ssr-vue/prerender.js" target="_blank" rel="noopener noreferrer">사전 렌더링 데모 스크립트</a>를 참고해주세요.</p><h2 id="ssr-externals" tabindex="-1">SSR 외부화 <a class="header-anchor" href="#ssr-externals" aria-hidden="true">#</a></h2><p>대다수의 디펜던시는 ESM과 CommonJS 파일을 모두 제공합니다. 다만, SSR을 실행할 때는 CommonJS 빌드를 제공하는 디펜던시를 Vite의 SSR 변환/모듈 시스템에서 &quot;외부화(Externalized)&quot;하여 개발과 빌드 속도를 높일 수 있습니다. 예를 들어, 미리 번들링 된 ESM 버전의 React를 가져온 다음 Node.js와 호환되도록 이를 다시 변환하는 대신에, 단순히 <code>require(&#39;react&#39;)</code>를 사용하도록 하는 것이 더 효율적이라는 의미입니다. 또한 이는 SSR 번들링 시에도 더 빠르게 빌드할 수 있도록 합니다.</p><p>Vite는 아래와 같은 휴리스틱을 기반으로 자동화는 SSR 외부화를 수행합니다:</p><ul><li><p>만약 디펜던시가 ESM을 통해 가져와지는 경로와 Node를 통해 가져와지는 경로가 서로 다른 경우, Node의 경로는 외부화할 수 있는 CommonJS 빌드일 수 있습니다. 예를 들어, <code>vue</code>는 ESM 및 CommonJS 빌드를 모두 제공하기에 자동으로 외부화됩니다.</p></li><li><p>그렇지 않은 경우, Vite는 패키지의 진입점에 유효한 ESM 구문이 포함되어 있는지 확인합니다. 포함되어 있지 않다면 패키지는 CommonJS일 가능성이 있으며 외부화됩니다. 예를 들어, <code>react-dom</code>은 CommonJS 형식의 단일 항목만을 제공하기에 자동으로 외부화됩니다.</p></li></ul><p>이 휴리스틱이 오류를 일으키면, <code>ssr.external</code>와 <code>ssr.noExternal</code> 설정을 직접 이용해 SSR 외부화를 직접 수행할 수 있습니다.</p><p>향후 이러한 휴리스틱은 프로젝트에 <code>type: &quot;module&quot;</code>이 활성화되어 있는지 여부를 감지하도록 개선될 것이며, Vite는 SSR 과정 중 동적인 <code>import()</code>를 통해 노드와 호환되는 ESM 빌드를 제공하는 디펜던시를 외부화하도록 할 것입니다.</p><div class="warning custom-block"><p class="custom-block-title">별칭을 사용하는 경우</p><p>만약 어떤 하나의 패키지를 다른 패키지를 리다이렉트하는 별칭을 사용하는 경우, 외부화된 SSR 디펜던시에서도 사용할 수 있도록 <code>node_modules</code> 패키지에 별칭을 지정할 수 있습니다. <a href="https://classic.yarnpkg.com/en/docs/cli/add/#toc-yarn-add-alias" target="_blank" rel="noopener noreferrer">Yarn</a>과 <a href="https://pnpm.js.org/en/aliases" target="_blank" rel="noopener noreferrer">pnpm</a> 모두 <code>npm:</code> 접두사를 사용하여 별칭을 지정할 수 있습니다.</p></div><h2 id="ssr-specific-plugin-logic" tabindex="-1">SSR 전용 플러그인 로직 <a class="header-anchor" href="#ssr-specific-plugin-logic" aria-hidden="true">#</a></h2><p>Vue 또는 Svelte와 같은 일부 프레임워크는 클라이언트 또는 SSR에 따라 컴포넌트를 다른 형식으로 컴파일합니다. 이 조건부 변환을 지원하기 위해, Vite는 <code>options</code> 객체에 존재하는 <code>ssr</code> 이라는 추가적인 인수를 아래의 플러그인 훅(Hook)에 전달합니다:</p><ul><li><code>resolveId</code></li><li><code>load</code></li><li><code>transform</code></li></ul><p><strong>예제:</strong></p><div class="language-js"><pre><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">mySSRPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;my-ssr&#39;</span><span class="token punctuation">,</span>
    <span class="token function">transform</span><span class="token punctuation">(</span><span class="token parameter">code<span class="token punctuation">,</span> id<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token operator">?.</span>ssr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// SSR인 경우에만 수행될 변환 작업 관련 코드들...</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>load</code>와 <code>transform</code> 메서드의 옵션 객체는 어디까지나 선택 사항일 뿐입니다. 현재 Rollup에서 이 객체를 사용하지는 않으나, 향후 메타데이터로 이를 확장할 수 있습니다.</p><div class="tip custom-block"><p class="custom-block-title">참고</p><p>Vite 2.7 이전에는 <code>options</code> 객체를 사용하는 대신 <code>ssr</code> 매개변수를 이용했습니다. 따라서 이와 관련된 모든 프레임워크와 플러그인이 업데이트 될 것이지만, 간혹 이전 API를 이용하는 경우를 마주할 수도 있습니다.</p></div><h2 id="ssr-target" tabindex="-1">SSR 타겟 <a class="header-anchor" href="#ssr-target" aria-hidden="true">#</a></h2><p>기본적으로 SSR 빌드 타겟은 Node 환경이지만, 웹 워커를 통해 서버를 실행할 수도 있습니다. 패키지들의 진입점(Entry)은 플랫폼 별 다릅니다. <code>ssr.target</code>를 <code>&#39;webworker&#39;</code>로 설정하면 Web Worker를 통해 서버를 실행할 수 있습니다.</p><h2 id="ssr-bundle" tabindex="-1">SSR 번들 <a class="header-anchor" href="#ssr-bundle" aria-hidden="true">#</a></h2><p>특정 <code>webworker</code>와 같은 런타임에서, 하나의 JavaScript 파일로 SSR 빌드를 번들링하고자 할 수 있습니다. 이는 <code>ssr.noExternal</code>을 <code>true</code>로 설정해 가능하며, 아래의 두 가지 동작을 수행합니다.</p><ul><li>모든 디펜던시를 <code>noExternal</code>로 처리합니다.</li><li>Node.js 내장(Built-ins) 기능을 가져오면 오류가 발생됩니다.</li></ul></div></div><footer class="page-footer" data-v-8fcebc32 data-v-b65b4b36><div class="edit" data-v-b65b4b36><div class="edit-link" data-v-b65b4b36 data-v-55695e90><a class="link" href="https://github.com/vitejs-kr/vitejs-kr.github.io/edit/main/guide/ssr.md" target="_blank" rel="noopener noreferrer" data-v-55695e90>이 페이지 수정하기 <svg class="icon outbound icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-55695e90><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="updated" data-v-b65b4b36><!----></div></footer><div class="next-and-prev-link" data-v-8fcebc32 data-v-e65a9748><div class="container" data-v-e65a9748><div class="prev" data-v-e65a9748><a class="link" href="/guide/env-and-mode" data-v-e65a9748><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-prev" data-v-e65a9748><path d="M19,11H7.4l5.3-5.3c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-7,7c-0.1,0.1-0.2,0.2-0.2,0.3c-0.1,0.2-0.1,0.5,0,0.8c0.1,0.1,0.1,0.2,0.2,0.3l7,7c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.4,13H19c0.6,0,1-0.4,1-1S19.6,11,19,11z"></path></svg><span class="text" data-v-e65a9748>Vite의 환경 변수와 모드</span></a></div><div class="next" data-v-e65a9748><a class="link" href="/guide/backend-integration" data-v-e65a9748><span class="text" data-v-e65a9748>백엔드 프레임워크와 함께 사용하기</span><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-next" data-v-e65a9748><path d="M19.9,12.4c0.1-0.2,0.1-0.5,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.3l-7-7c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l5.3,5.3H5c-0.6,0-1,0.4-1,1s0.4,1,1,1h11.6l-5.3,5.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l7-7C19.8,12.6,19.9,12.5,19.9,12.4z"></path></svg></a></div></div></div><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"readme.md\":\"782a1d33\",\"terminology.md\":\"021dfc3d\",\"blog_announcing-vite2.md\":\"1927090c\",\"config_index.md\":\"2c1a6c65\",\"guide_api-hmr.md\":\"4575295c\",\"guide_api-javascript.md\":\"9fe4384e\",\"guide_api-plugin.md\":\"273f86f6\",\"guide_assets.md\":\"2447b8bb\",\"guide_backend-integration.md\":\"74a9ae48\",\"guide_build.md\":\"ce356bbf\",\"guide_comparisons.md\":\"743b81ad\",\"guide_dep-pre-bundling.md\":\"22079bb8\",\"guide_env-and-mode.md\":\"3eb1e1d7\",\"guide_features.md\":\"a90a5adf\",\"guide_index.md\":\"33807a11\",\"guide_migration.md\":\"8049259c\",\"guide_ssr.md\":\"b679b2b5\",\"guide_static-deploy.md\":\"809a01dd\",\"guide_using-plugins.md\":\"fb5216b1\",\"guide_why.md\":\"2ff1bcee\",\"index.md\":\"ab1872fb\",\"plugins_index.md\":\"55869c4c\"}")</script>
    <script type="module" async src="/assets/app.18df0fee.js"></script>
    
  </body>
</html>