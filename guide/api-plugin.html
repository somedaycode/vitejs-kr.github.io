<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>플러그인 API | Vite</title>
    <meta name="description" content="차세대 프런트엔드 개발 툴">
    <link rel="stylesheet" href="/assets/style.bcefc497.css">
    <link rel="modulepreload" href="/assets/chunks/ui-custom.b8a06251.js">
    <link rel="modulepreload" href="/assets/chunks/AlgoliaSearchBox.18c3cfc1.js">
    <link rel="modulepreload" href="/assets/app.18df0fee.js">
    <link rel="modulepreload" href="/assets/guide_api-plugin.md.273f86f6.lean.js">
    
    <link rel="icon" type="image/svg+xml" href="/logo.svg">
  <meta name="twitter:title" content="플러그인 API | Vite">
  <meta property="og:title" content="플러그인 API | Vite">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-40587210><div class="sidebar-button" data-v-40587210><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/" aria-label="Vite, back to home" data-v-40587210 data-v-016a8bd8><img class="logo" src="/logo.svg" alt="Logo" data-v-016a8bd8> Vite</a><div class="flex-grow" data-v-40587210></div><div class="nav" data-v-40587210><nav class="nav-links" data-v-40587210 data-v-35b91e7e><!--[--><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item active" href="/guide/" data-v-49fe041d>가이드 <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/config/" data-v-49fe041d>설정 <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/plugins/" data-v-49fe041d>플러그인 <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-dropdown-link" data-v-35b91e7e data-v-18d75f62><button class="button" data-v-18d75f62><span class="button-text" data-v-18d75f62>관련 링크</span><span class="right button-arrow" data-v-18d75f62></span></button><ul class="dialog" data-v-18d75f62><!--[--><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item isExternal" href="https://twitter.com/vite_js" target="_blank" rel="noopener noreferrer" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>트위터</span><span class="icon" data-v-07381bdb><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-07381bdb><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item isExternal" href="https://chat.vitejs.dev" target="_blank" rel="noopener noreferrer" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>디스코드</span><span class="icon" data-v-07381bdb><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-07381bdb><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item isExternal" href="https://github.com/vitejs/awesome-vite" target="_blank" rel="noopener noreferrer" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>Awesome Vite</span><span class="icon" data-v-07381bdb><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-07381bdb><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item isExternal" href="https://dev.to/t/vite" target="_blank" rel="noopener noreferrer" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>개발 커뮤니티</span><span class="icon" data-v-07381bdb><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-07381bdb><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item isExternal" href="https://vite-rollup-plugins.patak.dev/" target="_blank" rel="noopener noreferrer" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>호환 가능한 Rollup 플러그인</span><span class="icon" data-v-07381bdb><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-07381bdb><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item isExternal" href="https://github.com/vitejs/vite/blob/main/packages/vite/CHANGELOG.md" target="_blank" rel="noopener noreferrer" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>변경 사항</span><span class="icon" data-v-07381bdb><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-07381bdb><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-35b91e7e><div class="nav-dropdown-link" data-v-35b91e7e data-v-18d75f62><button class="button" data-v-18d75f62><span class="button-text" data-v-18d75f62>Languages</span><span class="right button-arrow" data-v-18d75f62></span></button><ul class="dialog" data-v-18d75f62><!--[--><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item isExternal" href="https://vitejs.dev" target="_blank" rel="noopener noreferrer" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>English</span><span class="icon" data-v-07381bdb><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-07381bdb><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item isExternal" href="https://cn.vitejs.dev" target="_blank" rel="noopener noreferrer" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>简体中文</span><span class="icon" data-v-07381bdb><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-07381bdb><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item isExternal" href="https://ja.vitejs.dev" target="_blank" rel="noopener noreferrer" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>日本語</span><span class="icon" data-v-07381bdb><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-07381bdb><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><!--]--></ul></div></div><!--]--><!----><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item isExternal" href="https://github.com/vitejs-kr/vitejs-kr.github.io" target="_blank" rel="noopener noreferrer" data-v-49fe041d>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-49fe041d><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav></div><!--[--><!--[--><div class="algolia-search-box" id="docsearch"></div><!--]--><!--]--></header><aside class="sidebar" data-v-17c48e2f><nav class="nav-links nav" data-v-17c48e2f data-v-35b91e7e><!--[--><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item active" href="/guide/" data-v-49fe041d>가이드 <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/config/" data-v-49fe041d>설정 <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/plugins/" data-v-49fe041d>플러그인 <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-dropdown-link" data-v-35b91e7e data-v-18d75f62><button class="button" data-v-18d75f62><span class="button-text" data-v-18d75f62>관련 링크</span><span class="right button-arrow" data-v-18d75f62></span></button><ul class="dialog" data-v-18d75f62><!--[--><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item isExternal" href="https://twitter.com/vite_js" target="_blank" rel="noopener noreferrer" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>트위터</span><span class="icon" data-v-07381bdb><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-07381bdb><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item isExternal" href="https://chat.vitejs.dev" target="_blank" rel="noopener noreferrer" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>디스코드</span><span class="icon" data-v-07381bdb><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-07381bdb><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item isExternal" href="https://github.com/vitejs/awesome-vite" target="_blank" rel="noopener noreferrer" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>Awesome Vite</span><span class="icon" data-v-07381bdb><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-07381bdb><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item isExternal" href="https://dev.to/t/vite" target="_blank" rel="noopener noreferrer" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>개발 커뮤니티</span><span class="icon" data-v-07381bdb><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-07381bdb><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item isExternal" href="https://vite-rollup-plugins.patak.dev/" target="_blank" rel="noopener noreferrer" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>호환 가능한 Rollup 플러그인</span><span class="icon" data-v-07381bdb><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-07381bdb><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item isExternal" href="https://github.com/vitejs/vite/blob/main/packages/vite/CHANGELOG.md" target="_blank" rel="noopener noreferrer" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>변경 사항</span><span class="icon" data-v-07381bdb><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-07381bdb><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-35b91e7e><div class="nav-dropdown-link" data-v-35b91e7e data-v-18d75f62><button class="button" data-v-18d75f62><span class="button-text" data-v-18d75f62>Languages</span><span class="right button-arrow" data-v-18d75f62></span></button><ul class="dialog" data-v-18d75f62><!--[--><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item isExternal" href="https://vitejs.dev" target="_blank" rel="noopener noreferrer" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>English</span><span class="icon" data-v-07381bdb><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-07381bdb><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item isExternal" href="https://cn.vitejs.dev" target="_blank" rel="noopener noreferrer" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>简体中文</span><span class="icon" data-v-07381bdb><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-07381bdb><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item isExternal" href="https://ja.vitejs.dev" target="_blank" rel="noopener noreferrer" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>日本語</span><span class="icon" data-v-07381bdb><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-07381bdb><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><!--]--></ul></div></div><!--]--><!----><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item isExternal" href="https://github.com/vitejs-kr/vitejs-kr.github.io" target="_blank" rel="noopener noreferrer" data-v-49fe041d>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-49fe041d><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav><!--[--><!--]--><ul class="sidebar-links" data-v-17c48e2f><!--[--><li class="sidebar-link"><p class="sidebar-link-item">가이드</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/guide/why">Vite를 사용해야 하는 이유</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/guide/">시작하기</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/guide/features">지원하는 기능들</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/guide/using-plugins">플러그인 사용하기</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/guide/dep-pre-bundling">사전 번들링 된 디펜던시</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/guide/assets">에셋 가져오기</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/guide/build">프로덕션 버전으로 빌드하기</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/guide/static-deploy">정적 웹 페이지로 배포하기</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/guide/env-and-mode">Vite의 환경 변수와 모드</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/guide/ssr">서버 측 렌더링 (SSR)</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/guide/backend-integration">백엔드 프레임워크와 함께 사용하기</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/guide/comparisons">다른 빌드 도구와의 차이점</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/guide/migration">v1에서 마이그레이션하기</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">API</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item active" href="/guide/api-plugin">플러그인 API</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#authoring-a-plugin">플러그인 만들기</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#conventions">플러그인 작성 규칙</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#plugins-config">플러그인 설정</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#simple-examples">간단한 예제들</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#transforming-custom-file-types">파일 타입 변환하기</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#importing-a-virtual-file">가상 모듈 가져오기</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#virtual-modules-convention">가상 모듈 컨벤션</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#universal-hooks">범용 훅</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#vite-specific-hooks">Vite 전용 훅</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#config">config</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#configresolved">configResolved</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#configureserver">configureServer</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#transformindexhtml">transformIndexHtml</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#handlehotupdate">handleHotUpdate</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#plugin-ordering">플러그인 순서</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#conditional-application">조건부 애플리케이션</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#rollup-plugin-compatibility">Rollup 플러그인 호환성</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#path-normalization">경로 정규화</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/guide/api-hmr">HMR API</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/guide/api-javascript">JavaScript API</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/config/">Vite 설정 레퍼런스</a><!----></li></ul></li><!--]--></ul><!--[--><!--[--><div class="sponsors sidebar"><div><a class="sponsors-aside-text" href="https://github.com/sponsors/yyx990803" target="_blank">Sponsors</a><div ref_key="container" class="sponsor-container platinum aside" data-v-48f41d64><!----></div><div ref_key="container" class="sponsor-container gold aside" data-v-48f41d64><!----></div></div></div><!--]--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-8fcebc32><div class="container" data-v-8fcebc32><!--[--><!--[--><div id="ads-container"><div class="carbon-ads" ref_key="el" data-v-71eb9365></div></div><!--]--><!--[--><!--]--><!--]--><div style="position:relative;" class="content" data-v-8fcebc32><div><h1 id="plugin-api" tabindex="-1">플러그인 API <a class="header-anchor" href="#plugin-api" aria-hidden="true">#</a></h1><p>Vite의 플러그인은 Rollup의 멋진 플러그인 인터페이스에 몇 가지 Vite 특정 옵션을 추가한 형태로 구성하였습니다. 그리고 결과적으로, Vite의 플러그인은 한 번 작성되면 개발 및 빌드 시 모두 사용이 가능하다는 장점이 있죠.</p><p><strong>아래 내용은 <a href="https://rollupjs.org/guide/en/#plugin-development" target="_blank" rel="noopener noreferrer">Rollup의 플러그인 문서</a>를 읽었다는 전제 하에 진행합니다.</strong></p><h2 id="authoring-a-plugin" tabindex="-1">플러그인 만들기 <a class="header-anchor" href="#authoring-a-plugin" aria-hidden="true">#</a></h2><p>Vite는 확립된 패턴을 제공하기 위해 노력하고 있습니다. 따라서 새 플러그인을 만들기 전 <a href="https://vitejs-kr.github.io/guide/features" target="_blank" rel="noopener noreferrer">Vite에서 지원하는 기능들</a>, <a href="https://github.com/rollup/awesome" target="_blank" rel="noopener noreferrer">호환되는 Rollup 플러그인</a>, 그리고 <a href="https://github.com/vitejs/awesome-vite#plugins" target="_blank" rel="noopener noreferrer">Vite 플러그인</a>을 확인하여 사용 가능한 것이 있는지 확인해주세요.</p><p>플러그인을 만들 때는 굳이 새로운 패키지를 만들지 않고 <code>vite.config.js</code>에 직접 작성할 수도 있습니다. 만약 작성한 플러그인이 프로젝트에서 유용하다고 생각된다면, <a href="https://chat.vitejs.dev" target="_blank" rel="noopener noreferrer">Vite를 사용하는 다른 사람들과 공유해보세요</a>.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>플러그인을 학습하거나, 디버깅 또는 새롭게 작성할 때 프로젝트에 <a href="https://github.com/antfu/vite-plugin-inspect" target="_blank" rel="noopener noreferrer">vite-plugin-inspect</a>를 설치하는 것이 좋습니다. 이 모듈은 <code>localhost:3000/__inspect/</code>를 통해 Vite 플러그인의 중간 상태를 검사할 수 있도록 도와줍니다. 더 자세한 사항은 <a href="https://github.com/antfu/vite-plugin-inspect" target="_blank" rel="noopener noreferrer">vite-plugin-inspect 문서</a>를 참고해주세요. <img src="/assets/vite-plugin-inspect.0f355583.png" alt=""></p></div><h2 id="conventions" tabindex="-1">플러그인 작성 규칙 <a class="header-anchor" href="#conventions" aria-hidden="true">#</a></h2><p>만약 플러그인이 Vite에서 제공하는 훅을 사용하지 않고, 또 <a href="#rollup-plugin-compatibility">호환되는 Rollup 플러그인</a>으로 구성될 수 있는 경우에는 <a href="https://rollupjs.org/guide/en/#conventions" target="_blank" rel="noopener noreferrer">Rollup 플러그인 명명 규칙</a>을 따르는 것이 좋습니다.</p><ul><li>Rollup 플러그인은 <code>rollup-plugin-</code> 접두사가 있는 명확한 이름을 갖습니다.</li><li>package.json 파일의 <code>keywords</code> 항목에는 <code>rollup-plugin</code> 및 <code>vite-plugin</code>을 포함시키도록 합니다.</li></ul><p>위 규칙을 통해 작성된 플러그인이 순수하게 Rollup이나 <a href="https://github.com/preactjs/wmr" target="_blank" rel="noopener noreferrer">WMR</a> 기반의 프로젝트에서도 사용될 수 있도록 도와줍니다.</p><p>플러그인이 Vite 전용으로 작성된 경우에는 아래 규칙을 따라주세요.</p><ul><li>Vite 플러그인은 <code>vite-plugin-</code> 접두사가 있는 명확한 이름을 갖습니다.</li><li>package.json 파일의 <code>keywords</code> 항목에는 <code>vite-plugin</code>을 포함시키도록 합니다.</li><li>플러그인 문서에 Vite 플러그인으로 구성한 이유를 설명하는 섹션을 추가합니다. (가령 &#39;Vite 전용 플러그인 훅 사용&#39;과 같이 말이죠.)</li></ul><p>특정 프레임워크에서만 동작하는 Vite 플러그인은 프레임워크의 이름이 접두사의 일부로 포함되도록 합니다.</p><ul><li><code>vite-plugin-vue-</code>는 Vue만을 지원하는 Vite 플러그인을 의미합니다.</li><li><code>vite-plugin-react-</code>는 React만을 지원하는 Vite 플러그인을 의미합니다.</li><li><code>vite-plugin-svelte-</code>는 Svelte만을 지원하는 Vite 플러그인을 의미합니다.</li></ul><p><a href="#virtual-modules-convention">가상 모듈 컨벤션</a>또한 참고가 가능합니다.</p><h2 id="plugins-config" tabindex="-1">플러그인 설정 <a class="header-anchor" href="#plugins-config" aria-hidden="true">#</a></h2><p>프로젝트의 <code>devDependencies</code>에 플러그인을 추가한 뒤, Vite 설정 파일의 <code>plugins</code> 배열 옵션을 사용해 플러그인을 구성할 수 있습니다.</p><div class="language-js"><pre><code><span class="token comment">// vite.config.js</span>
<span class="token keyword">import</span> vitePlugin <span class="token keyword">from</span> <span class="token string">&#39;vite-plugin-feature&#39;</span>
<span class="token keyword">import</span> rollupPlugin <span class="token keyword">from</span> <span class="token string">&#39;rollup-plugin-feature&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">vitePlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">rollupPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>다른 플러그인을 쉽게 활성화하거나 비활성화하는 데 사용될 수 있는 잘못된 플러그인은 무시됩니다.</p><p><code>plugins</code> 항목은 여러 플러그인을 하나의 요소로 포함할 수도 있습니다. 이는 특정 프레임워크를 타깃으로 여러 플러그인을 사용하는 경우와 같이 복잡한 기능을 구현하는 데 유용합니다. 이 때 플러그인 배열은 자동으로 병합됩니다.</p><div class="language-js"><pre><code><span class="token comment">// framework-plugin</span>
<span class="token keyword">import</span> frameworkRefresh <span class="token keyword">from</span> <span class="token string">&#39;vite-plugin-framework-refresh&#39;</span>
<span class="token keyword">import</span> frameworkDevtools <span class="token keyword">from</span> <span class="token string">&#39;vite-plugin-framework-devtools&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">framework</span><span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token function">frameworkRefresh</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">frameworkDevTools</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js"><pre><code><span class="token comment">// vite.config.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vite&#39;</span>
<span class="token keyword">import</span> framework <span class="token keyword">from</span> <span class="token string">&#39;vite-plugin-framework&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">framework</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="simple-examples" tabindex="-1">간단한 예제들 <a class="header-anchor" href="#simple-examples" aria-hidden="true">#</a></h2><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Vite 또는 Rollup 플러그인을 구현할 때는 실제 플러그인 객체를 반환하는 팩토리 함수로 작성하는 것이 일반적인 관례입니다. 또한 이렇게 구성할 경우 플러그인을 사용하는 사용자가 플러그인의 세부적인 동작을 정의할 수 있는 옵션을 허용할 수 있게 만들어 줄 수도 있습니다.</p></div><h3 id="transforming-custom-file-types" tabindex="-1">파일 타입 변환하기 <a class="header-anchor" href="#transforming-custom-file-types" aria-hidden="true">#</a></h3><div class="language-js"><pre><code><span class="token keyword">const</span> fileRegex <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(my-file-ext)$</span><span class="token regex-delimiter">/</span></span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">myPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;transform-file&#39;</span><span class="token punctuation">,</span>

    <span class="token function">transform</span><span class="token punctuation">(</span><span class="token parameter">src<span class="token punctuation">,</span> id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>fileRegex<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token function">compileFileToJS</span><span class="token punctuation">(</span>src<span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token literal-property property">map</span><span class="token operator">:</span> <span class="token keyword">null</span> <span class="token comment">// 가능하다면 소스 맵을 제공</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="importing-a-virtual-file" tabindex="-1">가상 모듈 가져오기 <a class="header-anchor" href="#importing-a-virtual-file" aria-hidden="true">#</a></h3><p>예제는 <a href="#virtual-modules-convention">다음 섹션</a>을 참고해주세요.</p><h2 id="virtual-modules-convention" tabindex="-1">가상 모듈 컨벤션 <a class="header-anchor" href="#virtual-modules-convention" aria-hidden="true">#</a></h2><p>가상 모듈은 ESM의 일반적인 <code>import</code> 구문을 사용해 소스 파일에 빌드 시의 정보를 전달할 수 있는 유용한 기법입니다.</p><div class="language-js"><pre><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">myPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> virtualModuleId <span class="token operator">=</span> <span class="token string">&#39;@my-virtual-module&#39;</span>
  <span class="token keyword">const</span> resolvedVirtualModuleId <span class="token operator">=</span> <span class="token string">&#39;\0&#39;</span> <span class="token operator">+</span> virtualModuleId

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;my-plugin&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 필수 항목이며, 경고나 오류를 나타낼 때 사용됩니다.</span>
    <span class="token function">resolveId</span><span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>id <span class="token operator">===</span> virtualModuleId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> resolvedVirtualModuleId
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">load</span><span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>id <span class="token operator">===</span> resolvedVirtualModuleId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">export const msg = &quot;from virtual module&quot;</span><span class="token template-punctuation string">`</span></span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>JavaScript에서는 다음과 같이 모듈을 가져올 수 있습니다:</p><div class="language-js"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> msg <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@my-virtual-module&#39;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
</code></pre></div><p><a href="https://rollupjs.org/guide/en/#a-simple-example" target="_blank" rel="noopener noreferrer">가상 모듈</a>은 Vite와 Rollup에서 <code>virtual:</code> 접두사를 붙여 표현 및 사용합니다. 또한, 가능한 플러그인의 이름을 네임스페이스로 사용하여 다른 플러그인과의 충돌을 방지해야 합니다. 가령 <code>vite-plugin-posts</code> 라는 이름을 가진 플러그인이 있고, 이 플러그인을 사용하는 사용자는 가상 모듈을 포함(Import)해야 한다고 가정하겠습니다. 이 때 가상 모듈의 이름은 <code>virtual:posts</code> 또는 <code>virtual:posts/helpers</code>와 같이 플러그인 이름인 <code>posts</code>를 사용하는 것이 적절합니다. 그리고 이름 규칙에 대해 내부적으로 보자면, 가상 모듈을 사용하는 플러그인은 Rollup의 규칙과 같이 모듈의 ID를 확인하는 과정에서 ID 앞에 <code>\0</code>을 붙여줘야 합니다. 이는 다른 플러그인이 노드를 확인하는 작업(Node Resolution) 등과 같이 가상 모듈의 ID를 처리하는 것을 방지하고, 또 소스 맵과 같은 핵심 기능에서는 가상 모듈과 일반 모듈을 구별하기 위해 사용하기 때문입니다. 다만 <code>\0</code>은 <code>import</code> 시 사용되는 URL에서 허용되는 문자가 아니기에, <code>import</code> 분석 중에는 이 문자열을 대체해줘야 합니다. 브라우저에서는 <code>\0{id}</code> 라는 ID가 <code>/@id/__x00__{id}</code>로 인코딩되며, 이 ID는 플러그인 파이프라인을 진행하기 전 다시 디코딩되기에 플러그인 훅 내부에서는 이를 볼 수 없습니다.</p><p>단일 파일 컴포넌트(Single File Component, .vue 나 .svelte 확장자가 붙은)와 같이 실제 파일을 기반으로 만들어진 모듈의 경우에는 위 규칙을 따를 필요가 없습니다. 특히 SFC는 일반적으로 하위 모듈들을 생성하는 방식으로 처리되나, 이들의 코드는 파일 시스템에 다시 매핑될 수 있습니다. 이 하위 모듈에 <code>\0</code>을 사용하게 되면 소스 맵이 정상적으로 동작하지 않습니다.</p><h2 id="universal-hooks" tabindex="-1">범용 훅 <a class="header-anchor" href="#universal-hooks" aria-hidden="true">#</a></h2><p>개발 시, Vite 개발 서버는 Rollup과 동일한 방식으로 <a href="https://rollupjs.org/guide/en/#build-hooks" target="_blank" rel="noopener noreferrer">Rollup 빌드 훅</a>을 호출하는 플러그인 컨테이너를 생성합니다.</p><p>아래의 훅은 서버 시작 시 호출됩니다:</p><ul><li><a href="https://rollupjs.org/guide/en/#options" target="_blank" rel="noopener noreferrer"><code>options</code></a></li><li><a href="https://rollupjs.org/guide/en/#buildstart" target="_blank" rel="noopener noreferrer"><code>buildStart</code></a></li></ul><p>아래의 훅은 모듈을 요청할 때마다 호출됩니다:</p><ul><li><a href="https://rollupjs.org/guide/en/#resolveid" target="_blank" rel="noopener noreferrer"><code>resolveId</code></a></li><li><a href="https://rollupjs.org/guide/en/#load" target="_blank" rel="noopener noreferrer"><code>load</code></a></li><li><a href="https://rollupjs.org/guide/en/#transform" target="_blank" rel="noopener noreferrer"><code>transform</code></a></li></ul><p>아래의 훅은 서버가 종료될 때 호출됩니다:</p><ul><li><a href="https://rollupjs.org/guide/en/#buildend" target="_blank" rel="noopener noreferrer"><code>buildEnd</code></a></li><li><a href="https://rollupjs.org/guide/en/#closebundle" target="_blank" rel="noopener noreferrer"><code>closeBundle</code></a></li></ul><p>참고로 Vite는 더 효율적인 동작을 위해 전체 소스에 대한 AST 구문 분석을 진행하지 않기에, <a href="https://rollupjs.org/guide/en/#moduleparsed" target="_blank" rel="noopener noreferrer"><code>moduleParsed</code></a> 훅은 <strong>개발 과정에서 호출되지 않습니다</strong>.</p><p><a href="https://rollupjs.org/guide/en/#output-generation-hooks" target="_blank" rel="noopener noreferrer">Output Generation Hooks</a> 또한 <code>closeBundle</code>을 제외하고 <strong>개발 과정에서는 호출되지 않습니다</strong>. Vite의 개발 서버가 <code>bundle.generate()</code>를 호출하지 않고 <code>rollup.rollup()</code>만을 호출한다는 것으로 생각하면 됩니다.</p><h2 id="vite-specific-hooks" tabindex="-1">Vite 전용 훅 <a class="header-anchor" href="#vite-specific-hooks" aria-hidden="true">#</a></h2><p>Vite의 플러그인은 Vite 전용 훅을 사용할 수 있습니다. 물론 이러한 훅은 Rollup에서 무시됩니다.</p><h3 id="config" tabindex="-1"><code>config</code> <a class="header-anchor" href="#config" aria-hidden="true">#</a></h3><ul><li><p><strong>타입:</strong> <code>(config: UserConfig, env: { mode: string, command: string }) =&gt; UserConfig | null | void</code></p></li><li><p><strong>종류:</strong> <code>async</code>, <code>sequential</code></p><p>훅을 이용해 Vite의 설정을 실제 사용하기 전 변경할 수 있습니다. <code>config</code> 훅으로 설정 파일 또는 CLI 옵션으로 전달받은 로우 레벨 사용자 설정 값과, 현재 사용 중인 <code>mode</code> 및 <code>command</code>가 인자를 통해 전달됩니다. 훅은 객체를 반환할 수 있으며, 이 때의 객체는 기존 설정에 대해 깊은 병합(Deeply merge)이 됩니다. 또는 인자로 전달받은 설정 객체를 직접 수정할 수도 있습니다. 다만 이 방법은 객체 반환을 이용한 방법으로는 원하는 결과를 얻을 수 없을 때만 사용하세요.</p><p><strong>예제:</strong></p><div class="language-js"><pre><code><span class="token comment">// 설정 값 일부를 반환 (권고)</span>
<span class="token keyword">const</span> <span class="token function-variable function">partialConfigPlugin</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;return-partial&#39;</span><span class="token punctuation">,</span>
  <span class="token function-variable function">config</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">alias</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token string">&#39;bar&#39;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 전달받은 설정 객체를 직접 수정 (위 방법으로 불가능할 때 사용)</span>
<span class="token keyword">const</span> <span class="token function-variable function">mutateConfigPlugin</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;mutate-config&#39;</span><span class="token punctuation">,</span>
  <span class="token function">config</span><span class="token punctuation">(</span><span class="token parameter">config<span class="token punctuation">,</span> <span class="token punctuation">{</span> command <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>command <span class="token operator">===</span> <span class="token string">&#39;build&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      config<span class="token punctuation">.</span>root <span class="token operator">=</span> __dirname
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><div class="warning custom-block"><p class="custom-block-title">참고</p><p><code>config</code> 훅 안에서 다른 플러그인을 사용하지 마세요. 플러그인 자체는 이 훅이 실행되기 전에 모두 확정(Resolve)되며, 따라서 아무런 효과가 없습니다.</p></div></li></ul><h3 id="configresolved" tabindex="-1"><code>configResolved</code> <a class="header-anchor" href="#configresolved" aria-hidden="true">#</a></h3><ul><li><p><strong>타입:</strong> <code>(config: ResolvedConfig) =&gt; void | Promise&lt;void&gt;</code></p></li><li><p><strong>종류:</strong> <code>async</code>, <code>parallel</code></p><p>Vite 설정 값이 확정된 후 호출되는 훅입니다. 이 훅을 사용하여 최종적으로 확정된 설정 값을 읽거나 저장할 수 있습니다. 특히 플러그인이 실행 중인 명령에 따라 다른 작업을 수행해야 하는 경우 유용합니다.</p><p><strong>예제:</strong></p><div class="language-js"><pre><code><span class="token keyword">const</span> <span class="token function-variable function">examplePlugin</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> config

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;read-config&#39;</span><span class="token punctuation">,</span>

    <span class="token function">configResolved</span><span class="token punctuation">(</span><span class="token parameter">resolvedConfig</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 확정된 설정 값을 저장</span>
      config <span class="token operator">=</span> resolvedConfig
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// 다른 훅에서 저장된 설정 값을 이용</span>
    <span class="token function">transform</span><span class="token punctuation">(</span><span class="token parameter">code<span class="token punctuation">,</span> id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>config<span class="token punctuation">.</span>command <span class="token operator">===</span> <span class="token string">&#39;serve&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// dev: 개발 서버에서의 플러그인 행동 정의</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// build: Rollup 시 플러그인 행동 정의</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>참고로 <code>command</code> 값은 개발 서버에서 <code>serve</code> 입니다(cli에서 <code>vite</code>, <code>vite dev</code> 및 <code>vite serve</code> 모두 별칭입니다).</p></li></ul><h3 id="configureserver" tabindex="-1"><code>configureServer</code> <a class="header-anchor" href="#configureserver" aria-hidden="true">#</a></h3><ul><li><p><strong>타입:</strong> <code>(server: ViteDevServer) =&gt; (() =&gt; void) | void | Promise&lt;(() =&gt; void) | void&gt;</code></p></li><li><p><strong>종류:</strong> <code>async</code>, <code>sequential</code></p></li><li><p><strong>참고:</strong> <a href="./api-javascript.html#vitedevserver">ViteDevServer</a></p><p>개발 서버를 구성하기 위한 훅입니다. 일반적으로 커스텀 미들웨어를 내부의 <a href="https://github.com/senchalabs/connect" target="_blank" rel="noopener noreferrer">connect</a> 앱에 추가하기 위해 사용합니다:</p><div class="language-js"><pre><code><span class="token keyword">const</span> <span class="token function-variable function">myPlugin</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;configure-server&#39;</span><span class="token punctuation">,</span>
  <span class="token function">configureServer</span><span class="token punctuation">(</span><span class="token parameter">server</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    server<span class="token punctuation">.</span>middlewares<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// 이 곳에서 원하는 방식으로 요청을 핸들링 할 수 있습니다</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>내부 미들웨어 설치 이후에 호출되는 커스텀 미들웨어 구성하기</strong></p><p><code>configureServer</code> 훅은 내부의 미들웨어가 설치되기 전 호출됩니다. 따라서 위와 같은 방식의 커스텀 미들웨어는 내부의 미들웨어보다 먼저 실행됩니다. 만약 내부의 미들웨어가 설치된 <strong>이후에</strong> 커스텀 미들웨어를 호출하고자 한다면, <code>configureServer</code>의 반환 값으로 함수를 반환해주세요:</p><div class="language-js"><pre><code><span class="token keyword">const</span> <span class="token function-variable function">myPlugin</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;configure-server&#39;</span><span class="token punctuation">,</span>
  <span class="token function">configureServer</span><span class="token punctuation">(</span><span class="token parameter">server</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 내부 미들웨어가 설치된 후 실행될 훅을 반환합니다</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      server<span class="token punctuation">.</span>middlewares<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// 이 곳에서 원하는 방식으로 요청을 핸들링 할 수 있습니다</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>서버 인스턴스 저장하기</strong></p><p>플러그인 훅에서 개발 서버 인스턴스가 필요한 경우도 있습니다. 가령 웹 소켓 서버나, 파일 시스템 감시자, 또는 모듈 디펜던시 그래프에 접근해야 하는 경우와 같이 말이죠. <code>configureServer</code> 훅은 다른 훅에서 서버 인스턴스에 접근할 수 있도록 도와줄 수 있습니다:</p><div class="language-js"><pre><code><span class="token keyword">const</span> <span class="token function-variable function">myPlugin</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> server
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;configure-server&#39;</span><span class="token punctuation">,</span>
    <span class="token function">configureServer</span><span class="token punctuation">(</span><span class="token parameter">_server</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      server <span class="token operator">=</span> _server
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">transform</span><span class="token punctuation">(</span><span class="token parameter">code<span class="token punctuation">,</span> id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>server<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 서버 인스턴스 사용...</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>참고로 <code>configureServer</code>는 프로덕션 버전으로 빌드할 때 호출되지 않으므로 위 예시와 같이 훅이 존재하지 않는 경우를 분기해줘야 합니다.</p></li></ul><h3 id="transformindexhtml" tabindex="-1"><code>transformIndexHtml</code> <a class="header-anchor" href="#transformindexhtml" aria-hidden="true">#</a></h3><ul><li><p><strong>타입:</strong> <code>IndexHtmlTransformHook | { enforce?: &#39;pre&#39; | &#39;post&#39;, transform: IndexHtmlTransformHook }</code></p></li><li><p><strong>종류:</strong> <code>async</code>, <code>sequential</code></p><p><code>index.html</code> 파일만을 변환하기 위한 훅입니다. 훅의 인자로는 HTML 문자열과 컨텍스트를 전달받습니다. 개발 서버의 경우 컨텍스트에 <a href="./api-javascript.html#vitedevserver"><code>ViteDevServer</code></a> 인스턴스를 함께 전달하며, 빌드 시에는 Rollup된 번들을 전달합니다.</p><p>훅은 비동기적으로 동작할 수 있으며 다음 중 하나를 반환합니다:</p><ul><li>변환된 HTML 문자열</li><li>기존 HTML에 추가할 태그 설명자 객체(<code>{ tag, attrs, children }</code>) 배열. 각 태그는 기본적으로 <code>&lt;head&gt;</code> 앞에 추가되지만, 이 위치를 지정할 수도 있습니다.</li><li><code>{ html, tags }</code> 둘 다 포함하는 객체</li></ul><p><strong>예제:</strong></p><div class="language-js"><pre><code><span class="token keyword">const</span> <span class="token function-variable function">htmlPlugin</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;html-transform&#39;</span><span class="token punctuation">,</span>
    <span class="token function">transformIndexHtml</span><span class="token punctuation">(</span><span class="token parameter">html</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> html<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>
        <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;title&gt;(.*?)&lt;\/title&gt;</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;title&gt;Title replaced!&lt;/title&gt;</span><span class="token template-punctuation string">`</span></span>
      <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>훅 시그니처:</strong></p><div class="language-ts"><pre><code><span class="token keyword">type</span> <span class="token class-name">IndexHtmlTransformHook</span> <span class="token operator">=</span> <span class="token punctuation">(</span>
  html<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  ctx<span class="token operator">:</span> <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token builtin">string</span>
    filename<span class="token operator">:</span> <span class="token builtin">string</span>
    server<span class="token operator">?</span><span class="token operator">:</span> ViteDevServer
    bundle<span class="token operator">?</span><span class="token operator">:</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;rollup&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>OutputBundle
    chunk<span class="token operator">?</span><span class="token operator">:</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;rollup&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>OutputChunk
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  <span class="token operator">|</span> IndexHtmlTransformResult
  <span class="token operator">|</span> <span class="token keyword">void</span>
  <span class="token operator">|</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>IndexHtmlTransformResult <span class="token operator">|</span> <span class="token keyword">void</span><span class="token operator">&gt;</span>

<span class="token keyword">type</span> <span class="token class-name">IndexHtmlTransformResult</span> <span class="token operator">=</span>
  <span class="token operator">|</span> <span class="token builtin">string</span>
  <span class="token operator">|</span> HtmlTagDescriptor<span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token operator">|</span> <span class="token punctuation">{</span>
      html<span class="token operator">:</span> <span class="token builtin">string</span>
      tags<span class="token operator">:</span> HtmlTagDescriptor<span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">HtmlTagDescriptor</span> <span class="token punctuation">{</span>
  tag<span class="token operator">:</span> <span class="token builtin">string</span>
  attrs<span class="token operator">?</span><span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">boolean</span><span class="token operator">&gt;</span>
  children<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> HtmlTagDescriptor<span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token comment">/**
   * 기본값: &#39;head-prepend&#39;
   */</span>
  injectTo<span class="token operator">?</span><span class="token operator">:</span> <span class="token string">&#39;head&#39;</span> <span class="token operator">|</span> <span class="token string">&#39;body&#39;</span> <span class="token operator">|</span> <span class="token string">&#39;head-prepend&#39;</span> <span class="token operator">|</span> <span class="token string">&#39;body-prepend&#39;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul><h3 id="handlehotupdate" tabindex="-1"><code>handleHotUpdate</code> <a class="header-anchor" href="#handlehotupdate" aria-hidden="true">#</a></h3><ul><li><p><strong>타입:</strong> <code>(ctx: HmrContext) =&gt; Array&lt;ModuleNode&gt; | void | Promise&lt;Array&lt;ModuleNode&gt; | void&gt;</code></p><p>사용자가 지정한 방식대로 HMR 업데이트를 수행합니다. 이 훅은 아래와 같은 컨텍스트 객체를 전달받습니다:</p><div class="language-ts"><pre><code><span class="token keyword">interface</span> <span class="token class-name">HmrContext</span> <span class="token punctuation">{</span>
  file<span class="token operator">:</span> <span class="token builtin">string</span>
  timestamp<span class="token operator">:</span> <span class="token builtin">number</span>
  modules<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span>ModuleNode<span class="token operator">&gt;</span>
  <span class="token function-variable function">read</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span>
  server<span class="token operator">:</span> ViteDevServer
<span class="token punctuation">}</span>
</code></pre></div><ul><li><p><code>modules</code>는 변경된 파일의 영향을 받는 모듈의 배열입니다. Vue SFC와 같이 단일 파일이 여러 모듈에 매핑될 수 있기 때문에 배열 형태로 제공됩니다.</p></li><li><p><code>read</code>는 파일을 읽어 그 내용을 반환하는 비동기 함수입니다. 일부 시스템에서 핫 리로딩 시 파일 변경 콜백이 너무 이르게 호출되어 <code>fs.readFile</code>로 빈 콘텐츠가 반환될 수 있기에*, 이 함수를 통해 정상적으로 파일을 읽을 수 있도록 제공하고 있습니다. (* 더 자세한 내용은 <a href="https://github.com/vitejs/vite/blob/5a111cedf31f579e3b8c8af5c4442d2e0cd5aa12/packages/vite/src/node/server/hmr.ts#L443" target="_blank" rel="noopener noreferrer">hmr.ts</a> 파일을 참고해주세요)</p></li></ul><p>이 훅은 다음과 같은 동작을 할 수 있습니다:</p><ul><li><p>영향을 받는 모듈 목록을 필터링하고 범위를 좁혀 더 정확하게 HMR이 동작하도록 구성합니다.</p></li><li><p>사용자가 직접 HMR 처리를 수행하도록 빈 배열을 반환하고 커스텀 이벤트를 호출합니다:</p><div class="language-js"><pre><code><span class="token function">handleHotUpdate</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> server <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  server<span class="token punctuation">.</span>ws<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;custom&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">event</span><span class="token operator">:</span> <span class="token string">&#39;special-update&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>위의 커스텀 이벤트는 <a href="./api-hmr.html">HMR API</a>를 사용하여 핸들러를 등록해야 합니다(이는 동일한 플러그인의 <code>transform</code> 훅에 주입될 수 있습니다):</p><div class="language-js"><pre><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>hot<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;special-update&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 커스텀 업데이트 수행</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul></li></ul><h2 id="plugin-ordering" tabindex="-1">플러그인 순서 <a class="header-anchor" href="#plugin-ordering" aria-hidden="true">#</a></h2><p>Vite 플러그인은 Webpack 로더와 유사한 <code>enforce</code> 프로퍼티를 추가적으로 지정하여 플러그인 애플리케이션의 순서를 조정할 수 있습니다. <code>enforce</code> 값은 <code>&quot;pre&quot;</code> 또는 <code>&quot;post&quot;</code>로 지정할 수 있으며, 이를 통해 지정되는 플러그인 순서는 다음과 같습니다:</p><ul><li>별칭</li><li><code>enforce: &#39;pre&#39;</code>로 지정된 플러그인</li><li>Vite 코어 플러그인</li><li>enforce 값이 존재하지 않는 플러그인</li><li>Vite 빌드 플러그인</li><li><code>enforce: &#39;post&#39;</code>로 지정된 플러그인</li><li>빌드 후 실행되는 Vite의 플러그인 (minify, manifest, reporting)</li></ul><h2 id="conditional-application" tabindex="-1">조건부 애플리케이션 <a class="header-anchor" href="#conditional-application" aria-hidden="true">#</a></h2><p>기본적으로 플러그인은 개발 서버 및 빌드 시 모두 호출됩니다. 만약 플러그인이 개발 조건부로 호출되어야 하는 경우, <code>apply</code> 프로퍼티를 사용하여 <code>&#39;build&#39;</code> 또는 <code>&#39;serve&#39;</code> 중에만 플러그인이 호출되도록 구성해주세요:</p><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">myPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;build-only&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">apply</span><span class="token operator">:</span> <span class="token string">&#39;build&#39;</span> <span class="token comment">// 또는 &#39;serve&#39;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>보다 정확한 제어를 위해 함수를 사용할 수도 있습니다:</p><div class="language-js"><pre><code><span class="token function">apply</span><span class="token punctuation">(</span><span class="token parameter">config<span class="token punctuation">,</span> <span class="token punctuation">{</span> command <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 빌드 시 적용되지만 SSR에는 적용되지 않는 플러그인</span>
  <span class="token keyword">return</span> command <span class="token operator">===</span> <span class="token string">&#39;build&#39;</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>config<span class="token punctuation">.</span>build<span class="token punctuation">.</span>ssr
<span class="token punctuation">}</span>
</code></pre></div><h2 id="rollup-plugin-compatibility" tabindex="-1">Rollup 플러그인 호환성 <a class="header-anchor" href="#rollup-plugin-compatibility" aria-hidden="true">#</a></h2><p><code>@rollup/plugin-alias</code> 또는 <code>@rollup/plugin-json</code>과 같이 상당한 수의 Rollup 플러그인이 Vite 플러그인으로도 사용될 수 있으나, 일부 Rollup 플러그인 훅의 경우 번들되지 않은 개발 서버에서는 의미가 없기에 전부 Vite 플러그인으로 사용할 수 있지는 않습니다.</p><p>일반적으로, Rollup 플러그인이 다음 기준에 부합한다면 Vite 플러그인으로도 사용이 가능합니다:</p><ul><li><a href="https://rollupjs.org/guide/en/#moduleparsed" target="_blank" rel="noopener noreferrer"><code>moduleParsed</code></a> 훅을 사용하지 않음</li><li>번들 단계의 훅과 번들링 이후 출력 단계의 훅 사이에 강력한 결합이 없음</li></ul><p>만약 Rollup 플러그인이 빌드 단계에서만 의미가 있는 경우라면, <code>build.rollupOptions.plugins</code> 옵션에 해당 플러그인을 사용하도록 지정할 수 있습니다.</p><p>물론 Vite 전용 프로퍼티로 기존 Rollup 플러그인을 보강할 수도 있습니다:</p><div class="language-js"><pre><code><span class="token comment">// vite.config.js</span>
<span class="token keyword">import</span> example <span class="token keyword">from</span> <span class="token string">&#39;rollup-plugin-example&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vite&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token operator">...</span><span class="token function">example</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token literal-property property">enforce</span><span class="token operator">:</span> <span class="token string">&#39;post&#39;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">apply</span><span class="token operator">:</span> <span class="token string">&#39;build&#39;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>호환되는 공식 Rollup 플러그인 목록 및 사용 방법은 <a href="https://vite-rollup-plugins.patak.dev" target="_blank" rel="noopener noreferrer">Vite Rollup Plugins</a>를 확인해주세요.</p><h2 id="path-normalization" tabindex="-1">경로 정규화 <a class="header-anchor" href="#path-normalization" aria-hidden="true">#</a></h2><p>Vite는 Windows에서도 POSIX 구분 기호( / )를 사용할 수 있도록 파일의 ID를 확인할 때 경로를 같이 정규화합니다. 반면 Rollup은 기본적으로 파일의 경로를 그대로 유지하기에, Windows에서 파일의 ID는 win32 구분 기호( \ )를 포함하고 있습니다. 따라서 Rollup 플러그인은 이 구분 기호를 POSIX로 변환하는 <code>@rollup/pluginutils</code>의 <a href="https://github.com/rollup/plugins/tree/master/packages/pluginutils#normalizepath" target="_blank" rel="noopener noreferrer"><code>normalizePath</code> 유틸리티 함수</a>를 사용합니다. 이 덕분에 Rollup 플러그인이 Vite에서 사용될 때도 파일의 ID에 대한 <code>include</code> 및 <code>exclude</code> 패턴 및 이와 유사한 경로 관련 작업이 올바르게 동작할 수 있게 됩니다.</p><p>따라서 만약 새로이 Vite 플러그인을 작성하는 경우, 파일의 ID와 실제 경로를 비교할 때 먼저 POSIX 구분 기호를 사용하도록 경로를 정규화해줘야 합니다. 이는 <code>vite</code> 모듈의 <code>normalizePath</code> 유틸리티 함수를 이용할 수 있습니다.</p><div class="language-js"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> normalizePath <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vite&#39;</span>

<span class="token function">normalizePath</span><span class="token punctuation">(</span><span class="token string">&#39;foo\\bar&#39;</span><span class="token punctuation">)</span> <span class="token comment">// &#39;foo/bar&#39;</span>
<span class="token function">normalizePath</span><span class="token punctuation">(</span><span class="token string">&#39;foo/bar&#39;</span><span class="token punctuation">)</span> <span class="token comment">// &#39;foo/bar&#39;</span>
</code></pre></div></div></div><footer class="page-footer" data-v-8fcebc32 data-v-b65b4b36><div class="edit" data-v-b65b4b36><div class="edit-link" data-v-b65b4b36 data-v-55695e90><a class="link" href="https://github.com/vitejs-kr/vitejs-kr.github.io/edit/main/guide/api-plugin.md" target="_blank" rel="noopener noreferrer" data-v-55695e90>이 페이지 수정하기 <svg class="icon outbound icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-55695e90><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="updated" data-v-b65b4b36><!----></div></footer><div class="next-and-prev-link" data-v-8fcebc32 data-v-e65a9748><div class="container" data-v-e65a9748><div class="prev" data-v-e65a9748><a class="link" href="/guide/migration" data-v-e65a9748><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-prev" data-v-e65a9748><path d="M19,11H7.4l5.3-5.3c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-7,7c-0.1,0.1-0.2,0.2-0.2,0.3c-0.1,0.2-0.1,0.5,0,0.8c0.1,0.1,0.1,0.2,0.2,0.3l7,7c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.4,13H19c0.6,0,1-0.4,1-1S19.6,11,19,11z"></path></svg><span class="text" data-v-e65a9748>v1에서 마이그레이션하기</span></a></div><div class="next" data-v-e65a9748><a class="link" href="/guide/api-hmr" data-v-e65a9748><span class="text" data-v-e65a9748>HMR API</span><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-next" data-v-e65a9748><path d="M19.9,12.4c0.1-0.2,0.1-0.5,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.3l-7-7c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l5.3,5.3H5c-0.6,0-1,0.4-1,1s0.4,1,1,1h11.6l-5.3,5.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l7-7C19.8,12.6,19.9,12.5,19.9,12.4z"></path></svg></a></div></div></div><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"readme.md\":\"48bcaff1\",\"terminology.md\":\"021dfc3d\",\"blog_announcing-vite2.md\":\"1927090c\",\"config_index.md\":\"2c1a6c65\",\"guide_api-hmr.md\":\"4575295c\",\"guide_api-javascript.md\":\"9fe4384e\",\"guide_api-plugin.md\":\"273f86f6\",\"guide_assets.md\":\"2447b8bb\",\"guide_backend-integration.md\":\"74a9ae48\",\"guide_build.md\":\"ce356bbf\",\"guide_comparisons.md\":\"743b81ad\",\"guide_dep-pre-bundling.md\":\"22079bb8\",\"guide_env-and-mode.md\":\"3eb1e1d7\",\"guide_features.md\":\"a90a5adf\",\"guide_index.md\":\"33807a11\",\"guide_migration.md\":\"8049259c\",\"guide_ssr.md\":\"b679b2b5\",\"guide_static-deploy.md\":\"809a01dd\",\"guide_using-plugins.md\":\"fb5216b1\",\"guide_why.md\":\"2ff1bcee\",\"index.md\":\"ab1872fb\",\"plugins_index.md\":\"55869c4c\"}")</script>
    <script type="module" async src="/assets/app.18df0fee.js"></script>
    
  </body>
</html>